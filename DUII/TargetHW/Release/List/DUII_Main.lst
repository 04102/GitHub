###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.10.2.52244/W32 for ARM     02/Feb/2016  18:29:24 #
# Copyright 1999-2010 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  arm                                                      #
#    Endian       =  little                                                   #
#    Source file  =  C:\DUII\DUII\DUII_Main.c                                 #
#    Command line =  C:\DUII\DUII\DUII_Main.c -D DEBUG=1 -D SDRAM_TARGET=1    #
#                    -D USB_IS_HIGH_SPEED -D NOPROFILER -D OS_TRACE=0 -D      #
#                    OS_VIEW_ENABLE=0 -lCN C:\DUII\TargetHW\Release\List\ -o  #
#                    C:\DUII\TargetHW\Release\Obj\ --endian=little            #
#                    --cpu=ARM926EJ-S -e --fpu=None --dlib_config             #
#                    "C:\Program Files (x86)\IAR Systems\Embedded Workbench   #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I                   #
#                    C:\DUII\TargetHW\Application\SEGGERDEMO\ -I              #
#                    C:\DUII\TargetHW\Application\SEGGERDEMO\Src\ -I          #
#                    C:\DUII\TargetHW\Config\ -I C:\DUII\TargetHW\FS\ -I      #
#                    C:\DUII\TargetHW\GUI\ -I C:\DUII\TargetHW\Inc\ -I        #
#                    C:\DUII\TargetHW\OS\ -I C:\DUII\TargetHW\Setup\ -I       #
#                    \DUII\DUII\ -I \DUII\DUII\Graphics\ --cpu_mode arm -Ohs  #
#                    --use_c++_inline --require_prototypes                    #
#    List file    =  C:\DUII\TargetHW\Release\List\DUII_Main.lst              #
#    Object file  =  C:\DUII\TargetHW\Release\Obj\DUII_Main.o                 #
#                                                                             #
#                                                                             #
###############################################################################

C:\DUII\DUII\DUII_Main.c
      1          /*********************************************************************
      2          *               SEGGER MICROCONTROLLER SYSTEME GmbH                  *
      3          *       Solutions for real time microcontroller applications         *
      4          **********************************************************************
      5          *                                                                    *
      6          *       (c) 1995 - 2008  SEGGER Microcontroller GmbH & Co. KG        *
      7          *                                                                    *
      8          *       www.segger.com     Support: support@segger.com               *
      9          *                                                                    *
     10          **********************************************************************
     11          *                                                                    *
     12          *       embOS * Real time operating system for microcontrollers      *
     13          *                                                                    *
     14          *                                                                    *
     15          *       Please note:                                                 *
     16          *                                                                    *
     17          *       Knowledge of this file may under no circumstances            *
     18          *       be used to write a similar product or a real-time            *
     19          *       operating system for in-house use.                           *
     20          *                                                                    *
     21          *       Thank you for your fairness !                                *
     22          *                                                                    *
     23          **********************************************************************
     24          *                                                                    *
     25          *       embOS version: 3.52e                                         *
     26          *                                                                    *
     27          **********************************************************************
     28          
     29          ----------------------------------------------------------------------
     30          File    : GUI_DUII_Main.c
     31          Purpose : emWin and embOS demo application
     32          --------  END-OF-HEADER  ---------------------------------------------
     33          */
     34          
     35          #ifndef _WINDOWS
     36          #ifdef PROFILER
     37          #include "profiler.h"
     38          #define THIS_TASK	MAINTASK_NUM
     39          #endif
     40          #endif
     41          
     42          #include "GUI.h"
     43          #include "DUII.h"
     44          #include "commondefs.h"
     45          #include "DIALOG.h"
     46          #include "ConfigScreens.h"
     47          #include "GeneralConfig.h"
     48          #include "FlashReadWrite.h"
     49          #if	_WINDOWS
     50          #include "windows.h"
     51          #include "SIMConf.h"
     52          #else
     53          #include "RTOS.H"
     54          #include "FS.h"
     55          #include "MMC_MCI_HW.h"
     56          #include "SPI_API.h"
     57          #include "LCDConf.h"
     58          #include "FlashLights.h"
     59          #include "FactoryCheckout.h"
     60          #include "dataflash.h"
     61          #include "CommTask.h"
     62          #include "adc.h"
     63          #include "WiFiFunctions.h"
     64          #endif
     65          #include "LEDHandler.h"
     66          #include "GaugeScreen.h"
     67          #include <stdio.h>
     68          #include <string.h>
     69          #include "RunningGauges.h"
     70          #include "CalibrateTouchScreen.h"
     71          #include "DataHandler.h"
     72          #include "RaceSetupScreens.h"
     73          #include "TrackDetect.h"
     74          #include "SystemSettingsScreens.h"
     75          #include "SFScreens.h"
     76          #include "TrackSettingsScreens.h"
     77          #include "ReviewSessionsScreens.h"
     78          #include "VehicleSettingsScreens.h"
     79          #include "Archive.h"
     80          #include "PersonalizeScreens.h"
     81          #include "HelpScreens.h"
     82          
     83          
     84          //
     85          // External Declarations
     86          //
     87          extern GUI_CONST_STORAGE GUI_BITMAP bmSplashScreen;
     88          extern GUI_CONST_STORAGE GUI_BITMAP bmSonyIcon;
     89          extern GUI_CONST_STORAGE GUI_BITMAP bmChaseCamIcon;
     90          extern GUI_CONST_STORAGE GUI_BITMAP bmRaceCamIcon;
     91          extern GUI_CONST_STORAGE GUI_BITMAP bmGoProIcon;
     92          extern GUI_CONST_STORAGE GUI_BITMAP bmReplayIcon;
     93          extern GUI_CONST_STORAGE GUI_BITMAP bmReplay1080Icon;
     94          extern GUI_CONST_STORAGE GUI_BITMAP bmReplayMiniIcon;
     95          extern GUI_CONST_STORAGE GUI_BITMAP bmReplayPrimeIcon;
     96          extern GUI_CONST_STORAGE GUI_BITMAP bmMobiusIcon;
     97          extern GUI_CONST_STORAGE GUI_BITMAP bmCheckIcon;
     98          extern GUI_CONST_STORAGE GUI_BITMAP bmXIcon;
     99          extern GUI_CONST_STORAGE GUI_BITMAP bmDriverName;
    100          extern GUI_CONST_STORAGE GUI_BITMAP bmVehicleName;
    101          extern GUI_CONST_STORAGE GUI_BITMAP bmUSBCamIcon;
    102          extern GUI_CONST_STORAGE GUI_BITMAP bmWiFiEnabledIcon;
    103          extern GUI_CONST_STORAGE GUI_BITMAP bmWiFiDisabledIcon;
    104          
    105          #ifndef _WINDOWS
    106          extern void CommSimulatorTask(void);
    107          extern OS_STACKPTR int commStack[1024];
    108          extern char SDCardPresent(void);
    109          extern void reset(void);
    110          extern OS_TASK mainTCB;
    111          #endif
    112          
    113          #ifdef BUILD_DEBUG_PORT
    114          #include "dbgu.h"
    115          
    116          extern int glbErrorFlag;
    117          #endif
    118          
    119          //
    120          // Global data declarations
    121          //
    122          char lockupSemaphore;

   \                                 In section .data, align 4
    123          int popupTitleTextColor = GUI_WHITE;
   \                     popupTitleTextColor:
   \   00000000   FFFFFF00           DC32 16777215
    124          
    125          //
    126          // Local data definitions
    127          //
    128          typedef enum {
    129          	CODESU,
    130          	CODETQ,
    131          	BOOTTQ,
    132          	NOMATCH
    133          } codefiletypes;
    134          

   \                                 In section .text, align 4, keep-with-next
    135          const char VERSION_PATH[] = { LEADING_PATH CFG_PATH "\\" VER_FILE DAT_EXT };		// location where Version.dat is stored
   \                     VERSION_PATH:
   \   00000000                      ; Initializer data, 28 bytes
   \   00000000   5C436F6E6669       DC8 92, 67, 111, 110, 102, 105, 103, 70, 105, 108
   \              6746696C    
   \   0000000A   65735C566572       DC8 101, 115, 92, 86, 101, 114, 115, 105, 111, 110
   \              73696F6E    
   \   00000014   2E6461740000       DC8 46, 100, 97, 116, 0, 0, 0, 0
   \              0000        
    136          //
    137          // Local function prototypes
    138          //
    139          int SDCardRemoved(void);
    140          int SDCardReinserted(void);
    141          int ReFlashYorN( codefiletypes, int );
    142          int DemoYorN( void );
    143          void PowerOffUnit(WM_HWIN owner, char reset, int delay);
    144          void SaveFilesAndPowerDown(void);
    145          #ifndef _WINDOWS
    146          void ConfigureCache(void);
    147          char OkToUseSDCard(void);
    148          int RetrySDCard( void );
    149          #endif
    150          void SetPopupDefaults(enum POPUP_TYPES type);
    151          void ConfigureForNoSDCard(void);
    152          void InitializeTraqmateFiles(void);
    153          void AskAndDoFormatSDCard(void);
    154          void InitializeTraqmateData(void);
    155          void DisplayInvalidFilesPopup(int files);
    156          void WriteCodeImage(void);
    157          void DisplaySplashScreen1(void);
    158          void DisplaySplashScreen3(void);
    159          void DisplayAnalogStatus(int i);
    160          void RepaintSplash(void);
    161          void CreateProgressBar(PROGBAR_Handle *hProgBar, int maxval);
    162          int NewSWVersion(void);
    163          int UserWantsToUpdateSF(void);
    164          void local_itoa(int n, char s[]);
    165          void reverse(char s[]);
    166          
    167          //
    168          // Local variable declarations
    169          //
    170          int testMode;
    171          int demoMode;
    172          int factMode;
    173          static char localSDCardFlag;		// true = SD card present, false == absent
    174          static char okToUseSDCard = false;
    175          long splashScreenStartTime;
    176          
    177          #define DEBOUNCE_ONOFF_MSEC				1000	// debounce value of onoff buttons in msec
    178          #define FAT_VOLUME_LABEL_LENGTH			32		// number of characters in NFTS volume label (FAT = 11)
    179          #define	SPLASH_SCREEN_PERSIST_TIME		4000	// 4 seconds
    180          
    181          /*********************************************************************
    182          *
    183          *       main()
    184          */
    185          void MainTask(void);
    186          

   \                                 In section .text, align 4, keep-with-next
    187          void MainTask(void)
    188          {
   \                     MainTask:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    189          	int screen;
    190          	enum SCREEN_TYPE screenType;
    191          #ifndef _WINDOWS
    192          	char checkFormat, dontRunWithout;
    193          	char sdCardLabel[FAT_VOLUME_LABEL_LENGTH+1];			// volume label of sd card
    194          #endif
    195          
    196          #ifdef BUILD_DEBUG_PORT
    197             DBGU_Configure(DBGU_STANDARD, 115200, BOARD_MCK);
    198          #endif
    199          
    200          	// initialize the who are we information
    201          	unsavedSysData.duSwRev = DU2_SW_REV;					// software rev * 100
   \   00000004   ........           LDR      R4,??DataTable91
   \   00000008   2D00A0E3           MOV      R0,#+45
   \   0000000C   400F80E3           ORR      R0,R0,#0x100
   \   00000010   B000C4E1           STRH     R0,[R4, #+0]
    202          	unsavedSysData.duDataRev = DU2_DATA_REV;				// data rev for matching up with SU messages
   \   00000014   0800A0E3           MOV      R0,#+8
   \   00000018   B200C4E1           STRH     R0,[R4, #+2]
    203          	unsavedSysData.duHwRev = DU2_HW_REV;					// what hardware rev are we working with
   \   0000001C   8C00A0E3           MOV      R0,#+140
    204          
    205          	// initialize other data in unsavedSysData
    206          	unsavedSysData.recordingTimedout = FALSE;				// Recording initially off
   \   00000020   0050A0E3           MOV      R5,#+0
   \   00000024   34D04DE2           SUB      SP,SP,#+52
   \   00000028   0400C4E5           STRB     R0,[R4, #+4]
   \   0000002C   D450C4E5           STRB     R5,[R4, #+212]
    207          
    208          #ifdef _WINDOWS
    209          	unsavedSysData.unitInfo.serno = DEFAULT_SERIAL_NUMBER;
    210          	unsavedSysData.unitInfo.week = DEFAULT_BUILD_WEEK;
    211          	unsavedSysData.unitInfo.year = DEFAULT_BUILD_YEAR;
    212          	unsavedSysData.unitInfo.bootloaderSwRev = DEFAULT_BOOTLOADER_REV;
    213          #endif
    214          	
    215          	GUI_Init();
   \   00000030   ........           BL       GUI_Init
    216          	DisplaySplashScreen1();
   \   00000034   ........           BL       GUI_Clear
   \   00000038   0A20A0E3           MOV      R2,#+10
   \   0000003C   2710A0E3           MOV      R1,#+39
   \   00000040   ........           LDR      R0,??DataTable91_1
   \   00000044   ........           BL       GUI_DrawBitmap
   \   00000048   ........           LDR      R8,??DataTable91_2
   \   0000004C   6120A0E3           MOV      R2,#+97
   \   00000050   1410A0E3           MOV      R1,#+20
   \   00000054   0800A0E1           MOV      R0,R8
   \   00000058   ........           BL       GUI_DrawBitmap
   \   0000005C   ........           LDR      R9,??DataTable91_3
   \   00000060   6E20A0E3           MOV      R2,#+110
   \   00000064   F010A0E3           MOV      R1,#+240
   \   00000068   0900A0E1           MOV      R0,R9
   \   0000006C   ........           BL       GUI_DrawBitmap
    217          
    218          	WarningPopupInit();			// Initialize warning popups
   \   00000070   ........           BL       WarningPopupInit
    219          
    220          	BUTTON_SetDefaultSkin   (BUTTON_SKIN_FLEX);
   \   00000074   ........           LDR      R0,??DataTable91_4
   \   00000078   ........           BL       BUTTON_SetDefaultSkin
    221          
    222          	CHECKBOX_SetDefaultSkin (CHECKBOX_SKIN_FLEX);
   \   0000007C   ........           LDR      R0,??DataTable91_5
   \   00000080   ........           BL       CHECKBOX_SetDefaultSkin
    223          	DROPDOWN_SetDefaultSkin (DROPDOWN_SKIN_FLEX);
   \   00000084   ........           LDR      R0,??DataTable91_6
   \   00000088   ........           BL       DROPDOWN_SetDefaultSkin
    224          	FRAMEWIN_SetDefaultSkin (FRAMEWIN_SKIN_FLEX);
   \   0000008C   ........           LDR      R0,??DataTable91_7
   \   00000090   ........           BL       FRAMEWIN_SetDefaultSkin
    225          	HEADER_SetDefaultSkin   (HEADER_SKIN_FLEX);
   \   00000094   ........           LDR      R0,??DataTable91_8
   \   00000098   ........           BL       HEADER_SetDefaultSkin
    226          	RADIO_SetDefaultSkin    (RADIO_SKIN_FLEX);
   \   0000009C   ........           LDR      R0,??DataTable91_9
   \   000000A0   ........           BL       RADIO_SetDefaultSkin
    227          	SCROLLBAR_SetDefaultSkin(SCROLLBAR_SKIN_FLEX);
   \   000000A4   ........           LDR      R0,??DataTable91_10
   \   000000A8   ........           BL       SCROLLBAR_SetDefaultSkin
    228          	FRAMEWIN_SetDefaultClientColor(GUI_OFFWHITE);
   \   000000AC   ........           LDR      R0,??DataTable91_11  ;; 0xf0f0f0
   \   000000B0   ........           BL       FRAMEWIN_SetDefaultClientColor
    229          
    230          #ifdef _WINDOWS
    231          	SIM_Init();
    232          	InitializeTraqmateFiles();
    233            	InitCommSimulatorTask();		// Initialize simulation data (uses vehicle data set in InitializeTraqmateFiles)
    234          	InitializeLEDStructures();		// Initialize LED structures before flashing starts
    235          	InitializeLEDs();
    236          #else
    237          	FlashLights();
   \   000000B4   ........           BL       FlashLights
    238          	FS_Init();
   \   000000B8   ........           BL       FS_Init
    239          	FS_FAT_SupportLFN();
   \   000000BC   ........           BL       FS_FAT_SupportLFN
    240          	
    241          	ConfigureCache();
   \   000000C0   0200A0E3           MOV      R0,#+2
   \   000000C4   ........           BL       FS_SetFileWriteMode
   \   000000C8   BA6F8FE2           ADR      R6,??MainTask_1  ;; ""
   \   000000CC   ........           LDR      R3,??DataTable91_12
   \   000000D0   C02CA0E3           MOV      R2,#+49152
   \   000000D4   C019A0E3           MOV      R1,#+3145728
   \   000000D8   0600A0E1           MOV      R0,R6
   \   000000DC   ........           BL       FS_AssignCache
   \   000000E0   0720A0E3           MOV      R2,#+7
   \   000000E4   0710A0E3           MOV      R1,#+7
   \   000000E8   0600A0E1           MOV      R0,R6
   \   000000EC   ........           BL       FS_CACHE_SetMode
    242          
    243          	checkFormat = true;	
   \   000000F0   0170A0E3           MOV      R7,#+1
   \   000000F4   01B0A0E3           MOV      R11,#+1
    244          	dontRunWithout = true;
   \   000000F8   01A0A0E3           MOV      R10,#+1
    245          	if ((unsavedSysData.sdCardInserted = SDCardPresent()) == false)		// card not inserted
   \   000000FC   ........           BL       SDCardPresent
   \   00000100   C00084E5           STR      R0,[R4, #+192]
   \   00000104   000050E3           CMP      R0,#+0
   \   00000108   2900001A           BNE      ??MainTask_2
    246          	{
    247          		if ((FS_MCI_HW_IsCardPresent(0) && SDCardWriteProtected()))
   \   0000010C   ........           BL       FS_MCI_HW_IsCardPresent
   \   00000110   000050E3           CMP      R0,#+0
   \   00000114   0200000A           BEQ      ??MainTask_3
   \   00000118   ........           BL       SDCardWriteProtected
   \   0000011C   000050E3           CMP      R0,#+0
    248          #ifdef SDCARDS_BEHAVING_WELL
    249          			checkFormat = true;					// Card will behave properly when I ask it if it's formatted
    250          #else
    251          			checkFormat = false;				// Card is present but write protected - special case!!
   \   00000120   00B0A013           MOVNE    R11,#+0
    252          #endif
    253          			
    254          		while ((dontRunWithout = RetrySDCard()) == true)	// Ask the user if he wants to retry or run without
   \                     ??MainTask_3:
   \   00000124   ........           BL       RetrySDCard
   \   00000128   FFA000E2           AND      R10,R0,#0xFF
   \   0000012C   01005AE3           CMP      R10,#+1
   \   00000130   1000001A           BNE      ??MainTask_4
    255          		{
    256          			if (SDCardPresent() == true)		// retry
   \   00000134   ........           BL       SDCardPresent
   \   00000138   010050E3           CMP      R0,#+1
   \   0000013C   F8FFFF1A           BNE      ??MainTask_3
    257          			{
    258          				DisplaySplashScreen1();			// Redisplay splash screen to clear popup
   \   00000140   ........           BL       GUI_Clear
   \   00000144   0A20A0E3           MOV      R2,#+10
   \   00000148   2710A0E3           MOV      R1,#+39
   \   0000014C   ........           LDR      R0,??DataTable91_1
   \   00000150   ........           BL       GUI_DrawBitmap
   \   00000154   6120A0E3           MOV      R2,#+97
   \   00000158   1410A0E3           MOV      R1,#+20
   \   0000015C   0800A0E1           MOV      R0,R8
   \   00000160   ........           BL       GUI_DrawBitmap
   \   00000164   6E20A0E3           MOV      R2,#+110
   \   00000168   F010A0E3           MOV      R1,#+240
   \   0000016C   0900A0E1           MOV      R0,R9
   \   00000170   ........           BL       GUI_DrawBitmap
    259          				goto continueStartup;
   \   00000174   0A0000EA           B        ??MainTask_5
    260          			}
    261          		}
    262          		checkFormat = false;
   \                     ??MainTask_4:
   \   00000178   00B0A0E3           MOV      R11,#+0
    263          		InitializeTraqmateData();				// run without - set default data
   \   0000017C   ........           BL       CreateTracks
   \   00000180   ........           BL       ReadDataStructures
   \   00000184   000050E3           CMP      R0,#+0
   \   00000188   0400000A           BEQ      ??MainTask_6
   \   0000018C   C01094E5           LDR      R1,[R4, #+192]
   \   00000190   000051E3           CMP      R1,#+0
   \   00000194   0000000A           BEQ      ??MainTask_7
   \   00000198   ........           BL       DisplayInvalidFilesPopup
   \                     ??MainTask_7:
   \   0000019C   0000A0E3           MOV      R0,#+0
   \                     ??MainTask_6:
   \   000001A0   ........           BL       ResetAllFileLists
    264          	continueStartup:
    265          		unsavedSysData.sdCardInserted = SDCardPresent();
   \                     ??MainTask_5:
   \   000001A4   ........           BL       SDCardPresent
   \   000001A8   C00084E5           STR      R0,[R4, #+192]
    266          		testMode = false;
   \   000001AC   ........           LDR      R0,??DataTable92
   \   000001B0   005080E5           STR      R5,[R0, #+0]
    267          	}
    268          	
    269          	DisplaySplashScreen1();			// Repaint the initial splash screen incase we displayed the popup and he said no
   \                     ??MainTask_2:
   \   000001B4   ........           BL       GUI_Clear
   \   000001B8   0A20A0E3           MOV      R2,#+10
   \   000001BC   2710A0E3           MOV      R1,#+39
   \   000001C0   ........           LDR      R0,??DataTable91_1
   \   000001C4   ........           BL       GUI_DrawBitmap
   \   000001C8   6120A0E3           MOV      R2,#+97
   \   000001CC   1410A0E3           MOV      R1,#+20
   \   000001D0   0800A0E1           MOV      R0,R8
   \   000001D4   ........           BL       GUI_DrawBitmap
   \   000001D8   6E20A0E3           MOV      R2,#+110
   \   000001DC   F010A0E3           MOV      R1,#+240
   \   000001E0   0900A0E1           MOV      R0,R9
   \   000001E4   ........           BL       GUI_DrawBitmap
    270          
    271          	localSDCardFlag = true;
   \   000001E8   ........           LDR      R8,??DataTable92
    272          	
    273          	if (checkFormat)
   \   000001EC   00005BE3           CMP      R11,#+0
   \   000001F0   1570C8E5           STRB     R7,[R8, #+21]
   \   000001F4   2600000A           BEQ      ??MainTask_8
    274          	{
    275          		if (((unsavedSysData.sdCardInserted)) && (FS_IsHLFormatted("") != 1))
   \   000001F8   C00094E5           LDR      R0,[R4, #+192]
   \   000001FC   000050E3           CMP      R0,#+0
   \   00000200   1200000A           BEQ      ??MainTask_9
   \   00000204   0600A0E1           MOV      R0,R6
   \   00000208   ........           BL       FS_IsHLFormatted
   \   0000020C   010050E3           CMP      R0,#+1
   \   00000210   0E00000A           BEQ      ??MainTask_9
    276          			AskAndDoFormatSDCard();
   \   00000214   ........           BL       WM_GetDesktopWindow
   \   00000218   0090A0E1           MOV      R9,R0
   \   0000021C   0910A0E1           MOV      R1,R9
   \   00000220   0D00A0E3           MOV      R0,#+13
   \   00000224   ........           BL       SystemSettingsPopUp
   \   00000228   000050E3           CMP      R0,#+0
   \   0000022C   0800000A           BEQ      ??MainTask_10
   \   00000230   0910A0E1           MOV      R1,R9
   \   00000234   0300A0E3           MOV      R0,#+3
   \   00000238   ........           BL       SystemSettingsPopUp
   \   0000023C   000050E3           CMP      R0,#+0
   \   00000240   0300000A           BEQ      ??MainTask_10
   \   00000244   0900A0E1           MOV      R0,R9
   \   00000248   ........           BL       FormatSDCard
   \   0000024C   000000EA           B        ??MainTask_10
    277          		else okToUseSDCard = true;
   \                     ??MainTask_9:
   \   00000250   1670C8E5           STRB     R7,[R8, #+22]
    278          		
    279          		// check volume label of SD card and set if it is blank
    280          		if (0 == FS_GetVolumeLabel("", sdCardLabel, FAT_VOLUME_LABEL_LENGTH)) {
   \                     ??MainTask_10:
   \   00000254   2020A0E3           MOV      R2,#+32
   \   00000258   0C108DE2           ADD      R1,SP,#+12
   \   0000025C   0600A0E1           MOV      R0,R6
   \   00000260   ........           BL       FS_GetVolumeLabel
   \   00000264   000050E3           CMP      R0,#+0
   \   00000268   0700001A           BNE      ??MainTask_11
    281          			if (0 == strlen(sdCardLabel))
   \   0000026C   0C008DE2           ADD      R0,SP,#+12
   \   00000270   ........           BL       strlen
   \   00000274   000050E3           CMP      R0,#+0
   \   00000278   0300001A           BNE      ??MainTask_11
    282          				FS_SetVolumeLabel("", "TRAQDASH");
   \   0000027C   ............       ADRL     R1,`?<Constant "TRAQDASH">`
   \              ....        
   \   00000284   0600A0E1           MOV      R0,R6
   \   00000288   ........           BL       FS_SetVolumeLabel
    283          		} // if
    284          	
    285          		InitializeTraqmateFiles();
   \                     ??MainTask_11:
   \   0000028C   ........           BL       InitializeTraqmateFiles
   \   00000290   2D0000EA           B        ??MainTask_12
    286          	}
    287          	else								// Handle special case of card inserted but was write protected
    288          	{
    289          		ConfigureForNoSDCard();			// In this case we can only run with no SD card
   \                     ??MainTask_8:
   \   00000294   C05084E5           STR      R5,[R4, #+192]
   \   00000298   0600A0E1           MOV      R0,R6
   \   0000029C   ........           BL       FS_Unmount
   \   000002A0   8800D4E5           LDRB     R0,[R4, #+136]
   \   000002A4   030040E2           SUB      R0,R0,#+3
   \   000002A8   FF0000E2           AND      R0,R0,#0xFF
   \   000002AC   130050E3           CMP      R0,#+19
   \   000002B0   0100002A           BCS      ??MainTask_13
   \   000002B4   0400A0E3           MOV      R0,#+4
   \   000002B8   ........           BL       notifyTQM
   \                     ??MainTask_13:
   \   000002BC   0200A0E3           MOV      R0,#+2
   \   000002C0   8800C4E5           STRB     R0,[R4, #+136]
   \   000002C4   0100A0E3           MOV      R0,#+1
   \   000002C8   ........           BL       ResetAllFileLists
   \   000002CC   ........           BL       ClearNameStruct
    290          		InitializeTraqmateData();		// run without - set default data
   \   000002D0   ........           BL       CreateTracks
   \   000002D4   ........           BL       ReadDataStructures
   \   000002D8   000050E3           CMP      R0,#+0
   \   000002DC   0400000A           BEQ      ??MainTask_14
   \   000002E0   C01094E5           LDR      R1,[R4, #+192]
   \   000002E4   000051E3           CMP      R1,#+0
   \   000002E8   0000000A           BEQ      ??MainTask_15
   \   000002EC   ........           BL       DisplayInvalidFilesPopup
   \                     ??MainTask_15:
   \   000002F0   0000A0E3           MOV      R0,#+0
   \                     ??MainTask_14:
   \   000002F4   ........           BL       ResetAllFileLists
    291          		if (dontRunWithout == true)		// If the user does not want to run with no SD card
   \   000002F8   01005AE3           CMP      R10,#+1
   \   000002FC   1200001A           BNE      ??MainTask_12
    292          			SDCardReinserted();			// Ask the user if we should reset and do it if so
   \   00000300   ........           BL       HideSprites
   \   00000304   0200A0E3           MOV      R0,#+2
   \   00000308   ........           BL       SetPopupDefaults
   \   0000030C   ........           LDR      R0,??DataTable94
   \   00000310   007080E5           STR      R7,[R0, #+0]
   \   00000314   ........           BL       WM_GetDesktopWindow
   \   00000318   0A10A0E3           MOV      R1,#+10
   \   0000031C   04108DE5           STR      R1,[SP, #+4]
   \   00000320   00108DE5           STR      R1,[SP, #+0]
   \   00000324   0030A0E1           MOV      R3,R0
   \   00000328   ........           LDR      R2,??DataTable93_1
   \   0000032C   0310A0E3           MOV      R1,#+3
   \   00000330   ............       ADRL     R0,??SDCardReinsertedResources
   \              ....        
   \   00000338   ........           BL       GUI_ExecDialogBox
   \   0000033C   010050E3           CMP      R0,#+1
   \   00000340   0000001A           BNE      ??MainTask_16
   \   00000344   ........           BL       reset
   \                     ??MainTask_16:
   \   00000348   ........           BL       UnhideSprites
    293          	}
    294          	
    295          	// Set the LEDs to user settings (note: InitializeLEDStructures called in   
    296          	// Main.c which must be called before startup LED flashes)
    297          	InitializeLEDs();					
   \                     ??MainTask_12:
   \   0000034C   ........           BL       InitializeLEDs
    298          
    299          	// load new code if available
    300          	// needs to be after sd card read so that if user says no, su will get the right config
    301          	WriteCodeImage();
   \   00000350   ........           BL       WriteCodeImage
    302          	
    303          #endif
    304          
    305          	WIDGET_SetDefaultEffect(&WIDGET_Effect_None);
   \   00000354   ........           LDR      R0,??DataTable93_2
   \   00000358   ........           BL       WIDGET_SetDefaultEffect
    306          
    307          	screen = GetLastScreen(GetScreenType());
   \   0000035C   ........           BL       GetScreenType
   \   00000360   ........           BL       GetLastScreen
   \   00000364   0090A0E1           MOV      R9,R0
    308          	screenType = GetScreenType();
   \   00000368   ........           BL       GetScreenType
   \   0000036C   00A0A0E1           MOV      R10,R0
    309          
    310          	ValidateRaceScreens();
   \   00000370   ........           BL       ValidateRaceScreens
    311          
    312          	// Be sure we have show the splash screen long enough
    313          	while ((GUI_GetTime() - splashScreenStartTime) < SPLASH_SCREEN_PERSIST_TIME)
   \                     ??MainTask_17:
   \   00000374   ........           BL       GUI_GetTime
   \   00000378   0C1098E5           LDR      R1,[R8, #+12]
   \   0000037C   010040E0           SUB      R0,R0,R1
   \   00000380   FA0E50E3           CMP      R0,#+4000
   \   00000384   FAFFFFBA           BLT      ??MainTask_17
    314          		;
    315          
    316          	raceModeState = RM_INITIAL;
   \   00000388   ........           LDR      R0,??DataTable93_3
   \   0000038C   0050C0E5           STRB     R5,[R0, #+0]
    317          	// Set the last running mode
    318          	if (AnyGaugeScreen(screenType))
   \   00000390   0A00A0E1           MOV      R0,R10
   \   00000394   ........           BL       AnyGaugeScreen
   \   00000398   000050E3           CMP      R0,#+0
   \   0000039C   0600000A           BEQ      ??MainTask_18
    319          	{
    320          		if (!StartupGoToRaceMode())
   \   000003A0   ........           BL       StartupGoToRaceMode
   \   000003A4   000050E3           CMP      R0,#+0
   \   000003A8   0500001A           BNE      ??MainTask_19
    321          		{
    322          			screenType = CONFIG_SCREEN_TYPE;		// Go to Config Screens group instead
   \   000003AC   01A0A0E3           MOV      R10,#+1
    323          			screen = GO_RACING;						// Go Racing screen
   \   000003B0   0090A0E3           MOV      R9,#+0
   \   000003B4   2C0000EA           B        ??MainTask_20
   \                     ??MainTask_1:
   \   000003B8   00000000           DC8      "",0x0,0x0,0x0
    324          		}
    325          	}
    326          	else SetUserMode(DU2_IDLE);
   \                     ??MainTask_18:
   \   000003BC   0100A0E3           MOV      R0,#+1
   \   000003C0   ........           BL       SetUserMode
    327          
    328          	switch (screenType)
   \                     ??MainTask_19:
   \   000003C4   01004AE2           SUB      R0,R10,#+1
   \   000003C8   240050E3           CMP      R0,#+36
   \   000003CC   00F18F90           ADDLS    PC,PC,R0, LSL #+2
   \                     ??MainTask_0:
   \   000003D0   5900008A           BHI      ??MainTask_21
   \   000003D4   240000EA           B        ??MainTask_20
   \   000003D8   590000EA           B        ??MainTask_22
   \   000003DC   580000EA           B        ??MainTask_22
   \   000003E0   570000EA           B        ??MainTask_22
   \   000003E4   1F0000EA           B        ??MainTask_23
   \   000003E8   1F0000EA           B        ??MainTask_20
   \   000003EC   1E0000EA           B        ??MainTask_20
   \   000003F0   220000EA           B        ??MainTask_24
   \   000003F4   1C0000EA           B        ??MainTask_20
   \   000003F8   1B0000EA           B        ??MainTask_20
   \   000003FC   220000EA           B        ??MainTask_25
   \   00000400   270000EA           B        ??MainTask_26
   \   00000404   180000EA           B        ??MainTask_20
   \   00000408   170000EA           B        ??MainTask_20
   \   0000040C   310000EA           B        ??MainTask_27
   \   00000410   2A0000EA           B        ??MainTask_28
   \   00000414   480000EA           B        ??MainTask_21
   \   00000418   2E0000EA           B        ??MainTask_27
   \   0000041C   460000EA           B        ??MainTask_21
   \   00000420   450000EA           B        ??MainTask_21
   \   00000424   210000EA           B        ??MainTask_29
   \   00000428   430000EA           B        ??MainTask_21
   \   0000042C   420000EA           B        ??MainTask_21
   \   00000430   410000EA           B        ??MainTask_21
   \   00000434   400000EA           B        ??MainTask_21
   \   00000438   3F0000EA           B        ??MainTask_21
   \   0000043C   2B0000EA           B        ??MainTask_30
   \   00000440   3D0000EA           B        ??MainTask_21
   \   00000444   3C0000EA           B        ??MainTask_21
   \   00000448   3B0000EA           B        ??MainTask_21
   \   0000044C   3A0000EA           B        ??MainTask_21
   \   00000450   290000EA           B        ??MainTask_31
   \   00000454   2E0000EA           B        ??MainTask_32
   \   00000458   2A0000EA           B        ??MainTask_33
   \   0000045C   2F0000EA           B        ??MainTask_34
   \   00000460   350000EA           B        ??MainTask_21
   \   00000464   300000EA           B        ??MainTask_35
    329          	{
    330          		case DRIVE_MODE_SCREEN_TYPE:
    331          		case INSTRUMENTS_MODE_SCREEN_TYPE:
    332          		case GAUGES_SCREEN_TYPE:
    333          			// Screen transition handled in StartupGoToRaceMode
    334          			break;
    335          
    336          		case RACE_SETUP_SCREENS_TYPE:
    337          			SetWorkingTrackName();
   \                     ??MainTask_23:
   \   00000468   ........           BL       SetWorkingTrackName
    338          			// fall through...
    339          		case CONFIG_SCREEN_TYPE:
    340          		case SYSTEM_SETTINGS_SCREENS_TYPE:
    341          		case VEHICLE_SETTINGS_SCREENS_TYPE:
    342          		case TACH_SETUP_SCREENS_TYPE:
    343          		case INPUTS_SCREENS_TYPE:
    344          		case TRACK_SETTINGS_SCREENS_TYPE:
    345          		case GEARING_SCREENS_TYPE:
    346          		//case SFSCREENS_TYPE:
    347          			DisplayNewScreenList(screenType, screen, (WM_HWIN)NULL);
   \                     ??MainTask_20:
   \   0000046C   0020A0E3           MOV      R2,#+0
   \   00000470   0910A0E1           MOV      R1,R9
   \   00000474   0A00A0E1           MOV      R0,R10
   \                     ??MainTask_36:
   \   00000478   ........           BL       DisplayNewScreenList
    348          			break;
   \   0000047C   300000EA           B        ??MainTask_22
    349          
    350          		case VEHICLE_SETTING_SCREEN_TYPE:
    351          			Display_VehicleSettingMainScreen((WM_HWIN)NULL);
   \                     ??MainTask_24:
   \   00000480   0000A0E3           MOV      R0,#+0
   \   00000484   ........           BL       Display_VehicleSettingMainScreen
    352          			break;
   \   00000488   2D0000EA           B        ??MainTask_22
    353          
    354          		case REVIEW_SESSIONS_SCREENS_TYPE:
    355          			if (sysData.navigatedToReviewAfterRace == true)		// See if we navigated by race exit to the review screen
   \                     ??MainTask_25:
   \   0000048C   ........           LDR      R0,??DataTable95
   \   00000490   E400D0E5           LDRB     R0,[R0, #+228]
   \   00000494   010050E3           CMP      R0,#+1
   \   00000498   2700000A           BEQ      ??MainTask_21
    356          				Display_GeneralConfig((WM_HWIN)NULL);			// If so just go to main menu
    357          			else DisplaySessionDetailsScreen();					// otherwise go ahead to review screen
   \   0000049C   ........           BL       DisplaySessionDetailsScreen
   \   000004A0   270000EA           B        ??MainTask_22
    358          			break;
    359          
    360          		case TRACK_SETTING_SCREEN_TYPE:
    361          			Display_TrackSettingMainScreen((WM_HWIN)NULL);
   \                     ??MainTask_26:
   \   000004A4   0000A0E3           MOV      R0,#+0
   \   000004A8   ........           BL       Display_TrackSettingMainScreen
    362          			break;
   \   000004AC   240000EA           B        ??MainTask_22
    363          
    364          		case SFSCREENS_TYPE:
    365          			DisplaySFKeyboard(screen, (WM_HWIN)NULL);
   \                     ??MainTask_29:
   \   000004B0   0010A0E3           MOV      R1,#+0
   \   000004B4   0900A0E1           MOV      R0,R9
   \   000004B8   ........           BL       DisplaySFKeyboard
    366          			break;
   \   000004BC   200000EA           B        ??MainTask_22
    367          
    368          			// Do not support returning directly to last selected digital or analog settings screen type.
    369          			// Global data is set up in INPUTS_SCREENS_TYPE that is required but is not saved at power down.
    370          		case DIGITAL_SETTINGS_SCREEN_TYPE:
    371          			DisplayNewScreenList(INPUTS_SCREENS_TYPE, GetLastScreen(INPUTS_SCREENS_TYPE), (WM_HWIN)NULL);
   \                     ??MainTask_28:
   \   000004C0   0A00A0E3           MOV      R0,#+10
   \   000004C4   ........           BL       GetLastScreen
   \   000004C8   0010A0E1           MOV      R1,R0
   \   000004CC   0020A0E3           MOV      R2,#+0
   \   000004D0   0A00A0E3           MOV      R0,#+10
   \   000004D4   E7FFFFEA           B        ??MainTask_36
    372          			break;
    373          
    374          		case ANALOG_SETTINGS_SCREEN_TYPE:
    375          		case ANALOG_INPUTS_SCALE:
    376          			DisplayNewScreenList(INPUTS_SCREENS_TYPE, GetLastScreen(INPUTS_SCREENS_TYPE), (WM_HWIN)NULL);
   \                     ??MainTask_27:
   \   000004D8   0A00A0E3           MOV      R0,#+10
   \   000004DC   ........           BL       GetLastScreen
   \   000004E0   0010A0E1           MOV      R1,R0
   \   000004E4   0020A0E3           MOV      R2,#+0
   \   000004E8   0A00A0E3           MOV      R0,#+10
   \   000004EC   E1FFFFEA           B        ??MainTask_36
    377          			break;
    378          
    379          		case PERSONALIZE_REVIEW_SCREEN_TYPE:
    380          			DisplayPersonalizationScreen((WM_HWIN)NULL);
   \                     ??MainTask_30:
   \   000004F0   0000A0E3           MOV      R0,#+0
   \   000004F4   ........           BL       DisplayPersonalizationScreen
    381          			break;
   \   000004F8   110000EA           B        ??MainTask_22
    382          
    383          		case AERO_GRIP_SCREEN_TYPE:
    384          			CreateAeroGripScreen((WM_HWIN)NULL);
   \                     ??MainTask_31:
   \   000004FC   0000A0E3           MOV      R0,#+0
   \   00000500   ........           BL       CreateAeroGripScreen
    385          			break;
   \   00000504   0E0000EA           B        ??MainTask_22
    386          
    387          		case CAMERA_DELAY_SCREEN_TYPE:
    388          			CreateCameraDelay((WM_HWIN)NULL);
   \                     ??MainTask_33:
   \   00000508   0000A0E3           MOV      R0,#+0
   \   0000050C   ........           BL       CreateCameraDelay
    389          			break;
   \   00000510   0B0000EA           B        ??MainTask_22
    390          
    391          		case CAMERA_SELECTION_SCREEN_TYPE:
    392          			CreateCameraSelection((WM_HWIN)NULL);
   \                     ??MainTask_32:
   \   00000514   0000A0E3           MOV      R0,#+0
   \   00000518   ........           BL       CreateCameraSelection
    393          			break;
   \   0000051C   080000EA           B        ??MainTask_22
    394          
    395          		case TRAQDASH_CAMERA_SCREEN:
    396          			CreateTraqdashCamScreen((WM_HWIN)NULL);
   \                     ??MainTask_34:
   \   00000520   0000A0E3           MOV      R0,#+0
   \   00000524   ........           BL       CreateTraqdashCamScreen
    397          			break;
   \   00000528   050000EA           B        ??MainTask_22
    398          
    399          		case RECORD_SPEED_SCREEN_TYPE:
    400          			DisplayNewScreenList(SYSTEM_SETTINGS_SCREENS_TYPE, RECORD_SPEED, (WM_HWIN)NULL);
   \                     ??MainTask_35:
   \   0000052C   0020A0E3           MOV      R2,#+0
   \   00000530   0610A0E3           MOV      R1,#+6
   \   00000534   0600A0E3           MOV      R0,#+6
   \   00000538   CEFFFFEA           B        ??MainTask_36
    401          			break;
    402          
    403          		default:
    404          			Display_GeneralConfig((WM_HWIN)NULL);
   \                     ??MainTask_21:
   \   0000053C   0000A0E3           MOV      R0,#+0
   \   00000540   ........           BL       Display_GeneralConfig
    405          			break;
    406          	}
    407          	
    408          	SetGear(GEAR_RESET);	// initialize gear tables
   \                     ??MainTask_22:
   \   00000544   0000A0E3           MOV      R0,#+0
   \   00000548   ........           BL       SetGear
    409          	
    410          #ifndef _WINDOWS
    411          	// check for demo mode
    412          	if (demoMode) {
   \   0000054C   040098E5           LDR      R0,[R8, #+4]
   \   00000550   000050E3           CMP      R0,#+0
   \   00000554   1300000A           BEQ      ??MainTask_37
    413          		if (OS_IsTask(&commTCB))
   \   00000558   ........           LDR      R9,??DataTable96
   \   0000055C   0900A0E1           MOV      R0,R9
   \   00000560   ........           BL       OS_IsTask
   \   00000564   000050E3           CMP      R0,#+0
   \   00000568   0100000A           BEQ      ??MainTask_38
    414          			OS_Terminate(&commTCB);		// kill comm task
   \   0000056C   0900A0E1           MOV      R0,R9
   \   00000570   ........           BL       OS_Terminate
    415          						
    416          		OS_CREATETASK(&commTCB, "CommSimulatorTask", CommSimulatorTask, 120, commStack);
   \                     ??MainTask_38:
   \   00000574   0200A0E3           MOV      R0,#+2
   \   00000578   08008DE5           STR      R0,[SP, #+8]
   \   0000057C   400DA0E3           MOV      R0,#+4096
   \   00000580   04008DE5           STR      R0,[SP, #+4]
   \   00000584   ........           LDR      R0,??DataTable96_1
   \   00000588   ........           LDR      R3,??DataTable96_2
   \   0000058C   00008DE5           STR      R0,[SP, #+0]
   \   00000590   7820A0E3           MOV      R2,#+120
   \   00000594   ............       ADRL     R1,`?<Constant "CommSimulatorTask">`
   \              ....        
   \   0000059C   0900A0E1           MOV      R0,R9
   \   000005A0   ........           BL       OS_CreateTask_DP
   \   000005A4   010000EA           B        ??MainTask_39
    417          	} // if
    418          	else
    419          		OS_Delay(500);					// give comm a chance to find mr. su
   \                     ??MainTask_37:
   \   000005A8   7D0FA0E3           MOV      R0,#+500
   \   000005AC   ........           BL       OS_Delay
   \                     ??MainTask_39:
   \   000005B0   ........           LDR      R0,??DataTable95
   \   000005B4   DC0090E5           LDR      R0,[R0, #+220]
   \   000005B8   000050E3           CMP      R0,#+0
   \   000005BC   0900001A           BNE      ??MainTask_40
    420          	
    421          	// check for initial calibration of LED temperature
    422          	if (0 == sysData.calibrationTempReading) {
    423          		sysData.calibrationTemperature = ROOM_TEMPERATURE;				// Default calibration temp assumed to be 24C = 75F, units always stored in metric
   \   000005C0   ........           LDR      R0,??DataTable95
   \   000005C4   1810A0E3           MOV      R1,#+24
   \   000005C8   D81080E5           STR      R1,[R0, #+216]
    424          		sysData.calibrationTempReading = GetADC(ADC_LED_BOARD_TEMP);	// Take current board reading and set temp correction offset
   \   000005CC   0500A0E3           MOV      R0,#+5
   \   000005D0   ........           BL       GetADC
   \   000005D4   ........           LDR      R1,??DataTable95
   \   000005D8   DC0081E5           STR      R0,[R1, #+220]
    425          		sysData.LEDtempOffset = CalculateTempCorrection();				// Calculate hardware correction factor
   \   000005DC   ........           BL       CalculateTempCorrection
   \   000005E0   ........           LDR      R1,??DataTable95
   \   000005E4   E00081E5           STR      R0,[R1, #+224]
    426          	} // if
    427          	
    428          	// Done with initialization - drop the priority of the main task to ensure file writes and comm tasks have the priority
    429          	OS_SetPriority(&mainTCB, 5);
   \                     ??MainTask_40:
   \   000005E8   0510A0E3           MOV      R1,#+5
   \   000005EC   ........           LDR      R0,??DataTable97
   \   000005F0   ........           BL       OS_SetPriority
   \   000005F4   ........           LDR      R9,??DataTable97_1
   \   000005F8   ........           LDR      R10,??DataTable93_1
   \   000005FC   4E0000EA           B        ??MainTask_41
    430          #endif
    431          		
    432          	// Main task loop
    433          	while(1)
    434          	{
    435          		static unsigned debounce = 0;	// used to count up button press debounce
    436          	
    437          		ProcessScreenMovement();
    438          	
    439          		GUI_Exec();
    440          		lockupSemaphore = false;			// returned back to main - clear lockup semaphore
    441          	
    442          #ifdef BUILD_DEBUG_PORT
    443          		if (glbErrorFlag)
    444          			DBGU_Print("Error detected!\n\r");
    445          #endif
    446          	
    447          #ifdef _WINDOWS
    448          		if (SIM_Tick())
    449          		{
    450          			PowerOffUnit((WM_HWIN)NULL, false, 0);
    451          			return;
    452          		}
    453          #else
    454          		// check ON/OFF button
    455          		if (!sysData.autoOn) {			// disable DU power switch if AutoOn is enabled
    456          			if (0 == (PIOD_PDSR & (1 << ONOFF_BUTTON))) {	// if switch pressed, count up
    457          	
    458          				// if switch first pressed, remember the time
    459          				if (0 == debounce)
    460          					debounce = OS_GetTime();
    461          				else {
    462          					// power off if switch was held more than ON/OFF period
    463          					if (OS_GetTime() > (debounce  + DEBOUNCE_ONOFF_MSEC)) {				// initiate shutdown sequence
   \                     ??MainTask_42:
   \   00000600   ........           LDR      R1,??DataTable97_2
   \   00000604   FA0F80E2           ADD      R0,R0,#+1000
   \   00000608   1C1091E5           LDR      R1,[R1, #+28]
   \   0000060C   010050E1           CMP      R0,R1
   \   00000610   2D00002A           BCS      ??MainTask_43
    464          						PowerOffUnit((WM_HWIN)NULL, false, 0);
   \   00000614   8800D4E5           LDRB     R0,[R4, #+136]
   \   00000618   010050E3           CMP      R0,#+1
   \   0000061C   0100000A           BEQ      ??MainTask_44
   \   00000620   0100A0E3           MOV      R0,#+1
   \   00000624   ........           BL       ExitRecord
   \                     ??MainTask_44:
   \   00000628   ........           BL       HideSprites
   \   0000062C   ........           LDR      R0,??DataTable94
   \   00000630   007080E5           STR      R7,[R0, #+0]
   \   00000634   0000A0E3           MOV      R0,#+0
   \   00000638   ........           BL       SetPopupDefaults
   \   0000063C   0A00A0E3           MOV      R0,#+10
   \   00000640   04008DE5           STR      R0,[SP, #+4]
   \   00000644   00008DE5           STR      R0,[SP, #+0]
   \   00000648   0030A0E3           MOV      R3,#+0
   \   0000064C   0920A0E1           MOV      R2,R9
   \   00000650   0210A0E3           MOV      R1,#+2
   \   00000654   ............       ADRL     R0,ShuttingDownResources
   \              ....        
   \   0000065C   ........           BL       GUI_CreateDialogBox
   \   00000660   00B0A0E1           MOV      R11,R0
   \   00000664   ........           BL       GUI_Exec
   \   00000668   1E00A0E3           MOV      R0,#+30
   \   0000066C   ........           BL       SetUserMode
   \   00000670   0000A0E3           MOV      R0,#+0
   \   00000674   ........           BL       WriteUserDataEvent
   \   00000678   0600A0E1           MOV      R0,R6
   \   0000067C   ........           BL       FS_Unmount
   \   00000680   0100A0E3           MOV      R0,#+1
   \   00000684   ........           BL       GUI_Delay
   \   00000688   0B00A0E1           MOV      R0,R11
   \   0000068C   ........           BL       WM_DeleteWindow
   \   00000690   0A00A0E3           MOV      R0,#+10
   \   00000694   04008DE5           STR      R0,[SP, #+4]
   \   00000698   00008DE5           STR      R0,[SP, #+0]
   \   0000069C   0030A0E3           MOV      R3,#+0
   \   000006A0   0920A0E1           MOV      R2,R9
   \   000006A4   0310A0E3           MOV      R1,#+3
   \   000006A8   ............       ADRL     R0,SafeToPowerOffUnit
   \              ....        
   \   000006B0   ........           BL       GUI_CreateDialogBox
   \   000006B4   ........           BL       GUI_Exec
   \   000006B8   6000A0E3           MOV      R0,#+96
   \   000006BC   EA0C80E3           ORR      R0,R0,#0xEA00
   \   000006C0   ........           BL       OS_Delay
    465          					} // if
    466          				} // else
   \   000006C4   000000EA           B        ??MainTask_43
    467          			} // if
    468          			else {
    469          				// if button not pressed, reset ONOFF counter
    470          				debounce = 0;
   \                     ??MainTask_45:
   \   000006C8   105088E5           STR      R5,[R8, #+16]
    471          			} // else
    472          		} // if
    473          		
    474          		// check status of SD card
    475          		if (FS_MCI_HW_IsCardPresent(0))
   \                     ??MainTask_43:
   \   000006CC   0000A0E3           MOV      R0,#+0
   \   000006D0   ........           BL       FS_MCI_HW_IsCardPresent
   \   000006D4   000050E3           CMP      R0,#+0
   \   000006D8   2A00000A           BEQ      ??MainTask_46
    476          		{
    477          			// SD card is present - see if it was previously not there
    478          			if (!localSDCardFlag)
   \   000006DC   1500D8E5           LDRB     R0,[R8, #+21]
   \   000006E0   000050E3           CMP      R0,#+0
   \   000006E4   1300001A           BNE      ??MainTask_47
    479          			{
    480          				// SD card just inserted
    481          				SDCardReinserted();					// See what we're going to do
   \   000006E8   ........           BL       HideSprites
   \   000006EC   0200A0E3           MOV      R0,#+2
   \   000006F0   ........           BL       SetPopupDefaults
   \   000006F4   ........           LDR      R0,??DataTable94
   \   000006F8   007080E5           STR      R7,[R0, #+0]
   \   000006FC   ........           BL       WM_GetDesktopWindow
   \   00000700   0030A0E1           MOV      R3,R0
   \   00000704   0A00A0E3           MOV      R0,#+10
   \   00000708   04008DE5           STR      R0,[SP, #+4]
   \   0000070C   00008DE5           STR      R0,[SP, #+0]
   \   00000710   0A20A0E1           MOV      R2,R10
   \   00000714   0310A0E3           MOV      R1,#+3
   \   00000718   ............       ADRL     R0,??SDCardReinsertedResources
   \              ....        
   \   00000720   ........           BL       GUI_ExecDialogBox
   \   00000724   010050E3           CMP      R0,#+1
   \   00000728   0000001A           BNE      ??MainTask_48
   \   0000072C   ........           BL       reset
   \                     ??MainTask_48:
   \   00000730   ........           BL       UnhideSprites
    482          				localSDCardFlag = true;
   \   00000734   1570C8E5           STRB     R7,[R8, #+21]
    483          			}
    484          			// else - otherwise card was already there - no change - keep on truckin'
    485          		}
    486          		else
    487          		{
    488          			localSDCardFlag = false;				// SD card now not present
    489          			// SD card not present - see if it was previously there
    490          			if (unsavedSysData.sdCardInserted)
    491          			{
    492          				ConfigureForNoSDCard();
    493          
    494          				// See what we're going to do
    495          				if (SDCardRemoved() == false)
    496          				{
    497          					SetUserMode(DU2_SHUTDOWN);	// Do not go through normal power off sequence as we cannot save data - tell comm and laptimer to stop recording and shut off power at SU
    498          					while (1)					// Stop here
    499          						GUI_Exec();				// Allow other tasks to communicate with the SU to pull the plug (note: we cannot save files as there is no SD card present)
    500          				}
    501          			}
    502          		}
    503          
    504          // *** TEST		OS_Delay(1);								// Allow other tasks a chance to run
    505          		OS_Yield();								// Allow other tasks a chance to run
   \                     ??MainTask_47:
   \   00000738   ........           BL       OS_Yield
   \                     ??MainTask_41:
   \   0000073C   ........           BL       ProcessScreenMovement
   \   00000740   ........           BL       GUI_Exec
   \   00000744   ........           LDR      R0,??DataTable95
   \   00000748   1450C8E5           STRB     R5,[R8, #+20]
   \   0000074C   7C00D0E5           LDRB     R0,[R0, #+124]
   \   00000750   000050E3           CMP      R0,#+0
   \   00000754   DCFFFF1A           BNE      ??MainTask_43
   \   00000758   C300E0E3           MVN      R0,#+195
   \   0000075C   500EC0E3           BIC      R0,R0,#0x500
   \   00000760   000090E5           LDR      R0,[R0, #+0]
   \   00000764   010010E3           TST      R0,#0x1
   \   00000768   D6FFFF1A           BNE      ??MainTask_45
   \   0000076C   100098E5           LDR      R0,[R8, #+16]
   \   00000770   000050E3           CMP      R0,#+0
   \   00000774   A1FFFF1A           BNE      ??MainTask_42
   \   00000778   ........           LDR      R0,??DataTable97_2
   \   0000077C   1C0090E5           LDR      R0,[R0, #+28]
   \   00000780   100088E5           STR      R0,[R8, #+16]
   \   00000784   D0FFFFEA           B        ??MainTask_43
   \                     ??MainTask_46:
   \   00000788   C00094E5           LDR      R0,[R4, #+192]
   \   0000078C   1550C8E5           STRB     R5,[R8, #+21]
   \   00000790   000050E3           CMP      R0,#+0
   \   00000794   E7FFFF0A           BEQ      ??MainTask_47
   \   00000798   C05084E5           STR      R5,[R4, #+192]
   \   0000079C   0600A0E1           MOV      R0,R6
   \   000007A0   ........           BL       FS_Unmount
   \   000007A4   8800D4E5           LDRB     R0,[R4, #+136]
   \   000007A8   030040E2           SUB      R0,R0,#+3
   \   000007AC   FF0000E2           AND      R0,R0,#0xFF
   \   000007B0   130050E3           CMP      R0,#+19
   \   000007B4   0100002A           BCS      ??MainTask_49
   \   000007B8   0400A0E3           MOV      R0,#+4
   \   000007BC   ........           BL       notifyTQM
   \                     ??MainTask_49:
   \   000007C0   0200A0E3           MOV      R0,#+2
   \   000007C4   8800C4E5           STRB     R0,[R4, #+136]
   \   000007C8   0100A0E3           MOV      R0,#+1
   \   000007CC   ........           BL       ResetAllFileLists
   \   000007D0   ........           BL       ClearNameStruct
   \   000007D4   ........           BL       HideSprites
   \   000007D8   0200A0E3           MOV      R0,#+2
   \   000007DC   ........           BL       SetPopupDefaults
   \   000007E0   ........           LDR      R0,??DataTable94
   \   000007E4   007080E5           STR      R7,[R0, #+0]
   \   000007E8   ........           BL       WM_GetDesktopWindow
   \   000007EC   0A10A0E3           MOV      R1,#+10
   \   000007F0   04108DE5           STR      R1,[SP, #+4]
   \   000007F4   00108DE5           STR      R1,[SP, #+0]
   \   000007F8   0030A0E1           MOV      R3,R0
   \   000007FC   0A20A0E1           MOV      R2,R10
   \   00000800   0510A0E3           MOV      R1,#+5
   \   00000804   ............       ADRL     R0,??SDCardRemovedResources
   \              ....        
   \   0000080C   ........           BL       GUI_ExecDialogBox
   \   00000810   010050E3           CMP      R0,#+1
   \   00000814   0100000A           BEQ      ??MainTask_50
   \   00000818   ........           BL       UnhideSprites
   \   0000081C   C5FFFFEA           B        ??MainTask_47
   \                     ??MainTask_50:
   \   00000820   ........           BL       UnhideSprites
   \   00000824   1E00A0E3           MOV      R0,#+30
   \   00000828   ........           BL       SetUserMode
   \                     ??MainTask_51:
   \   0000082C   ........           BL       GUI_Exec
   \   00000830   FDFFFFEA           B        ??MainTask_51
    506          #endif
    507          	}
    508          }

   \                                 In section .bss, align 4
   \                     testMode:
   \   00000000                      DS8 4
   \                     demoMode:
   \   00000004                      DS8 4
   \                     factMode:
   \   00000008                      DS8 4
   \                     splashScreenStartTime:
   \   0000000C                      DS8 4
   \   00000010                      DS8 4
   \                     lockupSemaphore:
   \   00000014                      DS8 1
   \   00000015                      DS8 1
   \   00000016                      DS8 1
    509          
    510          //
    511          // SD card was just removed - configure the system to run without it
    512          //

   \                                 In section .text, align 4, keep-with-next
    513          void ConfigureForNoSDCard(void)
    514          {
   \                     ConfigureForNoSDCard:
   \   00000000   10402DE9           PUSH     {R4,LR}
    515          	// SD card was just removed
    516          	unsavedSysData.sdCardInserted = 0;		// new status
   \   00000004   ........           LDR      R4,??DataTable91
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   C00084E5           STR      R0,[R4, #+192]
    517          
    518          #ifndef _WINDOWS
    519          	// Unmount all drives (flushes cache)
    520          	FS_Unmount("");			// gas commented out. in my tests unmounting a volume that is ejected causes unpredictable results
   \   00000010   ........           ADR      R0,??DataTable86  ;; ""
   \   00000014   ........           BL       FS_Unmount
    521          
    522          	if (DU2_RECORDING(unsavedSysData.systemMode))
   \   00000018   8800D4E5           LDRB     R0,[R4, #+136]
   \   0000001C   030040E2           SUB      R0,R0,#+3
   \   00000020   FF0000E2           AND      R0,R0,#0xFF
   \   00000024   130050E3           CMP      R0,#+19
   \   00000028   0100002A           BCS      ??ConfigureForNoSDCard_0
    523          		notifyTQM(DU2_SDCARD_EJECT);
   \   0000002C   0400A0E3           MOV      R0,#+4
   \   00000030   ........           BL       notifyTQM
    524          #endif
    525          
    526          	unsavedSysData.systemMode = DU2_NOSDCARD;
   \                     ??ConfigureForNoSDCard_0:
   \   00000034   0200A0E3           MOV      R0,#+2
   \   00000038   8800C4E5           STRB     R0,[R4, #+136]
    527          	
    528          	// Reset all lists and tables
    529          	ResetAllFileLists(true);
   \   0000003C   0100A0E3           MOV      R0,#+1
   \   00000040   ........           BL       ResetAllFileLists
    530          
    531          	ClearNameStruct();					// Erase session notes line (used on Race Review screen)
   \   00000044   1040BDE8           POP      {R4,LR}
   \   00000048   ........           B        ClearNameStruct  ;; tailcall
    532          }
    533          
    534          #ifndef _WINDOWS
    535          //
    536          // SD card not inserted at powerup.
    537          // Display a modal dialog box to ask user to insert an SD card and retry
    538          //
    539          // Returns	YES - retry
    540          //			NO - just go on
    541          //

   \                                 In section .text, align 4, keep-with-next
    542          int RetrySDCard(void)
    543          {
   \                     RetrySDCard:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   08D04DE2           SUB      SP,SP,#+8
    544          static const GUI_WIDGET_CREATE_INFO NoSDCardResources[] = {
    545          	{ FRAMEWIN_CreateIndirect, "SD CARD NOT READY!", 0, 50, 20, 360, 220, 0, 0 },
    546          	{ TEXT_CreateIndirect, "No SD card or write protected", 0, 0, 30, 360, 30, TEXT_CF_HCENTER },
    547          	{ TEXT_CreateIndirect, "Insert SD card now or power down", 0, 0, 70, 360, 30, TEXT_CF_HCENTER },
    548          	{ BUTTON_CreateIndirect, "RETRY",		GUI_ID_OK,		20, 115, 100, 60 },
    549          	{ BUTTON_CreateIndirect, "POWER DOWN", GUI_ID_CANCEL, 160, 115, 180, 60 }
    550          };
    551          
    552          	SetPopupDefaults(ERROR_POPUP);
   \   00000008   0200A0E3           MOV      R0,#+2
   \   0000000C   ........           BL       SetPopupDefaults
    553          
    554          	glbBlackoutFlag = true;			// Suspend gauge screen updates while the modal popup dialog box is diaplyed
   \   00000010   ........           LDR      R5,??DataTable94
   \   00000014   0160A0E3           MOV      R6,#+1
   \   00000018   006085E5           STR      R6,[R5, #+0]
    555          
    556          	if (GUI_ExecDialogBox(NoSDCardResources, GUI_COUNTOF(NoSDCardResources), &popupCallback, WM_GetDesktopWindow(), 10, 10) == GUI_ID_OK)
   \   0000001C   ........           BL       WM_GetDesktopWindow
   \   00000020   0A10A0E3           MOV      R1,#+10
   \   00000024   04108DE5           STR      R1,[SP, #+4]
   \   00000028   00108DE5           STR      R1,[SP, #+0]
   \   0000002C   0030A0E1           MOV      R3,R0
   \   00000030   ........           LDR      R2,??DataTable93_1
   \   00000034   0510A0E3           MOV      R1,#+5
   \   00000038   ............       ADRL     R0,??NoSDCardResources
   \              ....        
   \   00000040   ........           BL       GUI_ExecDialogBox
   \   00000044   010050E3           CMP      R0,#+1
   \   00000048   2F00000A           BEQ      ??RetrySDCard_0
    557          		return true;
    558          	else
    559          	{
    560          		PowerOffUnit(WM_GetDesktopWindow(), false, 1000);				// Pause for 1 second to allow time for the SU to process the new camera setting
   \   0000004C   ........           BL       WM_GetDesktopWindow
   \   00000050   0040A0E1           MOV      R4,R0
   \   00000054   ........           LDR      R0,??DataTable91
   \   00000058   8800D0E5           LDRB     R0,[R0, #+136]
   \   0000005C   010050E3           CMP      R0,#+1
   \   00000060   0100000A           BEQ      ??RetrySDCard_1
   \   00000064   0100A0E3           MOV      R0,#+1
   \   00000068   ........           BL       ExitRecord
   \                     ??RetrySDCard_1:
   \   0000006C   ........           BL       HideSprites
   \   00000070   006085E5           STR      R6,[R5, #+0]
   \   00000074   0000A0E3           MOV      R0,#+0
   \   00000078   ........           BL       SetPopupDefaults
   \   0000007C   ........           LDR      R5,??DataTable97_1
   \   00000080   0A00A0E3           MOV      R0,#+10
   \   00000084   04008DE5           STR      R0,[SP, #+4]
   \   00000088   00008DE5           STR      R0,[SP, #+0]
   \   0000008C   0430A0E1           MOV      R3,R4
   \   00000090   0520A0E1           MOV      R2,R5
   \   00000094   0210A0E3           MOV      R1,#+2
   \   00000098   ............       ADRL     R0,ShuttingDownResources
   \              ....        
   \   000000A0   ........           BL       GUI_CreateDialogBox
   \   000000A4   0060A0E1           MOV      R6,R0
   \   000000A8   ........           BL       GUI_Exec
   \   000000AC   1E00A0E3           MOV      R0,#+30
   \   000000B0   ........           BL       SetUserMode
   \   000000B4   0000A0E3           MOV      R0,#+0
   \   000000B8   ........           BL       WriteUserDataEvent
   \   000000BC   ........           ADR      R0,??DataTable86  ;; ""
   \   000000C0   ........           BL       FS_Unmount
   \   000000C4   FA0FA0E3           MOV      R0,#+1000
   \   000000C8   ........           BL       GUI_Delay
   \   000000CC   0600A0E1           MOV      R0,R6
   \   000000D0   ........           BL       WM_DeleteWindow
   \   000000D4   0A00A0E3           MOV      R0,#+10
   \   000000D8   04008DE5           STR      R0,[SP, #+4]
   \   000000DC   00008DE5           STR      R0,[SP, #+0]
   \   000000E0   0430A0E1           MOV      R3,R4
   \   000000E4   0520A0E1           MOV      R2,R5
   \   000000E8   0310A0E3           MOV      R1,#+3
   \   000000EC   ............       ADRL     R0,SafeToPowerOffUnit
   \              ....        
   \   000000F4   ........           BL       GUI_CreateDialogBox
   \   000000F8   ........           BL       GUI_Exec
   \   000000FC   6000A0E3           MOV      R0,#+96
   \   00000100   EA0C80E3           ORR      R0,R0,#0xEA00
   \   00000104   ........           BL       OS_Delay
    561          		return false;
   \   00000108   0000A0E3           MOV      R0,#+0
   \                     ??RetrySDCard_0:
   \   0000010C   08D08DE2           ADD      SP,SP,#+8        ;; stack cleaning
   \   00000110   7080BDE8           POP      {R4-R6,PC}       ;; return
    562          	}
    563          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??NoSDCardResources:
   \   00000000                      ; Initializer data, 120 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "SD CARD NOT READY!">`
   \              ....        
   \   00000008   000032001400       DC16 0, 50, 20, 360, 220, 0
   \              6801DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "No SD card or write p...">`
   \              ............
   \   00000020   000000001E00       DC16 0, 0, 30, 360, 30, 2
   \              68011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 TEXT_CreateIndirect, `?<Constant "Insert SD card now or...">`
   \              ....        
   \   00000038   000000004600       DC16 0, 0, 70, 360, 30, 2
   \              68011E000200
   \   00000044   00000000           DC8 0, 0, 0, 0
   \   00000048   ............       DC32 BUTTON_CreateIndirect, `?<Constant "RETRY">`
   \              ....        
   \   00000050   010014007300       DC16 1, 20, 115, 100, 60
   \              64003C00    
   \   0000005A   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000060   ............       DC32 BUTTON_CreateIndirect, `?<Constant "POWER DOWN">`
   \              ....        
   \   00000068   0200A0007300       DC16 2, 160, 115, 180, 60
   \              B4003C00    
   \   00000072   000000000000       DC8 0, 0, 0, 0, 0, 0
    564          #endif
    565          
    566          //#define BUTTON_SKINFLEX_PI_PRESSED     0
    567          //#define BUTTON_SKINFLEX_PI_FOCUSSED    1
    568          //#define BUTTON_SKINFLEX_PI_ENABLED     2
    569          //#define BUTTON_SKINFLEX_PI_DISABLED    3
    570          
    571          //
    572          // Perform standard initialization for error message popups
    573          //

   \                                 In section .text, align 4, keep-with-next
    574          void SetPopupDefaults(enum POPUP_TYPES type)
    575          {
   \                     SetPopupDefaults:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   30D04DE2           SUB      SP,SP,#+48
    576          	FRAMEWIN_SKINFLEX_PROPS Props;
    577          	//BUTTON_SKINFLEX_PROPS ButtonProps;
    578          
    579          	switch (type)
   \   00000008   030050E3           CMP      R0,#+3
   \   0000000C   00F18F90           ADDLS    PC,PC,R0, LSL #+2
   \                     ??SetPopupDefaults_0:
   \   00000010   3F00008A           BHI      ??SetPopupDefaults_1
   \   00000014   020000EA           B        ??SetPopupDefaults_2
   \   00000018   0D0000EA           B        ??SetPopupDefaults_3
   \   0000001C   200000EA           B        ??SetPopupDefaults_4
   \   00000020   270000EA           B        ??SetPopupDefaults_5
    580          	{
    581          	case INFORMATIONAL_POPUP:
    582          		FRAMEWIN_GetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \                     ??SetPopupDefaults_2:
   \   00000024   0010A0E3           MOV      R1,#+0
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   ........           BL       FRAMEWIN_GetSkinFlexProps
    583          		Props.aColorFrame[0] = 0x000000;
   \   00000030   0010A0E3           MOV      R1,#+0
   \   00000034   00108DE5           STR      R1,[SP, #+0]
    584          		Props.aColorFrame[1] = 0xffd070;
   \   00000038   ........           LDR      R0,??DataTable98_2  ;; 0xffd070
    585          		Props.aColorFrame[2] = 0xaf0000;
   \   0000003C   AF18A0E3           MOV      R1,#+11468800
   \   00000040   04008DE5           STR      R0,[SP, #+4]
   \   00000044   08108DE5           STR      R1,[SP, #+8]
    586          		Props.aColorTitle[0] = 0xaf0000;
   \   00000048   0C108DE5           STR      R1,[SP, #+12]
    587          		Props.aColorTitle[1] = 0xffd070;
   \   0000004C   10008DE5           STR      R0,[SP, #+16]
    588          		Props.Radius = 7;
   \   00000050   270000EA           B        ??SetPopupDefaults_6
    589          		FRAMEWIN_SetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
    590          		popupTitleTextColor = GUI_WHITE;
    591          		break;
    592          
    593          	case WARNING_POPUP:
    594          		FRAMEWIN_GetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \                     ??SetPopupDefaults_3:
   \   00000054   0010A0E3           MOV      R1,#+0
   \   00000058   0D00A0E1           MOV      R0,SP
   \   0000005C   ........           BL       FRAMEWIN_GetSkinFlexProps
    595          		Props.aColorFrame[0] = 0x000000;
    596          		Props.aColorFrame[1] = 0x0096ff;
   \   00000060   FF00A0E3           MOV      R0,#+255
   \   00000064   960C80E3           ORR      R0,R0,#0x9600
    597          		Props.aColorFrame[2] = 0x00ffff;
   \   00000068   691C80E3           ORR      R1,R0,#0x6900
   \   0000006C   08108DE5           STR      R1,[SP, #+8]
    598          		Props.aColorTitle[0] = 0x0096ff;
    599          		Props.aColorTitle[1] = 0x00ffff;
   \   00000070   10108DE5           STR      R1,[SP, #+16]
    600          		Props.Radius = 7;
   \   00000074   0710A0E3           MOV      R1,#+7
   \   00000078   0040A0E3           MOV      R4,#+0
   \   0000007C   04008DE5           STR      R0,[SP, #+4]
   \   00000080   0C008DE5           STR      R0,[SP, #+12]
   \   00000084   14108DE5           STR      R1,[SP, #+20]
   \   00000088   00408DE5           STR      R4,[SP, #+0]
    601          		FRAMEWIN_SetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \   0000008C   0010A0E3           MOV      R1,#+0
   \   00000090   0D00A0E1           MOV      R0,SP
   \   00000094   ........           BL       FRAMEWIN_SetSkinFlexProps
    602          		popupTitleTextColor = GUI_BLACK;
   \   00000098   ........           LDR      R0,??DataTable98_3
   \   0000009C   004080E5           STR      R4,[R0, #+0]
    603          		break;
   \   000000A0   1B0000EA           B        ??SetPopupDefaults_1
    604          
    605          	case ERROR_POPUP:
    606          		FRAMEWIN_GetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \                     ??SetPopupDefaults_4:
   \   000000A4   0010A0E3           MOV      R1,#+0
   \   000000A8   0D00A0E1           MOV      R0,SP
   \   000000AC   ........           BL       FRAMEWIN_GetSkinFlexProps
    607          		Props.aColorFrame[0] = 0x000000;
   \   000000B0   0010A0E3           MOV      R1,#+0
   \   000000B4   00108DE5           STR      R1,[SP, #+0]
    608          		Props.aColorFrame[1] = 0x0303b1;
   \   000000B8   ........           LDR      R0,??DataTable98_4  ;; 0x303b1
    609          		Props.aColorFrame[2] = 0x0000ff;
   \   000000BC   FF10A0E3           MOV      R1,#+255
   \   000000C0   070000EA           B        ??SetPopupDefaults_7
    610          		Props.aColorTitle[0] = 0x0303b1;
    611          		Props.aColorTitle[1] = 0x0000ff;
    612          		Props.Radius = 7;
    613          		FRAMEWIN_SetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
    614          		popupTitleTextColor = GUI_WHITE;
    615          		break;
    616          
    617          	case PROGRAMMING_POPUP:
    618          		FRAMEWIN_GetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \                     ??SetPopupDefaults_5:
   \   000000C4   0010A0E3           MOV      R1,#+0
   \   000000C8   0D00A0E1           MOV      R0,SP
   \   000000CC   ........           BL       FRAMEWIN_GetSkinFlexProps
    619          		Props.aColorFrame[0] = 0x000000;
   \   000000D0   0010A0E3           MOV      R1,#+0
   \   000000D4   00108DE5           STR      R1,[SP, #+0]
    620          		Props.aColorFrame[1] = 0x22a508;
   \   000000D8   ........           LDR      R0,??DataTable98_5  ;; 0x22a508
    621          		Props.aColorFrame[2] = 0x2aff00;
   \   000000DC   A819A0E3           MOV      R1,#+2752512
   \   000000E0   FF1C81E3           ORR      R1,R1,#0xFF00
   \                     ??SetPopupDefaults_7:
   \   000000E4   04008DE5           STR      R0,[SP, #+4]
   \   000000E8   08108DE5           STR      R1,[SP, #+8]
    622          		Props.aColorTitle[0] = 0x22a508;
   \   000000EC   0C008DE5           STR      R0,[SP, #+12]
    623          		Props.aColorTitle[1] = 0x2aff00;
   \   000000F0   10108DE5           STR      R1,[SP, #+16]
    624          		Props.Radius = 7;
   \                     ??SetPopupDefaults_6:
   \   000000F4   0710A0E3           MOV      R1,#+7
   \   000000F8   14108DE5           STR      R1,[SP, #+20]
    625          		FRAMEWIN_SetSkinFlexProps(&Props, FRAMEWIN_SKINFLEX_PI_ACTIVE);
   \   000000FC   0010A0E3           MOV      R1,#+0
   \   00000100   0D00A0E1           MOV      R0,SP
   \   00000104   ........           BL       FRAMEWIN_SetSkinFlexProps
    626          		popupTitleTextColor = GUI_WHITE;
   \   00000108   ........           LDR      R0,??DataTable98_3
   \   0000010C   FF14E0E3           MVN      R1,#-16777216
   \   00000110   001080E5           STR      R1,[R0, #+0]
    627          		break;
    628          	}
    629          
    630          	FRAMEWIN_SetDefaultFont(&GUI_Font24_ASCII);
   \                     ??SetPopupDefaults_1:
   \   00000114   ........           LDR      R4,??DataTable98_6
   \   00000118   0400A0E1           MOV      R0,R4
   \   0000011C   ........           BL       FRAMEWIN_SetDefaultFont
    631          	TEXT_SetDefaultFont(&GUI_Font24_ASCII);
   \   00000120   0400A0E1           MOV      R0,R4
   \   00000124   ........           BL       TEXT_SetDefaultFont
    632          	BUTTON_SetDefaultFont(&GUI_Font24_ASCII);
   \   00000128   0400A0E1           MOV      R0,R4
   \   0000012C   ........           BL       BUTTON_SetDefaultFont
    633          	BUTTON_SetDefaultTextColor(GUI_BLACK, BUTTON_BI_UNPRESSED);
   \   00000130   0010A0E3           MOV      R1,#+0
   \   00000134   0000A0E3           MOV      R0,#+0
   \   00000138   ........           BL       BUTTON_SetDefaultTextColor
    634          	BUTTON_SetDefaultTextColor(GUI_BLACK, BUTTON_BI_PRESSED);
   \   0000013C   0110A0E3           MOV      R1,#+1
   \   00000140   0000A0E3           MOV      R0,#+0
   \   00000144   ........           BL       BUTTON_SetDefaultTextColor
    635          }
   \   00000148   30D08DE2           ADD      SP,SP,#+48       ;; stack cleaning
   \   0000014C   1080BDE8           POP      {R4,PC}          ;; return
    636          
    637          //
    638          // SD card removed while running.
    639          // Display a modal dialog box to ask user if he wants to power off the unit or run without the SD card
    640          //
    641          // Returns	true - continue operating without the SD card
    642          //			false - we're powering off, sequence already begun - do nothing and wait to die
    643          //

   \                                 In section .text, align 4, keep-with-next
    644          int SDCardRemoved(void)
    645          {
   \                     SDCardRemoved:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
    646          
    647          static const GUI_WIDGET_CREATE_INFO SDCardRemovedResources[] = {
    648          	{ FRAMEWIN_CreateIndirect, "SD CARD REMOVED!", 0, 20, 20, 400, 220, 0, 0 },
    649          	{ TEXT_CreateIndirect, "Cannot record further data without card", 0, 0, 30, 400, 30, TEXT_CF_HCENTER },
    650          	{ TEXT_CreateIndirect, "What would you like to do?", 0, 0, 70, 400, 30, TEXT_CF_HCENTER },
    651          	{ BUTTON_CreateIndirect, "POWER OFF", GUI_ID_OK, 20, 115, 150, 60 },
    652          	{ BUTTON_CreateIndirect, "RUN WITHOUT", GUI_ID_CANCEL, 190, 115, 180, 60 }
    653          };
    654          
    655          	HideSprites();
   \   00000008   ........           BL       HideSprites
    656          	
    657          	SetPopupDefaults(ERROR_POPUP);
   \   0000000C   0200A0E3           MOV      R0,#+2
   \   00000010   ........           BL       SetPopupDefaults
    658          
    659          	glbBlackoutFlag = true;			// Suspend gauge screen updates while the modal popup dialog box is diaplyed
   \   00000014   ........           LDR      R0,??DataTable94
   \   00000018   0110A0E3           MOV      R1,#+1
   \   0000001C   001080E5           STR      R1,[R0, #+0]
    660          
    661          	if (GUI_ExecDialogBox(SDCardRemovedResources, GUI_COUNTOF(SDCardRemovedResources), &popupCallback, WM_GetDesktopWindow(), 10, 10) == GUI_ID_OK)
   \   00000020   ........           BL       WM_GetDesktopWindow
   \   00000024   0A10A0E3           MOV      R1,#+10
   \   00000028   04108DE5           STR      R1,[SP, #+4]
   \   0000002C   00108DE5           STR      R1,[SP, #+0]
   \   00000030   0030A0E1           MOV      R3,R0
   \   00000034   ........           LDR      R2,??DataTable93_1
   \   00000038   0510A0E3           MOV      R1,#+5
   \   0000003C   ............       ADRL     R0,??SDCardRemovedResources
   \              ....        
   \   00000044   ........           BL       GUI_ExecDialogBox
   \   00000048   010050E3           CMP      R0,#+1
   \   0000004C   0200001A           BNE      ??SDCardRemoved_0
    662          	{
    663          		UnhideSprites();
   \   00000050   ........           BL       UnhideSprites
    664          		return false;
   \   00000054   0000A0E3           MOV      R0,#+0
   \   00000058   010000EA           B        ??SDCardRemoved_1
    665          	}
    666          	else
    667          	{
    668          		UnhideSprites();
   \                     ??SDCardRemoved_0:
   \   0000005C   ........           BL       UnhideSprites
    669          		return true;
   \   00000060   0100A0E3           MOV      R0,#+1
   \                     ??SDCardRemoved_1:
   \   00000064   0CD08DE2           ADD      SP,SP,#+12       ;; stack cleaning
   \   00000068   0080BDE8           POP      {PC}             ;; return
    670          	}
    671          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??SDCardRemovedResources:
   \   00000000                      ; Initializer data, 120 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "SD CARD REMOVED!">`
   \              ....        
   \   00000008   000014001400       DC16 0, 20, 20, 400, 220, 0
   \              9001DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "Cannot record further...">`
   \              ............
   \   00000020   000000001E00       DC16 0, 0, 30, 400, 30, 2
   \              90011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 TEXT_CreateIndirect, `?<Constant "What would you like t...">`
   \              ....        
   \   00000038   000000004600       DC16 0, 0, 70, 400, 30, 2
   \              90011E000200
   \   00000044   00000000           DC8 0, 0, 0, 0
   \   00000048   ............       DC32 BUTTON_CreateIndirect, `?<Constant "POWER OFF">`
   \              ....        
   \   00000050   010014007300       DC16 1, 20, 115, 150, 60
   \              96003C00    
   \   0000005A   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000060   ............       DC32 BUTTON_CreateIndirect, `?<Constant "RUN WITHOUT">`
   \              ....        
   \   00000068   0200BE007300       DC16 2, 190, 115, 180, 60
   \              B4003C00    
   \   00000072   000000000000       DC8 0, 0, 0, 0, 0, 0
    672          
    673          //
    674          // SD card inserted while running without the SD card
    675          // Display a modal dialog box to ask user if he wants to reset the unit so he can use this card
    676          // or ignore the card and continue to run without it
    677          //
    678          // Returns	true - continue operating without the SD card
    679          //			false - we're resetting, sequence already begun - do nothing and wait to die
    680          //

   \                                 In section .text, align 4, keep-with-next
    681          int SDCardReinserted(void)
    682          {
   \                     SDCardReinserted:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
    683          
    684          static const GUI_WIDGET_CREATE_INFO SDCardReinsertedResources[] = {
    685          	{ FRAMEWIN_CreateIndirect, "SD CARD INSERTED!", 0, 20, 20, 420, 220, 0, 0 },
    686          	{ TEXT_CreateIndirect, "Must reset unit to start using this card", 0, 0, 50, 420, 30, TEXT_CF_HCENTER },
    687          	{ BUTTON_CreateIndirect, "RESET UNIT", GUI_ID_OK, 120, 115, 140, 60 },
    688          };
    689          
    690          	HideSprites();
   \   00000008   ........           BL       HideSprites
    691          	
    692          	SetPopupDefaults(ERROR_POPUP);
   \   0000000C   0200A0E3           MOV      R0,#+2
   \   00000010   ........           BL       SetPopupDefaults
    693          
    694          	glbBlackoutFlag = true;			// Suspend gauge screen updates while the modal popup dialog box is diaplyed
   \   00000014   ........           LDR      R0,??DataTable94
   \   00000018   0110A0E3           MOV      R1,#+1
   \   0000001C   001080E5           STR      R1,[R0, #+0]
    695          
    696          	if (GUI_ExecDialogBox(SDCardReinsertedResources, GUI_COUNTOF(SDCardReinsertedResources), &popupCallback, WM_GetDesktopWindow(), 10, 10) == GUI_ID_OK)
   \   00000020   ........           BL       WM_GetDesktopWindow
   \   00000024   0A10A0E3           MOV      R1,#+10
   \   00000028   04108DE5           STR      R1,[SP, #+4]
   \   0000002C   00108DE5           STR      R1,[SP, #+0]
   \   00000030   0030A0E1           MOV      R3,R0
   \   00000034   ........           LDR      R2,??DataTable93_1
   \   00000038   0310A0E3           MOV      R1,#+3
   \   0000003C   ............       ADRL     R0,??SDCardReinsertedResources
   \              ....        
   \   00000044   ........           BL       GUI_ExecDialogBox
   \   00000048   010050E3           CMP      R0,#+1
   \   0000004C   0300001A           BNE      ??SDCardReinserted_0
    697          	{
    698          #ifndef _WINDOWS
    699          		reset();			// Reset immediately
   \   00000050   ........           BL       reset
    700          #endif
    701          		UnhideSprites();
   \   00000054   ........           BL       UnhideSprites
    702          		return false;
   \   00000058   0000A0E3           MOV      R0,#+0
   \   0000005C   010000EA           B        ??SDCardReinserted_1
    703          	}
    704          	else
    705          	{
    706          		UnhideSprites();
   \                     ??SDCardReinserted_0:
   \   00000060   ........           BL       UnhideSprites
    707          		return true;
   \   00000064   0100A0E3           MOV      R0,#+1
   \                     ??SDCardReinserted_1:
   \   00000068   0CD08DE2           ADD      SP,SP,#+12       ;; stack cleaning
   \   0000006C   0080BDE8           POP      {PC}             ;; return
    708          	}
    709          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??SDCardReinsertedResources:
   \   00000000                      ; Initializer data, 72 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "SD CARD INSERTED!">`
   \              ....        
   \   00000008   000014001400       DC16 0, 20, 20, 420, 220, 0
   \              A401DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "Must reset unit to st...">`
   \              ............
   \   00000020   000000003200       DC16 0, 0, 50, 420, 30, 2
   \              A4011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 BUTTON_CreateIndirect, `?<Constant "RESET UNIT">`
   \              ....        
   \   00000038   010078007300       DC16 1, 120, 115, 140, 60
   \              8C003C00    
   \   00000042   000000000000       DC8 0, 0, 0, 0, 0, 0
    710          
    711          //
    712          // Display a modal dialog box to see if the user wants to reflash his SU or DU2
    713          //
    714          // Returns	YES - proceed to reflash
    715          //			NO - skip and go on
    716          //

   \                                 In section .text, align 4, keep-with-next
    717          int ReFlashYorN(codefiletypes codetype, int rev) {
   \                     ReFlashYorN:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0070A0E1           MOV      R7,R0
   \   00000008   34D04DE2           SUB      SP,SP,#+52
   \   0000000C   0160A0E1           MOV      R6,R1
    718          
    719          	static GUI_WIDGET_CREATE_INFO NewFirmwareResources[] = {
    720          		{ FRAMEWIN_CreateIndirect, "", 0, 50, 20, 360, 220, 0, 0 },
    721          		{ BUTTON_CreateIndirect, "UPDATE",		GUI_ID_OK,		40, 115, 120, 60 },
    722          		{ BUTTON_CreateIndirect, "SKIP", GUI_ID_CANCEL, 190, 115, 120, 60 },
    723          		{ TEXT_CreateIndirect, "", 0, 0, 10, 360, 30, TEXT_CF_HCENTER },
    724          		{ TEXT_CreateIndirect, "", 0, 0, 40, 360, 30, TEXT_CF_HCENTER },
    725          		{ TEXT_CreateIndirect, "Do Not Disconnect or Power Down", 0, 0, 70, 360, 30, TEXT_CF_HCENTER }
    726          	};
    727          	char tempstr[40];
    728          	int oldrev;
    729          	
    730          	SetPopupDefaults(PROGRAMMING_POPUP);
   \   00000010   0300A0E3           MOV      R0,#+3
   \   00000014   ........           BL       SetPopupDefaults
    731          
    732          	NewFirmwareResources[3].pName = tempstr;
   \   00000018   ........           LDR      R5,??DataTable98_7
   \   0000001C   08008DE2           ADD      R0,SP,#+8
   \   00000020   4C0085E5           STR      R0,[R5, #+76]
    733          
    734          	switch (codetype) {
   \   00000024   000057E3           CMP      R7,#+0
   \   00000028   0300000A           BEQ      ??ReFlashYorN_0
   \   0000002C   020057E3           CMP      R7,#+2
   \   00000030   1100000A           BEQ      ??ReFlashYorN_1
   \   00000034   0800003A           BCC      ??ReFlashYorN_2
   \   00000038   170000EA           B        ??ReFlashYorN_3
    735          		case CODESU:
    736          			oldrev = suData.suSwRev;
   \                     ??ReFlashYorN_0:
   \   0000003C   ........           LDR      R0,??DataTable98_8
   \   00000040   B041D0E1           LDRH     R4,[R0, #+16]
    737          			NewFirmwareResources[0].pName = "NEW SU FIRMWARE FOUND";
   \   00000044   ............       ADRL     R0,`?<Constant "NEW SU FIRMWARE FOUND">`
   \              ....        
   \   0000004C   040085E5           STR      R0,[R5, #+4]
    738          			NewFirmwareResources[4].pName = "Update Connected SU Firmware?";
   \   00000050   ............       ADRL     R0,`?<Constant "Update Connected SU F...">`
   \              ....        
   \   00000058   0E0000EA           B        ??ReFlashYorN_4
    739          			break;
    740          		case CODETQ:
    741          			oldrev = unsavedSysData.duSwRev;
   \                     ??ReFlashYorN_2:
   \   0000005C   ........           LDR      R0,??DataTable91
   \   00000060   B040D0E1           LDRH     R4,[R0, #+0]
    742          			NewFirmwareResources[0].pName = "NEW FIRMWARE FOUND";
   \   00000064   ............       ADRL     R0,`?<Constant "NEW FIRMWARE FOUND">`
   \              ....        
   \   0000006C   040085E5           STR      R0,[R5, #+4]
    743          			NewFirmwareResources[4].pName = "Update TraqDash Firmware?";
   \   00000070   ............       ADRL     R0,`?<Constant "Update TraqDash Firmw...">`
   \              ....        
   \   00000078   060000EA           B        ??ReFlashYorN_4
    744          			break;
    745          		case BOOTTQ:
    746          			oldrev = unsavedSysData.unitInfo.bootloaderSwRev;
   \                     ??ReFlashYorN_1:
   \   0000007C   ........           LDR      R0,??DataTable91
   \   00000080   6C4090E5           LDR      R4,[R0, #+108]
    747          			NewFirmwareResources[0].pName = "NEW BOOTLOADER FOUND";
   \   00000084   ............       ADRL     R0,`?<Constant "NEW BOOTLOADER FOUND">`
   \              ....        
   \   0000008C   040085E5           STR      R0,[R5, #+4]
    748          			NewFirmwareResources[4].pName = "Update TraqDash Bootloader?";
   \   00000090   ............       ADRL     R0,`?<Constant "Update TraqDash Bootl...">`
   \              ....        
   \                     ??ReFlashYorN_4:
   \   00000098   640085E5           STR      R0,[R5, #+100]
    749          			break;
    750          	} // switch
    751          
    752          	sprintf(tempstr, "Current Rev %1.2f, New Rev %1.2f", ((float) oldrev / 100.0), ((float) rev / 100.0));
   \                     ??ReFlashYorN_3:
   \   0000009C   0600A0E1           MOV      R0,R6
   \   000000A0   ........           BL       __aeabi_i2f
   \   000000A4   ........           BL       __aeabi_f2d
   \   000000A8   4034A0E3           MOV      R3,#+1073741824
   \   000000AC   0020A0E3           MOV      R2,#+0
   \   000000B0   593883E3           ORR      R3,R3,#0x590000
   \   000000B4   ........           BL       __aeabi_ddiv
   \   000000B8   03008DE8           STM      SP,{R0,R1}
   \   000000BC   0400A0E1           MOV      R0,R4
   \   000000C0   ........           BL       __aeabi_i2f
   \   000000C4   ........           BL       __aeabi_f2d
   \   000000C8   4034A0E3           MOV      R3,#+1073741824
   \   000000CC   0020A0E3           MOV      R2,#+0
   \   000000D0   593883E3           ORR      R3,R3,#0x590000
   \   000000D4   ........           BL       __aeabi_ddiv
   \   000000D8   0020A0E1           MOV      R2,R0
   \   000000DC   0130A0E1           MOV      R3,R1
   \   000000E0   ............       ADRL     R1,`?<Constant "Current Rev %1.2f, Ne...">`
   \              ....        
   \   000000E8   08008DE2           ADD      R0,SP,#+8
   \   000000EC   ........           BL       sprintf
    753          	
    754          	if (GUI_ID_OK == GUI_ExecDialogBox(NewFirmwareResources, GUI_COUNTOF(NewFirmwareResources), &popupCallback, WM_GetDesktopWindow(), 10, 10))
   \   000000F0   ........           BL       WM_GetDesktopWindow
   \   000000F4   0A10A0E3           MOV      R1,#+10
   \   000000F8   04108DE5           STR      R1,[SP, #+4]
   \   000000FC   00108DE5           STR      R1,[SP, #+0]
   \   00000100   0030A0E1           MOV      R3,R0
   \   00000104   ........           LDR      R2,??DataTable93_1
   \   00000108   0610A0E3           MOV      R1,#+6
   \   0000010C   0500A0E1           MOV      R0,R5
   \   00000110   ........           BL       GUI_ExecDialogBox
   \   00000114   010050E3           CMP      R0,#+1
   \   00000118   0200001A           BNE      ??ReFlashYorN_5
    755          	{
    756          #ifndef _WINDOWS
    757          		StopTouchScreenScan();
   \   0000011C   ........           BL       StopTouchScreenScan
    758          #endif
    759          		return true;
   \   00000120   0100A0E3           MOV      R0,#+1
   \   00000124   000000EA           B        ??ReFlashYorN_6
    760          	}
    761          	else return false;
   \                     ??ReFlashYorN_5:
   \   00000128   0000A0E3           MOV      R0,#+0
   \                     ??ReFlashYorN_6:
   \   0000012C   34D08DE2           ADD      SP,SP,#+52       ;; stack cleaning
   \   00000130   F080BDE8           POP      {R4-R7,PC}       ;; return
    762          }

   \                                 In section .data, align 4
   \                     ??NewFirmwareResources:
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "">`
   \              ....        
   \   00000008   000032001400       DC16 0, 50, 20, 360, 220, 0
   \              6801DC000000
   \   00000014   00000000....       DC32 0, BUTTON_CreateIndirect, `?<Constant "UPDATE">`
   \              ............
   \   00000020   010028007300       DC16 1, 40, 115, 120, 60
   \              78003C00    
   \   0000002A   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000030   ............       DC32 BUTTON_CreateIndirect, `?<Constant "SKIP">`
   \              ....        
   \   00000038   0200BE007300       DC16 2, 190, 115, 120, 60
   \              78003C00    
   \   00000042   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000048   ............       DC32 TEXT_CreateIndirect, `?<Constant "">`
   \              ....        
   \   00000050   000000000A00       DC16 0, 0, 10, 360, 30, 2
   \              68011E000200
   \   0000005C   00000000           DC8 0, 0, 0, 0
   \   00000060   ............       DC32 TEXT_CreateIndirect, `?<Constant "">`
   \              ....        
   \   00000068   000000002800       DC16 0, 0, 40, 360, 30, 2
   \              68011E000200
   \   00000074   00000000           DC8 0, 0, 0, 0
   \   00000078   ............       DC32 TEXT_CreateIndirect, `?<Constant "Do Not Disconnect or ...">`
   \              ....        
   \   00000080   000000004600       DC16 0, 0, 70, 360, 30, 2
   \              68011E000200
   \   0000008C   00000000           DC8 0, 0, 0, 0
    763          

   \                                 In section .text, align 4, keep-with-next
    764          static const GUI_WIDGET_CREATE_INFO ShuttingDownResources[] = {
   \                     ShuttingDownResources:
   \   00000000                      ; Initializer data, 48 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "STATUS">`
   \              ....        
   \   00000008   000032001400       DC16 0, 50, 20, 360, 220, 0
   \              6801DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "Saving Files">`
   \              ............
   \   00000020   000000002D00       DC16 0, 0, 45, 360, 30, 2
   \              68011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
    765          	{ FRAMEWIN_CreateIndirect, "STATUS", 0, 50, 20, 360, 220, 0, 0 },
    766          	{ TEXT_CreateIndirect, "Saving Files", 0, 0, 45, 360, 30, TEXT_CF_HCENTER },
    767          };

   \                                 In section .text, align 4, keep-with-next
    768          static const GUI_WIDGET_CREATE_INFO SafeToPowerOffUnit[] = {
   \                     SafeToPowerOffUnit:
   \   00000000                      ; Initializer data, 72 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "STATUS">`
   \              ....        
   \   00000008   000032001400       DC16 0, 50, 20, 360, 220, 0
   \              6801DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "All files saved.">`
   \              ............
   \   00000020   000000001E00       DC16 0, 0, 30, 360, 30, 2
   \              68011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 TEXT_CreateIndirect, `?<Constant "Powering off the unit.">`
   \              ....        
   \   00000038   000000004600       DC16 0, 0, 70, 360, 30, 2
   \              68011E000200
   \   00000044   00000000           DC8 0, 0, 0, 0
    769          	{ FRAMEWIN_CreateIndirect, "STATUS", 0, 50, 20, 360, 220, 0, 0 },
    770          	{ TEXT_CreateIndirect, "All files saved.", 0, 0, 30, 360, 30, TEXT_CF_HCENTER },
    771          	{ TEXT_CreateIndirect, "Powering off the unit.", 0, 0, 70, 360, 30, TEXT_CF_HCENTER },
    772          };
    773          
    774          //
    775          // Controlled power down sequence - when we have pleanty of time to inform the user what we're doing
    776          //

   \                                 In section .text, align 4, keep-with-next
    777          void PowerOffUnit(WM_HWIN owner, char reset_unit, int delay)
    778          {
   \                     PowerOffUnit:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    779          	WM_HWIN hDialog;
    780          	
    781          	if (unsavedSysData.systemMode != DU2_IDLE)
   \   00000008   ........           LDR      R0,??DataTable91
   \   0000000C   08D04DE2           SUB      SP,SP,#+8
   \   00000010   8800D0E5           LDRB     R0,[R0, #+136]
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   0260A0E1           MOV      R6,R2
   \   0000001C   010050E3           CMP      R0,#+1
   \   00000020   0100000A           BEQ      ??PowerOffUnit_0
    782          		ExitRecord(true);
   \   00000024   0100A0E3           MOV      R0,#+1
   \   00000028   ........           BL       ExitRecord
    783          
    784          	HideSprites();
   \                     ??PowerOffUnit_0:
   \   0000002C   ........           BL       HideSprites
    785          
    786          	glbBlackoutFlag = true;		// Suspend gauge screen updates while the popup dialog box is displayed
   \   00000030   ........           LDR      R0,??DataTable94
   \   00000034   0110A0E3           MOV      R1,#+1
   \   00000038   001080E5           STR      R1,[R0, #+0]
    787          	SetPopupDefaults(INFORMATIONAL_POPUP);
   \   0000003C   0000A0E3           MOV      R0,#+0
   \   00000040   ........           BL       SetPopupDefaults
    788          
    789          	// Display "Saving Files"
    790          	hDialog = GUI_CreateDialogBox(ShuttingDownResources, GUI_COUNTOF(ShuttingDownResources), &nonModalPopupCallback, owner, 10, 10);
   \   00000044   ........           LDR      R7,??DataTable97_1
   \   00000048   0A00A0E3           MOV      R0,#+10
   \   0000004C   04008DE5           STR      R0,[SP, #+4]
   \   00000050   00008DE5           STR      R0,[SP, #+0]
   \   00000054   0430A0E1           MOV      R3,R4
   \   00000058   0720A0E1           MOV      R2,R7
   \   0000005C   0210A0E3           MOV      R1,#+2
   \   00000060   ............       ADRL     R0,ShuttingDownResources
   \              ....        
   \   00000068   ........           BL       GUI_CreateDialogBox
   \   0000006C   0080A0E1           MOV      R8,R0
    791          	GUI_Exec();					// Allow popup to be shown
   \   00000070   ........           BL       GUI_Exec
    792          
    793          	SaveFilesAndPowerDown();	// Save the files
   \   00000074   1E00A0E3           MOV      R0,#+30
   \   00000078   ........           BL       SetUserMode
   \   0000007C   0000A0E3           MOV      R0,#+0
   \   00000080   ........           BL       WriteUserDataEvent
   \   00000084   ........           ADR      R0,??DataTable93  ;; ""
   \   00000088   ........           BL       FS_Unmount
    794          
    795          	if (!delay)					// If no particular delay was requested at least wait 1ms before shutting down
   \   0000008C   000056E3           CMP      R6,#+0
    796          		delay = 1;
   \   00000090   0160A003           MOVEQ    R6,#+1
    797          	GUI_Delay(delay);			// give time for messages to be processed before displaying that it is safe to remove power
   \   00000094   0600A0E1           MOV      R0,R6
   \   00000098   ........           BL       GUI_Delay
    798          
    799          	WM_DeleteWindow(hDialog);	// Delete "Saving Files" popup
   \   0000009C   0800A0E1           MOV      R0,R8
   \   000000A0   ........           BL       WM_DeleteWindow
    800          	
    801          #ifdef _WINDOWS
    802          	// Create non-modal dialog box in windows to allow the power key to work
    803          	GUI_CreateDialogBox(SafeToPowerOffUnit, GUI_COUNTOF(SafeToPowerOffUnit), &nonModalPopupCallback, owner, 10, 10);
    804          #else
    805          	GUI_CreateDialogBox(SafeToPowerOffUnit, GUI_COUNTOF(SafeToPowerOffUnit), &nonModalPopupCallback, owner, 10, 10);
   \   000000A4   0A00A0E3           MOV      R0,#+10
   \   000000A8   04008DE5           STR      R0,[SP, #+4]
   \   000000AC   00008DE5           STR      R0,[SP, #+0]
   \   000000B0   0430A0E1           MOV      R3,R4
   \   000000B4   0720A0E1           MOV      R2,R7
   \   000000B8   0310A0E3           MOV      R1,#+3
   \   000000BC   ............       ADRL     R0,SafeToPowerOffUnit
   \              ....        
   \   000000C4   ........           BL       GUI_CreateDialogBox
    806          	GUI_Exec();				// Wait to die
   \   000000C8   ........           BL       GUI_Exec
    807          	if (reset_unit)
   \   000000CC   000055E3           CMP      R5,#+0
   \   000000D0   0000000A           BEQ      ??PowerOffUnit_1
    808          		reset();			// Reset the unit
   \   000000D4   ........           BL       reset
    809          	// just wait for powerdown
    810          	OS_Delay(60000);
   \                     ??PowerOffUnit_1:
   \   000000D8   08D08DE2           ADD      SP,SP,#+8
   \   000000DC   F041BDE8           POP      {R4-R8,LR}
   \   000000E0   6000A0E3           MOV      R0,#+96
   \   000000E4   EA0C80E3           ORR      R0,R0,#0xEA00
   \   000000E8   ........           B        OS_Delay         ;; tailcall
    811          #endif
    812          }
    813          
    814          //
    815          // Essential core function of the power down - in case of emergency power down call this directly!
    816          //

   \                                 In section .text, align 4, keep-with-next
    817          void SaveFilesAndPowerDown(void)
    818          {
   \                     SaveFilesAndPowerDown:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
    819          	// tell comm and laptimer to stop recording and shut off power at SU
    820          	SetUserMode(DU2_SHUTDOWN);
   \   00000008   1E00A0E3           MOV      R0,#+30
   \   0000000C   ........           BL       SetUserMode
    821          	
    822          	// save configuration (use synchronous calls, not event posting!)
    823          	WriteUserDataEvent(SYSTEM_DATA);
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   ........           BL       WriteUserDataEvent
    824          
    825          // COMMENTED OUT BECAUSE THESE SHOULD ALREADY BE UP TO DATE  --  GAS
    826          //	if (trackTableIndex >= 0)
    827          //		if (trackTable[trackTableIndex].sdCardEntry)	// Only write if a disk file already exists
    828          //			WriteUserDataEvent(TRACK_DATA);
    829          //	WriteUserDataEvent(VEHICLE_DATA);
    830          //	WriteUserDataEvent(DRIVER_DATA);
    831          						
    832          #ifndef _WINDOWS
    833          	// Unmount all drives (flushes cache)
    834          	FS_Unmount("");
   \   00000018   04D08DE2           ADD      SP,SP,#+4
   \   0000001C   0040BDE8           POP      {LR}
   \   00000020   ........           ADR      R0,??DataTable93  ;; ""
   \   00000024   ........           B        FS_Unmount       ;; tailcall
    835          #endif
    836          
    837          }
    838          
    839          #ifndef _WINDOWS

   \                                 In section .text, align 4, keep-with-next
    840          void ConfigureCache(void)
    841          {
   \                     ConfigureCache:
   \   00000000   10402DE9           PUSH     {R4,LR}
    842          	static U32 *fileCache = (U32 *) START_OF_ISRAM;
    843          
    844          	// **** GAS TEST -- these are not ideal but done to test file system speedup
    845          //	FS_ConfigUpdateDirOnWrite( 0 );										// do not update directory after each write for speed
    846          	FS_SetFileWriteMode( FS_WRITEMODE_FAST );							// not safe but allegedly fast
   \   00000004   0200A0E3           MOV      R0,#+2
   \   00000008   ........           BL       FS_SetFileWriteMode
    847          //	FS_SetFileWriteMode( FS_WRITEMODE_SAFE );							// does not work well. dropouts. crashes if you remove and reinsert card
    848          	FS_AssignCache("", fileCache, FS_CACHE_SIZE, FS_CACHE_RW);			// use a cache to speed things up
   \   0000000C   ........           ADR      R4,??DataTable93  ;; ""
   \   00000010   ........           LDR      R3,??DataTable91_12
   \   00000014   C02CA0E3           MOV      R2,#+49152
   \   00000018   C019A0E3           MOV      R1,#+3145728
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   ........           BL       FS_AssignCache
    849          	FS_CACHE_SetMode("", FS_SECTOR_TYPE_MASK_ALL, FS_CACHE_MODE_WB);
   \   00000024   0400A0E1           MOV      R0,R4
   \   00000028   1040BDE8           POP      {R4,LR}
   \   0000002C   0720A0E3           MOV      R2,#+7
   \   00000030   0710A0E3           MOV      R1,#+7
   \   00000034   ........           B        FS_CACHE_SetMode  ;; tailcall
    850          }

   \                                 In section .data, align 4
   \   00000000   00003000           DC32 300000H
    851          

   \                                 In section .text, align 4, keep-with-next
    852          char OkToUseSDCard(void)
    853          {
    854          	return okToUseSDCard;
   \                     OkToUseSDCard:
   \   00000000   ........           LDR      R0,??DataTable92
   \   00000004   1600D0E5           LDRB     R0,[R0, #+22]
   \   00000008   1EFF2FE1           BX       LR               ;; return
    855          }
    856          #endif
    857          

   \                                 In section .text, align 4, keep-with-next
    858          void InitializeTraqmateFiles(void)
    859          {
   \                     InitializeTraqmateFiles:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
    860          #ifdef _WINDOWS
    861          	FILE *pTestFile;
    862          
    863          	ConfigureHomeDirectory();
    864          
    865          	if ((pTestFile = fopen("544729.sno", "r")) != NULL)		// serial number mode allows serial and build date to be set
    866          	{
    867          		fclose(pTestFile);
    868          		unsavedSysData.enableSerialNumber = true;
    869          	}
    870          	else unsavedSysData.enableSerialNumber = false;
    871          	
    872          	if ((pTestFile = fopen("testmode", "r")) != NULL)
    873          	{
    874          		fclose(pTestFile);
    875          		testMode = true;
    876          	}
    877          	else testMode = false;
    878          
    879          	if ((pTestFile = fopen("tempcal", "r")) != NULL)			// operator ability to calibrate LED temperature correction value
    880          	{
    881          		fclose(pTestFile);
    882          		unsavedSysData.enableTempCalibration = true;
    883          	}
    884          	else unsavedSysData.enableTempCalibration = false;
    885          
    886          	LoadPersonalizationData();
    887          
    888          	InitializeDirectoryStructure();
    889          
    890          #else
    891          #ifdef BUILD_DEBUG_PORT
    892          	char tempstr[60];
    893          #endif
    894          	U8 attr;
    895          	
    896          	InitializeDirectoryStructure();
   \   00000008   ........           BL       InitializeDirectoryStructure
    897          			
    898          	// check for special mode files or folders present
    899          	unsavedSysData.enableSerialNumber = (0xFF != FS_GetFileAttributes("\\544729.sno"));		// serial number mode allows serial and build date to be set
   \   0000000C   ............       ADRL     R0,`?<Constant "\\\\544729.sno">`
   \              ....        
   \   00000014   ........           BL       FS_GetFileAttributes
   \   00000018   FF0050E3           CMP      R0,#+255
   \   0000001C   ........           LDR      R4,??DataTable98_9
   \   00000020   0100A013           MOVNE    R0,#+1
   \   00000024   0000A003           MOVEQ    R0,#+0
   \   00000028   8A00C4E5           STRB     R0,[R4, #+138]
    900          	testMode = (0xFF != FS_GetFileAttributes("\\testmode"));		// test mode adds extra screen
   \   0000002C   ............       ADRL     R0,`?<Constant "\\\\testmode">`
   \              ....        
   \   00000034   ........           BL       FS_GetFileAttributes
   \   00000038   FF0050E3           CMP      R0,#+255
   \   0000003C   ........           LDR      R5,??DataTable92
   \   00000040   0100A013           MOVNE    R0,#+1
   \   00000044   0000A003           MOVEQ    R0,#+0
   \   00000048   000085E5           STR      R0,[R5, #+0]
    901          	demoMode = (0xFF != FS_GetFileAttributes("\\demomode"));		// demo mode simulates operation
   \   0000004C   ............       ADRL     R0,`?<Constant "\\\\demomode">`
   \              ....        
   \   00000054   ........           BL       FS_GetFileAttributes
   \   00000058   FF0050E3           CMP      R0,#+255
   \   0000005C   0100A013           MOVNE    R0,#+1
   \   00000060   0000A003           MOVEQ    R0,#+0
   \   00000064   040085E5           STR      R0,[R5, #+4]
    902          	factMode = (0xFF != FS_GetFileAttributes("\\factmode"));		// factory checkout mode
   \   00000068   ............       ADRL     R0,`?<Constant "\\\\factmode">`
   \              ....        
   \   00000070   ........           BL       FS_GetFileAttributes
   \   00000074   FF0050E3           CMP      R0,#+255
   \   00000078   0100A013           MOVNE    R0,#+1
   \   0000007C   0000A003           MOVEQ    R0,#+0
   \   00000080   080085E5           STR      R0,[R5, #+8]
    903          	unsavedSysData.enableTempCalibration = (0xFF != FS_GetFileAttributes("\\tempcal"));	// operator ability to calibrate LED temperature correction value
   \   00000084   ............       ADRL     R0,`?<Constant "\\\\tempcal">`
   \              ....        
   \   0000008C   ........           BL       FS_GetFileAttributes
   \   00000090   FF0050E3           CMP      R0,#+255
   \   00000094   0100A013           MOVNE    R0,#+1
   \   00000098   0000A003           MOVEQ    R0,#+0
   \   0000009C   C80084E5           STR      R0,[R4, #+200]
    904          //	unsavedSysData.wifiCardInserted = (0xFF != FS_GetFileAttributes(WIFI_FILE));	// Toshiba FlashAir card inserted
    905          	attr = FS_GetFileAttributes("\\SD_WLAN\\CONFIG");
    906          	unsavedSysData.wifiCardInserted = (0xFF != attr);
   \   000000A0   ............       ADRL     R0,`?<Constant "\\\\SD_WLAN\\\\CONFIG">`
   \              ....        
   \   000000A8   ........           BL       FS_GetFileAttributes
   \   000000AC   FF0050E3           CMP      R0,#+255
    907          //	unsavedSysData.wifiCardInserted = (0xFF != FS_GetFileAttributes("\\SD_WLAN\\CONFIG"));	// Toshiba FlashAir card inserted
    908          
    909          	// Configure WiFi SD card if necessary
    910          	if (unsavedSysData.wifiEnabled && unsavedSysData.wifiCardInserted)
   \   000000B0   D01094E5           LDR      R1,[R4, #+208]
   \   000000B4   0100A013           MOVNE    R0,#+1
   \   000000B8   0000A003           MOVEQ    R0,#+0
   \   000000BC   000051E3           CMP      R1,#+0
   \   000000C0   CC0084E5           STR      R0,[R4, #+204]
   \   000000C4   00005013           CMPNE    R0,#+0
   \   000000C8   0100000A           BEQ      ??InitializeTraqmateFiles_0
    911          		WiFiSetup(false);
   \   000000CC   0000A0E3           MOV      R0,#+0
   \   000000D0   ........           BL       WiFiSetup
    912          	
    913          	if (factMode)
   \                     ??InitializeTraqmateFiles_0:
   \   000000D4   080095E5           LDR      R0,[R5, #+8]
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   0000000A           BEQ      ??InitializeTraqmateFiles_1
    914          		FactoryCheckout();
   \   000000E0   ........           BL       FactoryCheckout
    915          	
    916          #ifdef BUILD_DEBUG_PORT
    917          	sprintf(tempstr, "TraqDash SW %3.2f, HW %3.2f, DATA %d !\n\r", ((float) unsavedSysData.duSwRev)/100.0, ((float) unsavedSysData.duHwRev)/100.0, unsavedSysData.duDataRev);
    918          	DBGU_Print(tempstr);
    919          #endif
    920          
    921          #endif
    922          
    923          	// Check for too many session files - move to archive folder if approved
    924          	ArchiveSessions();
   \                     ??InitializeTraqmateFiles_1:
   \   000000E4   ........           BL       ArchiveSessions
    925          
    926          	// Check to see if new software version and update the file
    927          	if (NewSWVersion())
   \   000000E8   ........           BL       NewSWVersion
   \   000000EC   000050E3           CMP      R0,#+0
   \   000000F0   1E00000A           BEQ      ??InitializeTraqmateFiles_2
    928          	{
    929          		// See if the user wants to verify the track SF lines
    930          		if (UserWantsToUpdateSF())
   \   000000F4   0100A0E3           MOV      R0,#+1
   \   000000F8   ........           BL       SetPopupDefaults
   \   000000FC   ........           BL       WM_GetDesktopWindow
   \   00000100   0A10A0E3           MOV      R1,#+10
   \   00000104   04108DE5           STR      R1,[SP, #+4]
   \   00000108   00108DE5           STR      R1,[SP, #+0]
   \   0000010C   0030A0E1           MOV      R3,R0
   \   00000110   ........           LDR      R2,??DataTable93_1
   \   00000114   0510A0E3           MOV      R1,#+5
   \   00000118   ............       ADRL     R0,??CheckUpdateTracks
   \              ....        
   \   00000120   ........           BL       GUI_ExecDialogBox
   \   00000124   030050E3           CMP      R0,#+3
   \   00000128   0050A013           MOVNE    R5,#+0
   \   0000012C   0150A003           MOVEQ    R5,#+1
   \   00000130   ........           BL       GUI_Clear
   \   00000134   0A20A0E3           MOV      R2,#+10
   \   00000138   2710A0E3           MOV      R1,#+39
   \   0000013C   ........           LDR      R0,??DataTable98_10
   \   00000140   ........           BL       GUI_DrawBitmap
   \   00000144   6120A0E3           MOV      R2,#+97
   \   00000148   1410A0E3           MOV      R1,#+20
   \   0000014C   ........           LDR      R0,??DataTable98_11
   \   00000150   ........           BL       GUI_DrawBitmap
   \   00000154   6E20A0E3           MOV      R2,#+110
   \   00000158   F010A0E3           MOV      R1,#+240
   \   0000015C   ........           LDR      R0,??DataTable98_12
   \   00000160   ........           BL       GUI_DrawBitmap
   \   00000164   000055E3           CMP      R5,#+0
   \   00000168   0000000A           BEQ      ??InitializeTraqmateFiles_2
    931          		{
    932          			// Update start finish lines
    933          			UpdateSFLines();
   \   0000016C   ........           BL       UpdateSFLines
    934          		}
    935          	}
    936          
    937          	InitializeTraqmateData();
   \                     ??InitializeTraqmateFiles_2:
   \   00000170   ........           BL       CreateTracks
   \   00000174   ........           BL       ReadDataStructures
   \   00000178   000050E3           CMP      R0,#+0
   \   0000017C   0400000A           BEQ      ??InitializeTraqmateFiles_3
   \   00000180   C01094E5           LDR      R1,[R4, #+192]
   \   00000184   000051E3           CMP      R1,#+0
   \   00000188   0000000A           BEQ      ??InitializeTraqmateFiles_4
   \   0000018C   ........           BL       DisplayInvalidFilesPopup
   \                     ??InitializeTraqmateFiles_4:
   \   00000190   0000A0E3           MOV      R0,#+0
   \                     ??InitializeTraqmateFiles_3:
   \   00000194   0CD08DE2           ADD      SP,SP,#+12
   \   00000198   3040BDE8           POP      {R4,R5,LR}
   \   0000019C   ........           B        ResetAllFileLists  ;; tailcall
    938          }
    939          
    940          

   \                                 In section .text, align 4, keep-with-next
    941          void local_itoa(int n, char s[])
    942          {
   \                     local_itoa:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0140A0E1           MOV      R4,R1
   \   00000008   04D04DE2           SUB      SP,SP,#+4
    943          	int i;
    944          
    945          	i = 0;
   \   0000000C   0010A0E3           MOV      R1,#+0
   \   00000010   0420A0E1           MOV      R2,R4
    946          	do {       /* generate digits in reverse order */
    947          		s[i++] = n % 10 + '0';   /* get next digit */
   \                     ??local_itoa_0:
   \   00000014   ........           LDR      R3,??DataTable98_13  ;; 0x66666667
   \   00000018   0AE0A0E3           MOV      LR,#+10
   \   0000001C   90C3C3E0           SMULL    R12,R3,R0,R3
   \   00000020   011081E2           ADD      R1,R1,#+1
   \   00000024   4331B0E1           ASRS     R3,R3,#+2
   \   00000028   01308342           ADDMI    R3,R3,#+1
   \   0000002C   03C0A0E1           MOV      R12,R3
   \   00000030   8C0E6CE1           SMULBB   R12,R12,LR
   \   00000034   0C0040E0           SUB      R0,R0,R12
   \   00000038   300080E2           ADD      R0,R0,#+48
   \   0000003C   0100C2E4           STRB     R0,[R2], #+1
    948          	} while ((n /= 10) > 0);     /* delete it */
   \   00000040   0300A0E1           MOV      R0,R3
   \   00000044   010050E3           CMP      R0,#+1
   \   00000048   F1FFFFAA           BGE      ??local_itoa_0
    949          	s[i] = '\0';
   \   0000004C   0000A0E3           MOV      R0,#+0
   \   00000050   0400C1E7           STRB     R0,[R1, +R4]
    950          	reverse(s);
   \   00000054   0050A0E3           MOV      R5,#+0
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           BL       strlen
   \   00000060   010040E2           SUB      R0,R0,#+1
   \   00000064   041080E0           ADD      R1,R0,R4
   \   00000068   010050E3           CMP      R0,#+1
   \   0000006C   010000AA           BGE      ??local_itoa_1
    951          }
   \                     ??local_itoa_2:
   \   00000070   04D08DE2           ADD      SP,SP,#+4        ;; stack cleaning
   \   00000074   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??local_itoa_1:
   \   00000078   0030D1E5           LDRB     R3,[R1, #+0]
   \   0000007C   0020D4E5           LDRB     R2,[R4, #+0]
   \   00000080   015085E2           ADD      R5,R5,#+1
   \   00000084   0130C4E4           STRB     R3,[R4], #+1
   \   00000088   010040E2           SUB      R0,R0,#+1
   \   0000008C   012041E4           STRB     R2,[R1], #-1
   \   00000090   000055E1           CMP      R5,R0
   \   00000094   F7FFFFBA           BLT      ??local_itoa_1
   \   00000098   F4FFFFEA           B        ??local_itoa_2
    952          
    953          /* reverse:  reverse string s in place */

   \                                 In section .text, align 4, keep-with-next
    954          void reverse(char s[])
    955          {
   \                     reverse:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    956          	int i, j;
    957          	char c;
    958          
    959          	for (i = 0, j = strlen(s)-1; i<j; i++, j--)
   \   0000000C   0050A0E3           MOV      R5,#+0
   \   00000010   ........           BL       strlen
   \   00000014   010040E2           SUB      R0,R0,#+1
   \   00000018   041080E0           ADD      R1,R0,R4
   \   0000001C   010050E3           CMP      R0,#+1
   \   00000020   070000BA           BLT      ??reverse_0
    960          	{
    961          		c = s[i];
    962          		s[i] = s[j];
   \                     ??reverse_1:
   \   00000024   0030D1E5           LDRB     R3,[R1, #+0]
   \   00000028   0020D4E5           LDRB     R2,[R4, #+0]
    963          		s[j] = c;
    964          	}
   \   0000002C   015085E2           ADD      R5,R5,#+1
   \   00000030   0130C4E4           STRB     R3,[R4], #+1
   \   00000034   010040E2           SUB      R0,R0,#+1
   \   00000038   012041E4           STRB     R2,[R1], #-1
   \   0000003C   000055E1           CMP      R5,R0
   \   00000040   F7FFFFBA           BLT      ??reverse_1
    965          }
   \                     ??reverse_0:
   \   00000044   04D08DE2           ADD      SP,SP,#+4        ;; stack cleaning
   \   00000048   3080BDE8           POP      {R4,R5,PC}       ;; return
    966          
    967          //
    968          //See if the current software version is different from the last version run
    969          // Update the file to the current version when done
    970          //
    971          // Returns: true = new software version or the version file did not previously exist
    972          //			false = same software version as before
    973          // file updated to current rev in both cases
    974          //
    975          #ifdef _WINDOWS
    976          int NewSWVersion(void)
    977          {
    978          	HFILE hFile;
    979          	OFSTRUCT fStruct;
    980          	DWORD bytesReadWritten;
    981          	int version = DU2_SW_REV;
    982          	char newVersionStr[10];
    983          
    984          	// Build current version string
    985          	local_itoa(version, newVersionStr);
    986          
    987          	if ((hFile = OpenFile(VERSION_PATH, &fStruct, OF_READWRITE)) != HFILE_ERROR)
    988          	{
    989          		char oldVersionStr[10];
    990          
    991          		// Read file to get last version
    992          		if (ReadFile((HANDLE)hFile, &oldVersionStr, sizeof(oldVersionStr), &bytesReadWritten, NULL) == TRUE)
    993          		{
    994          			// Put a NULL at the end of the string read so we can compare strings
    995          			oldVersionStr[bytesReadWritten] = 0;
    996          
    997          			// Compare old version with new version
    998          			if (strcmp(newVersionStr, oldVersionStr) == 0)	// if strings the same
    999          			{
   1000          				CloseHandle((HANDLE)hFile);
   1001          				return false;
   1002          			}
   1003          			else
   1004          			{
   1005          				// Else file old version - update and return indicating wrong version
   1006          				LONG dist;
   1007          
   1008          				dist = 0;
   1009          				SetFilePointer((HANDLE)hFile, dist, NULL, FILE_BEGIN);		// Point back to start of file
   1010          				WriteFile((HANDLE)hFile, newVersionStr, strlen(newVersionStr), &bytesReadWritten, NULL);
   1011          				CloseHandle((HANDLE)hFile);
   1012          				return true;
   1013          			}
   1014          		}
   1015          		else
   1016          		{
   1017          			CloseHandle((HANDLE)hFile);
   1018          			return true;
   1019          		}
   1020          	}
   1021          	else
   1022          	{
   1023          		// else file does not exist - make it
   1024          		if ((hFile = OpenFile(VERSION_PATH, &fStruct, OF_CREATE)) != HFILE_ERROR)
   1025          		{
   1026          			// else file old version - update and return indicating wrong version
   1027          			WriteFile((HANDLE)hFile, newVersionStr, strlen(newVersionStr), &bytesReadWritten, NULL);
   1028          			CloseHandle((HANDLE)hFile);
   1029          		}
   1030          	}
   1031          	return true;
   1032          }
   1033          #else
   1034          // Target hardware version

   \                                 In section .text, align 4, keep-with-next
   1035          int NewSWVersion(void)
   1036          {
   \                     NewSWVersion:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   18D04DE2           SUB      SP,SP,#+24
   1037          	FS_FILE *pFile;
   1038          	int version = DU2_SW_REV;
   1039          	char newVersionStr[10];
   1040          
   1041          	// Build current version string
   1042          	local_itoa(version, newVersionStr);
   \   00000008   2D00A0E3           MOV      R0,#+45
   \   0000000C   400F80E3           ORR      R0,R0,#0x100
   \   00000010   0010A0E3           MOV      R1,#+0
   \   00000014   0D20A0E1           MOV      R2,SP
   \                     ??NewSWVersion_0:
   \   00000018   ........           LDR      R3,??DataTable98_13  ;; 0x66666667
   \   0000001C   0AE0A0E3           MOV      LR,#+10
   \   00000020   90C3C3E0           SMULL    R12,R3,R0,R3
   \   00000024   011081E2           ADD      R1,R1,#+1
   \   00000028   4331B0E1           ASRS     R3,R3,#+2
   \   0000002C   01308342           ADDMI    R3,R3,#+1
   \   00000030   03C0A0E1           MOV      R12,R3
   \   00000034   8C0E6CE1           SMULBB   R12,R12,LR
   \   00000038   0C0040E0           SUB      R0,R0,R12
   \   0000003C   300080E2           ADD      R0,R0,#+48
   \   00000040   0100C2E4           STRB     R0,[R2], #+1
   \   00000044   0300A0E1           MOV      R0,R3
   \   00000048   010050E3           CMP      R0,#+1
   \   0000004C   F1FFFFAA           BGE      ??NewSWVersion_0
   \   00000050   0040A0E3           MOV      R4,#+0
   \   00000054   0D00A0E1           MOV      R0,SP
   \   00000058   0040C1E7           STRB     R4,[R1, +R0]
   \   0000005C   0050A0E3           MOV      R5,#+0
   \   00000060   ........           BL       strlen
   \   00000064   010040E2           SUB      R0,R0,#+1
   \   00000068   0D10A0E1           MOV      R1,SP
   \   0000006C   0D2080E0           ADD      R2,R0,SP
   \   00000070   010050E3           CMP      R0,#+1
   \   00000074   150000AA           BGE      ??NewSWVersion_1
   1043          
   1044          	if ((pFile = FS_FOpen(VERSION_PATH, "r+")) != NULL)
   \                     ??NewSWVersion_2:
   \   00000078   ............       ADRL     R5,VERSION_PATH
   \              ....        
   \   00000080   ........           ADR      R1,??DataTable97_3  ;; 0x72, 0x2B, 0x00, 0x00
   \   00000084   0500A0E1           MOV      R0,R5
   \   00000088   ........           BL       FS_FOpen
   \   0000008C   0060B0E1           MOVS     R6,R0
   \   00000090   1C00000A           BEQ      ??NewSWVersion_3
   1045          	{
   1046          		U32 bytesRead;
   1047          		char oldVersionStr[10];
   1048          
   1049          		// Read file to get last version
   1050          		if ((bytesRead = FS_Read(pFile, &oldVersionStr, sizeof(oldVersionStr))) != 0)
   \   00000094   0A20A0E3           MOV      R2,#+10
   \   00000098   0C108DE2           ADD      R1,SP,#+12
   \   0000009C   ........           BL       FS_Read
   \   000000A0   000050E3           CMP      R0,#+0
   \   000000A4   2200000A           BEQ      ??NewSWVersion_4
   1051          		{
   1052          			// Put a NULL at the end of the string read so we can compare strings
   1053          			oldVersionStr[bytesRead] = 0;
   \   000000A8   0C108DE2           ADD      R1,SP,#+12
   \   000000AC   0140C0E7           STRB     R4,[R0, +R1]
   1054          
   1055          			// Compare old version with new version
   1056          			if (strcmp(newVersionStr, oldVersionStr) == 0)	// if strings the same
   \   000000B0   0D00A0E1           MOV      R0,SP
   \   000000B4   ........           BL       strcmp
   \   000000B8   000050E3           CMP      R0,#+0
   \   000000BC   0C00001A           BNE      ??NewSWVersion_5
   1057          			{
   1058          				FS_FClose(pFile);
   \   000000C0   0600A0E1           MOV      R0,R6
   \   000000C4   ........           BL       FS_FClose
   1059          				return false;
   \   000000C8   0000A0E3           MOV      R0,#+0
   \   000000CC   1B0000EA           B        ??NewSWVersion_6
   \                     ??NewSWVersion_1:
   \   000000D0   00C0D2E5           LDRB     R12,[R2, #+0]
   \   000000D4   0030D1E5           LDRB     R3,[R1, #+0]
   \   000000D8   015085E2           ADD      R5,R5,#+1
   \   000000DC   01C0C1E4           STRB     R12,[R1], #+1
   \   000000E0   010040E2           SUB      R0,R0,#+1
   \   000000E4   013042E4           STRB     R3,[R2], #-1
   \   000000E8   000055E1           CMP      R5,R0
   \   000000EC   F7FFFFBA           BLT      ??NewSWVersion_1
   \   000000F0   E0FFFFEA           B        ??NewSWVersion_2
   1060          			}
   1061          			else
   1062          			{
   1063          				// Else file old version - update and return indicating wrong version
   1064          				FS_SetFilePos(pFile, 0, FS_FILE_BEGIN);			// Point back to start of file
   \                     ??NewSWVersion_5:
   \   000000F4   0020A0E3           MOV      R2,#+0
   \   000000F8   0010A0E3           MOV      R1,#+0
   \   000000FC   0600A0E1           MOV      R0,R6
   \   00000100   ........           BL       FS_FSeek
   1065          				FS_Write(pFile, newVersionStr, strlen(newVersionStr));
   \   00000104   040000EA           B        ??NewSWVersion_7
   1066          				FS_FClose(pFile);
   1067          				return true;
   1068          			}
   1069          		}
   1070          		else
   1071          		{
   1072          			FS_FClose(pFile);
   1073          			return true;
   1074          		}
   1075          	}
   1076          	else
   1077          	{
   1078          		// else file does not exist - make it
   1079          		if ((pFile = FS_FOpen(VERSION_PATH, "w")) != NULL)
   \                     ??NewSWVersion_3:
   \   00000108   ........           ADR      R1,??DataTable98  ;; "w"
   \   0000010C   0500A0E1           MOV      R0,R5
   \   00000110   ........           BL       FS_FOpen
   \   00000114   0060B0E1           MOVS     R6,R0
   \   00000118   0700000A           BEQ      ??NewSWVersion_8
   1080          		{
   1081          			// Else file old version - update and return indicating wrong version
   1082          			FS_Write(pFile, newVersionStr, strlen(newVersionStr));
   \                     ??NewSWVersion_7:
   \   0000011C   0D00A0E1           MOV      R0,SP
   \   00000120   ........           BL       strlen
   \   00000124   0020A0E1           MOV      R2,R0
   \   00000128   0D10A0E1           MOV      R1,SP
   \   0000012C   0600A0E1           MOV      R0,R6
   \   00000130   ........           BL       FS_Write
   1083          			FS_FClose(pFile);
   \                     ??NewSWVersion_4:
   \   00000134   0600A0E1           MOV      R0,R6
   \   00000138   ........           BL       FS_FClose
   1084          		}
   1085          	}
   1086          	return true;
   \                     ??NewSWVersion_8:
   \   0000013C   0100A0E3           MOV      R0,#+1
   \                     ??NewSWVersion_6:
   \   00000140   18D08DE2           ADD      SP,SP,#+24       ;; stack cleaning
   \   00000144   7080BDE8           POP      {R4-R6,PC}       ;; return
   1087          }
   1088          #endif
   1089          
   1090          // See if the user wants to verify the track SF lines

   \                                 In section .text, align 4, keep-with-next
   1091          int UserWantsToUpdateSF(void)
   1092          {
   \                     UserWantsToUpdateSF:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   08D04DE2           SUB      SP,SP,#+8
   1093          	int retval;
   1094          
   1095          	static const GUI_WIDGET_CREATE_INFO CheckUpdateTracks[] = {
   1096          		{ FRAMEWIN_CreateIndirect, "New Software Detected", 0, 20, 20, 400, 220, 0, 0 },
   1097          		{ TEXT_CreateIndirect, "New Track Definitions. Would you like", 0, 0, 30, 400, 30, TEXT_CF_HCENTER },
   1098          		{ TEXT_CreateIndirect, "to update Start/Finish coordinates?", 0, 0, 70, 400, 30, TEXT_CF_HCENTER },
   1099          		{ BUTTON_CreateIndirect, "YES", GUI_ID_YES, 60, 115, 100, 60 },
   1100          		{ BUTTON_CreateIndirect, "NO", GUI_ID_NO, 240, 115, 100, 60 },
   1101          	};
   1102          
   1103          	SetPopupDefaults(WARNING_POPUP);
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   ........           BL       SetPopupDefaults
   1104          
   1105          	if (GUI_ExecDialogBox(CheckUpdateTracks, GUI_COUNTOF(CheckUpdateTracks), &popupCallback, WM_GetDesktopWindow(), 10, 10) == GUI_ID_YES)
   \   00000010   ........           BL       WM_GetDesktopWindow
   \   00000014   0A10A0E3           MOV      R1,#+10
   \   00000018   04108DE5           STR      R1,[SP, #+4]
   \   0000001C   00108DE5           STR      R1,[SP, #+0]
   \   00000020   0030A0E1           MOV      R3,R0
   \   00000024   ........           LDR      R2,??DataTable101
   \   00000028   0510A0E3           MOV      R1,#+5
   \   0000002C   ............       ADRL     R0,??CheckUpdateTracks
   \              ....        
   \   00000034   ........           BL       GUI_ExecDialogBox
   \   00000038   030050E3           CMP      R0,#+3
   1106          		retval = true;
   \   0000003C   0140A003           MOVEQ    R4,#+1
   1107          	else retval = false;
   \   00000040   0040A013           MOVNE    R4,#+0
   1108          
   1109          	DisplaySplashScreen1();
   \   00000044   ........           BL       GUI_Clear
   \   00000048   0A20A0E3           MOV      R2,#+10
   \   0000004C   2710A0E3           MOV      R1,#+39
   \   00000050   ........           LDR      R0,??DataTable98_10
   \   00000054   ........           BL       GUI_DrawBitmap
   \   00000058   6120A0E3           MOV      R2,#+97
   \   0000005C   1410A0E3           MOV      R1,#+20
   \   00000060   ........           LDR      R0,??DataTable98_11
   \   00000064   ........           BL       GUI_DrawBitmap
   \   00000068   6E20A0E3           MOV      R2,#+110
   \   0000006C   F010A0E3           MOV      R1,#+240
   \   00000070   ........           LDR      R0,??DataTable98_12
   \   00000074   ........           BL       GUI_DrawBitmap
   1110          	return retval;
   \   00000078   0400A0E1           MOV      R0,R4
   \   0000007C   08D08DE2           ADD      SP,SP,#+8
   \   00000080   1080BDE8           POP      {R4,PC}          ;; return
   1111          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??CheckUpdateTracks:
   \   00000000                      ; Initializer data, 120 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "New Software Detected">`
   \              ....        
   \   00000008   000014001400       DC16 0, 20, 20, 400, 220, 0
   \              9001DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "New Track Definitions...">`
   \              ............
   \   00000020   000000001E00       DC16 0, 0, 30, 400, 30, 2
   \              90011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 TEXT_CreateIndirect, `?<Constant "to update Start/Finis...">`
   \              ....        
   \   00000038   000000004600       DC16 0, 0, 70, 400, 30, 2
   \              90011E000200
   \   00000044   00000000           DC8 0, 0, 0, 0
   \   00000048   ............       DC32 BUTTON_CreateIndirect, `?<Constant "YES">`
   \              ....        
   \   00000050   03003C007300       DC16 3, 60, 115, 100, 60
   \              64003C00    
   \   0000005A   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000060   ............       DC32 BUTTON_CreateIndirect, `?<Constant "NO">`
   \              ....        
   \   00000068   0400F0007300       DC16 4, 240, 115, 100, 60
   \              64003C00    
   \   00000072   000000000000       DC8 0, 0, 0, 0, 0, 0
   1112          
   1113          

   \                                 In section .text, align 4, keep-with-next
   1114          void InitializeTraqmateData(void)
   1115          {
   \                     InitializeTraqmateData:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   1116          	int retval;
   1117          	
   1118          	CreateTracks();					// Initialize trackTable
   \   00000008   ........           BL       CreateTracks
   1119          
   1120          	if ((retval = ReadDataStructures()) != 0)
   \   0000000C   ........           BL       ReadDataStructures
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0500000A           BEQ      ??InitializeTraqmateData_0
   1121          #ifndef _WINDOWS
   1122          		if (unsavedSysData.sdCardInserted)			// Only tell the user about missing files if the SD card is actually present!
   \   00000018   ........           LDR      R1,??DataTable98_9
   \   0000001C   C01091E5           LDR      R1,[R1, #+192]
   \   00000020   000051E3           CMP      R1,#+0
   \   00000024   0000000A           BEQ      ??InitializeTraqmateData_1
   1123          #endif
   1124          			DisplayInvalidFilesPopup(retval);
   \   00000028   ........           BL       DisplayInvalidFilesPopup
   1125          
   1126          	ResetAllFileLists(false);		// Reset file lists without calling CreateTracks
   \                     ??InitializeTraqmateData_1:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \                     ??InitializeTraqmateData_0:
   \   00000030   04D08DE2           ADD      SP,SP,#+4
   \   00000034   0040BDE8           POP      {LR}
   \   00000038   ........           B        ResetAllFileLists  ;; tailcall
   1127          }
   1128          
   1129          //
   1130          // Invalid files found at startup
   1131          // Tell user what failed
   1132          //

   \                                 In section .bss, align 4
   1133          char fileList[100];
   \                     fileList:
   \   00000000                      DS8 100
   1134          

   \                                 In section .text, align 4, keep-with-next
   1135          void DisplayInvalidFilesPopup(int files)
   1136          {
   \                     DisplayInvalidFilesPopup:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0CD04DE2           SUB      SP,SP,#+12
   1137          	char anyItemSet = false;
   \   0000000C   0050A0E3           MOV      R5,#+0
   1138          
   1139          static const GUI_WIDGET_CREATE_INFO InvalidFilesResources[] = {
   1140          	{ FRAMEWIN_CreateIndirect, "Check Your Settings", 0, 30, 20, 400, 220, 0, 0 },
   1141          	{ TEXT_CreateIndirect, "The following configuration(s)", 0, 0, 10, 390, 30, TEXT_CF_HCENTER },
   1142          	{ TEXT_CreateIndirect, "were set to defaults:",    0, 0, 40, 390, 30, TEXT_CF_HCENTER },
   1143          	{ BUTTON_CreateIndirect, "OK", GUI_ID_OK, 145, 115, 100, 60 },
   1144          };
   1145          
   1146          	SetPopupDefaults(WARNING_POPUP);
   \   00000010   0100A0E3           MOV      R0,#+1
   \   00000014   ........           BL       SetPopupDefaults
   1147          
   1148          	glbBlackoutFlag = true;			// Suspend gauge screen updates while the modal popup dialog box is diaplyed
   \   00000018   ........           LDR      R0,??DataTable98_14
   \   0000001C   0160A0E3           MOV      R6,#+1
   \   00000020   006080E5           STR      R6,[R0, #+0]
   1149          
   1150          	systemSettingsPopupScreen = INVALID_FILES;
   \   00000024   ........           LDR      R0,??DataTable101_1
   1151          
   1152          	fileList[0] = 0;
   \   00000028   ........           LDR      R7,??DataTable101_2
   \   0000002C   0810A0E3           MOV      R1,#+8
   \   00000030   001080E5           STR      R1,[R0, #+0]
   \   00000034   0050C7E5           STRB     R5,[R7, #+0]
   1153          	if (files & INVALID_SYSTEM_DATA)
   \   00000038   010014E3           TST      R4,#0x1
   \   0000003C   0400000A           BEQ      ??DisplayInvalidFilesPopup_0
   1154          	{
   1155          		strcat(fileList, "System");
   \   00000040   ............       ADRL     R1,`?<Constant "System">`
   \              ....        
   \   00000048   0700A0E1           MOV      R0,R7
   \   0000004C   ........           BL       strcat
   1156          		anyItemSet = true;
   \   00000050   0150A0E3           MOV      R5,#+1
   1157          	}
   1158          	if (files & INVALID_VEHICLE_DATA)
   \                     ??DisplayInvalidFilesPopup_0:
   \   00000054   020014E3           TST      R4,#0x2
   \   00000058   0A00000A           BEQ      ??DisplayInvalidFilesPopup_1
   1159          	{
   1160          		if (anyItemSet)
   \   0000005C   000055E3           CMP      R5,#+0
   \   00000060   0300000A           BEQ      ??DisplayInvalidFilesPopup_2
   1161          			strcat(fileList, ", ");
   \   00000064   ........           ADR      R1,??DataTable98_1  ;; 0x2C, 0x20, 0x00, 0x00
   \   00000068   0700A0E1           MOV      R0,R7
   \   0000006C   ........           BL       strcat
   \   00000070   000000EA           B        ??DisplayInvalidFilesPopup_3
   1162          		else anyItemSet = true;
   \                     ??DisplayInvalidFilesPopup_2:
   \   00000074   0150A0E3           MOV      R5,#+1
   1163          		strcat(fileList, "Vehicle");
   \                     ??DisplayInvalidFilesPopup_3:
   \   00000078   ............       ADRL     R1,`?<Constant "Vehicle">`
   \              ....        
   \   00000080   0700A0E1           MOV      R0,R7
   \   00000084   ........           BL       strcat
   1164          	}
   1165          	if (files & INVALID_TRACK_DATA)
   \                     ??DisplayInvalidFilesPopup_1:
   \   00000088   040014E3           TST      R4,#0x4
   \   0000008C   0A00000A           BEQ      ??DisplayInvalidFilesPopup_4
   1166          	{
   1167          		if (anyItemSet)
   \   00000090   000055E3           CMP      R5,#+0
   \   00000094   0300000A           BEQ      ??DisplayInvalidFilesPopup_5
   1168          			strcat(fileList, ", ");
   \   00000098   ........           ADR      R1,??DataTable98_1  ;; 0x2C, 0x20, 0x00, 0x00
   \   0000009C   0700A0E1           MOV      R0,R7
   \   000000A0   ........           BL       strcat
   \   000000A4   000000EA           B        ??DisplayInvalidFilesPopup_6
   1169          		else anyItemSet = true;
   \                     ??DisplayInvalidFilesPopup_5:
   \   000000A8   0150A0E3           MOV      R5,#+1
   1170          		strcat(fileList, "Track");
   \                     ??DisplayInvalidFilesPopup_6:
   \   000000AC   ............       ADRL     R1,`?<Constant "Track">`
   \              ....        
   \   000000B4   0700A0E1           MOV      R0,R7
   \   000000B8   ........           BL       strcat
   1171          	}
   1172          	if (files & INVALID_DRIVER_DATA)
   \                     ??DisplayInvalidFilesPopup_4:
   \   000000BC   080014E3           TST      R4,#0x8
   \   000000C0   0800000A           BEQ      ??DisplayInvalidFilesPopup_7
   1173          	{
   1174          		if (anyItemSet)
   \   000000C4   000055E3           CMP      R5,#+0
   \   000000C8   0200000A           BEQ      ??DisplayInvalidFilesPopup_8
   1175          			strcat(fileList, ", ");
   \   000000CC   ........           ADR      R1,??DataTable98_1  ;; 0x2C, 0x20, 0x00, 0x00
   \   000000D0   0700A0E1           MOV      R0,R7
   \   000000D4   ........           BL       strcat
   1176          		else anyItemSet = true;
   1177          		strcat(fileList, "Driver");
   \                     ??DisplayInvalidFilesPopup_8:
   \   000000D8   ............       ADRL     R1,`?<Constant "Driver">`
   \              ....        
   \   000000E0   0700A0E1           MOV      R0,R7
   \   000000E4   ........           BL       strcat
   1178          	}
   1179          
   1180          	GUI_ExecDialogBox(InvalidFilesResources, GUI_COUNTOF(InvalidFilesResources), &popupCallback, WM_GetDesktopWindow(), 10, 10);
   \                     ??DisplayInvalidFilesPopup_7:
   \   000000E8   ........           BL       WM_GetDesktopWindow
   \   000000EC   0A10A0E3           MOV      R1,#+10
   \   000000F0   04108DE5           STR      R1,[SP, #+4]
   \   000000F4   00108DE5           STR      R1,[SP, #+0]
   \   000000F8   0030A0E1           MOV      R3,R0
   \   000000FC   ........           LDR      R2,??DataTable101
   \   00000100   0410A0E3           MOV      R1,#+4
   \   00000104   ............       ADRL     R0,??InvalidFilesResources
   \              ....        
   \   0000010C   ........           BL       GUI_ExecDialogBox
   1181          }
   \   00000110   0CD08DE2           ADD      SP,SP,#+12       ;; stack cleaning
   \   00000114   F080BDE8           POP      {R4-R7,PC}       ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??InvalidFilesResources:
   \   00000000                      ; Initializer data, 96 bytes
   \   00000000   ............       DC32 FRAMEWIN_CreateIndirect, `?<Constant "Check Your Settings">`
   \              ....        
   \   00000008   00001E001400       DC16 0, 30, 20, 400, 220, 0
   \              9001DC000000
   \   00000014   00000000....       DC32 0, TEXT_CreateIndirect, `?<Constant "The following configu...">`
   \              ............
   \   00000020   000000000A00       DC16 0, 0, 10, 390, 30, 2
   \              86011E000200
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \   00000030   ............       DC32 TEXT_CreateIndirect, `?<Constant "were set to defaults:">`
   \              ....        
   \   00000038   000000002800       DC16 0, 0, 40, 390, 30, 2
   \              86011E000200
   \   00000044   00000000           DC8 0, 0, 0, 0
   \   00000048   ............       DC32 BUTTON_CreateIndirect, `?<Constant "OK">`
   \              ....        
   \   00000050   010091007300       DC16 1, 145, 115, 100, 60
   \              64003C00    
   \   0000005A   000000000000       DC8 0, 0, 0, 0, 0, 0
   1182          

   \                                 In section .text, align 4, keep-with-next
   1183          void AskAndDoFormatSDCard(void)
   1184          {
   \                     AskAndDoFormatSDCard:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1185          	// SD card not formatted
   1186          	WM_HWIN hWin;
   1187          
   1188          	if (SystemSettingsPopUp(INVALID_SDCARD, hWin = WM_GetDesktopWindow()))	// Tell the user the SD card is invalid
   \   00000004   ........           BL       WM_GetDesktopWindow
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0410A0E1           MOV      R1,R4
   \   00000010   0D00A0E3           MOV      R0,#+13
   \   00000014   ........           BL       SystemSettingsPopUp
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   0600000A           BEQ      ??AskAndDoFormatSDCard_0
   1189          		if (SystemSettingsPopUp(FORMAT_SDCARD, hWin))						// See if the user is willing to format this SD card
   \   00000020   0410A0E1           MOV      R1,R4
   \   00000024   0300A0E3           MOV      R0,#+3
   \   00000028   ........           BL       SystemSettingsPopUp
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0100000A           BEQ      ??AskAndDoFormatSDCard_0
   1190          			FormatSDCard(hWin);												// yes, yes - format the card!
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   ........           BL       FormatSDCard
   1191          }
   \                     ??AskAndDoFormatSDCard_0:
   \   0000003C   1080BDE8           POP      {R4,PC}          ;; return
   1192          

   \                                 In section .text, align 4, keep-with-next
   1193          void CreateProgressBar( PROGBAR_Handle *hProgBar, int maxval) {
   \                     CreateProgressBar:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   1194          	*hProgBar = PROGBAR_CreateEx( 90, 170, 300, 70, 0, WM_CF_SHOW, PROGBAR_CF_HORIZONTAL, 1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   0C008DE5           STR      R0,[SP, #+12]
   \   00000014   0000A0E3           MOV      R0,#+0
   \   00000018   08008DE5           STR      R0,[SP, #+8]
   \   0000001C   0200A0E3           MOV      R0,#+2
   \   00000020   04008DE5           STR      R0,[SP, #+4]
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   0150A0E1           MOV      R5,R1
   \   0000002C   00008DE5           STR      R0,[SP, #+0]
   \   00000030   4630A0E3           MOV      R3,#+70
   \   00000034   4B2FA0E3           MOV      R2,#+300
   \   00000038   AA10A0E3           MOV      R1,#+170
   \   0000003C   5A00A0E3           MOV      R0,#+90
   \   00000040   ........           BL       PROGBAR_CreateEx
   \   00000044   000084E5           STR      R0,[R4, #+0]
   1195          	PROGBAR_SetFont(*hProgBar, &GUI_Font32_ASCII);
   \   00000048   ........           LDR      R1,??DataTable101_4
   \   0000004C   ........           BL       PROGBAR_SetFont
   1196          	PROGBAR_SetTextColor(*hProgBar, 0, GUI_BLACK);
   \   00000050   0020A0E3           MOV      R2,#+0
   \   00000054   0010A0E3           MOV      R1,#+0
   \   00000058   000094E5           LDR      R0,[R4, #+0]
   \   0000005C   ........           BL       PROGBAR_SetTextColor
   1197          	PROGBAR_SetTextColor(*hProgBar, 1, GUI_WHITE);
   \   00000060   FF24E0E3           MVN      R2,#-16777216
   \   00000064   0110A0E3           MOV      R1,#+1
   \   00000068   000094E5           LDR      R0,[R4, #+0]
   \   0000006C   ........           BL       PROGBAR_SetTextColor
   1198          	PROGBAR_SetMinMax(*hProgBar, 0, maxval);
   \   00000070   0520A0E1           MOV      R2,R5
   \   00000074   0010A0E3           MOV      R1,#+0
   \   00000078   000094E5           LDR      R0,[R4, #+0]
   \   0000007C   ........           BL       PROGBAR_SetMinMax
   1199          	PROGBAR_SetBarColor(*hProgBar, 0, GUI_GREEN);
   \   00000080   FF2CA0E3           MOV      R2,#+65280
   \   00000084   0010A0E3           MOV      R1,#+0
   \   00000088   000094E5           LDR      R0,[R4, #+0]
   \   0000008C   ........           BL       PROGBAR_SetBarColor
   1200          	PROGBAR_SetBarColor(*hProgBar, 1, GUI_BLACK);
   \   00000090   0020A0E3           MOV      R2,#+0
   \   00000094   0110A0E3           MOV      R1,#+1
   \   00000098   000094E5           LDR      R0,[R4, #+0]
   \   0000009C   ........           BL       PROGBAR_SetBarColor
   1201          	WIDGET_SetEffect(*hProgBar, &WIDGET_Effect_3D);
   \   000000A0   000094E5           LDR      R0,[R4, #+0]
   \   000000A4   14D08DE2           ADD      SP,SP,#+20
   \   000000A8   3040BDE8           POP      {R4,R5,LR}
   \   000000AC   ........           LDR      R1,??DataTable103
   \   000000B0   ........           B        WIDGET_SetEffect  ;; tailcall
   1202          }
   1203          
   1204          #ifndef _WINDOWS

   \                                 In section .text, align 4, keep-with-next
   1205          void WriteCodeImage(void) {
   \                     WriteCodeImage:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   5DDF4DE2           SUB      SP,SP,#+372
   \   00000008   40DE4DE2           SUB      SP,SP,#+1024
   1206          	FS_FILE *pFile;								// file handle
   1207          	char pagebuff[MAX_PAGE_64MBIT];				// max size for flash buffer
   1208          	unsigned long bytesread, totalbytes;		// progress counters
   1209          	u16 pagenum;								// which flash page are we writing
   1210          	int rev;									// which rev is code data file
   1211          	PROGBAR_Handle hProgBar;					// progress bar
   1212          #ifdef BUILD_DEBUG_PORT
   1213          	char tempstr[60];							// for writing debug messages
   1214          #endif
   1215          	
   1216          #define TRAQDASHCODENAME		"tdfirm"		// traqdash firmware
   1217          #define TRAQDASHBOOTNAME		"tdboot"		// traqdash bootloader
   1218          #define SUCODENAME				"sufirm"		// su firmware
   1219          #define CODENAMESIZE			6				// length of strings above
   1220          
   1221          #define TRAQMATECODEEXT			"tqc"			// application code
   1222          #define TRAQMATEBOOTEXT			"tqb"			// bootloader code
   1223          #define EXTNAMESIZE				3				// length of strings above
   1224          
   1225          #define CODEFILENAMESIZE	(CODENAMESIZE + 3 + 1 + EXTNAMESIZE)		// file name size of code files
   1226          									// valid code update filenames in format AAAAAANNN.TQC
   1227          									// where AAAAA is TDCODE, TDBOOT, or SUCODE
   1228          									// NNN is 3 digit number
   1229          									// TQC is extension for all Traqmate code
   1230          #define CODEFILENAMEDOT		(CODEFILENAMESIZE - 4)
   1231          #define CODEFILENAMEEXT		(CODEFILENAMEDOT + 1)
   1232          #define CODEFILENAMEDIGITS	(CODEFILENAMEDOT - 3)
   1233          
   1234          FS_FIND_DATA findstruct;
   1235          char filename[MAX_FILENAME_SIZE];		// where to stash the filename
   1236          typedef struct {
   1237          	char name[CODEFILENAMESIZE+1];
   1238          	int rev;
   1239          } codefilestruct;
   1240          
   1241          codefilestruct codefiles[NOMATCH] =	{				// 0 = su code, 1 = traqdash boot, 3 = traqdash code
   1242          	{ "", 0 },
   1243          	{ "", 0 },
   1244          	{ "", 0 } };
   \   0000000C   40008DE2           ADD      R0,SP,#+64
   \   00000010   0010A0E3           MOV      R1,#+0
   \   00000014   0020A0E3           MOV      R2,#+0
   \   00000018   0030A0E3           MOV      R3,#+0
   \   0000001C   00C0A0E3           MOV      R12,#+0
   \   00000020   0E10A0E8           STM      R0!,{R1-R3,R12}
   \   00000024   0E10A0E8           STM      R0!,{R1-R3,R12}
   \   00000028   0E10A0E8           STM      R0!,{R1-R3,R12}
   \   0000002C   0E00A0E8           STM      R0!,{R1-R3}
   1245          
   1246          codefiletypes whichcodefile;
   1247          
   1248          	// step through directory looking for code files
   1249          	if (0 == FS_FindFirstFile(&findstruct, "\\", filename, MAX_FILENAME_SIZE)) {
   \   00000030   9630A0E3           MOV      R3,#+150
   \   00000034   7C208DE2           ADD      R2,SP,#+124
   \   00000038   611F8FE2           ADR      R1,??WriteCodeImage_0  ;; "\\"
   \   0000003C   450F8DE2           ADD      R0,SP,#+276
   \   00000040   ........           BL       FS_FindFirstFile
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   7C408DE2           ADD      R4,SP,#+124
   \   0000004C   4A00001A           BNE      ??WriteCodeImage_1
   1250          
   1251          		do {	// process file filename
   1252          			if ((CODEFILENAMESIZE == strlen(filename)) && ('.' == filename[CODEFILENAMEDOT])) {
   \                     ??WriteCodeImage_2:
   \   00000050   7C008DE2           ADD      R0,SP,#+124
   \   00000054   ........           BL       strlen
   \   00000058   0D0050E3           CMP      R0,#+13
   \   0000005C   0900D405           LDRBEQ   R0,[R4, #+9]
   \   00000060   2E005003           CMPEQ    R0,#+46
   \   00000064   4000001A           BNE      ??WriteCodeImage_3
   \   00000068   0000A0E3           MOV      R0,#+0
   \   0000006C   0900C4E5           STRB     R0,[R4, #+9]
   1253          				filename[CODEFILENAMEDOT] = '\0';
   1254          
   1255          				rev = atoi(filename + CODEFILENAMEDIGITS);
   \   00000070   0A20A0E3           MOV      R2,#+10
   \   00000074   0010A0E3           MOV      R1,#+0
   \   00000078   82008DE2           ADD      R0,SP,#+130
   \   0000007C   ........           BL       __iar_Stoul
   \   00000080   0050B0E1           MOVS     R5,R0
   1256          
   1257          				if (0 != rev) {		// no match
   \   00000084   3800000A           BEQ      ??WriteCodeImage_3
   1258          					int i;
   1259          					
   1260          					for (i=0; i < CODEFILENAMESIZE; i++) {
   \   00000088   7C008DE2           ADD      R0,SP,#+124
   \   0000008C   0D10A0E3           MOV      R1,#+13
   1261          						filename[i] = tolower(filename[i]);		// go to lowercase for comparison
   \                     ??WriteCodeImage_4:
   \   00000090   0020D0E5           LDRB     R2,[R0, #+0]
   \   00000094   413042E2           SUB      R3,R2,#+65
   \   00000098   1A0053E3           CMP      R3,#+26
   \   0000009C   20208232           ADDCC    R2,R2,#+32
   1262          					} // for
   \   000000A0   0120C0E4           STRB     R2,[R0], #+1
   \   000000A4   011051E2           SUBS     R1,R1,#+1
   \   000000A8   F8FFFF1A           BNE      ??WriteCodeImage_4
   1263          	
   1264          					whichcodefile = NOMATCH;
   1265          					if (0 == strncmp(TRAQMATECODEEXT, filename + CODEFILENAMEEXT, EXTNAMESIZE)) {
   \   000000AC   0320A0E3           MOV      R2,#+3
   \   000000B0   86108DE2           ADD      R1,SP,#+134
   \   000000B4   430F8FE2           ADR      R0,??WriteCodeImage_0+0x4  ;; "tqc"
   \   000000B8   ........           BL       strncmp
   \   000000BC   000050E3           CMP      R0,#+0
   \   000000C0   0F00001A           BNE      ??WriteCodeImage_5
   1266          						// see if it matches one of the ones we need
   1267          						if (0 == strncmp(TRAQDASHCODENAME, filename, CODENAMESIZE))
   \   000000C4   0620A0E3           MOV      R2,#+6
   \   000000C8   7C108DE2           ADD      R1,SP,#+124
   \   000000CC   ............       ADRL     R0,`?<Constant "tdfirm">`
   \              ....        
   \   000000D4   ........           BL       strncmp
   \   000000D8   000050E3           CMP      R0,#+0
   1268          							whichcodefile = CODETQ;
   \   000000DC   0100A003           MOVEQ    R0,#+1
   \   000000E0   1500000A           BEQ      ??WriteCodeImage_6
   1269          						else if (0 == strncmp(SUCODENAME, filename, CODENAMESIZE))
   \   000000E4   0620A0E3           MOV      R2,#+6
   \   000000E8   7C108DE2           ADD      R1,SP,#+124
   \   000000EC   ............       ADRL     R0,`?<Constant "sufirm">`
   \              ....        
   \   000000F4   ........           BL       strncmp
   \   000000F8   000050E3           CMP      R0,#+0
   \   000000FC   1A00001A           BNE      ??WriteCodeImage_3
   1270          							whichcodefile = CODESU;
   \   00000100   0D0000EA           B        ??WriteCodeImage_6
   1271          					} // if
   1272          					else if (0 == strncmp(TRAQMATEBOOTEXT, filename + CODEFILENAMEEXT, EXTNAMESIZE)) {
   \                     ??WriteCodeImage_5:
   \   00000104   0320A0E3           MOV      R2,#+3
   \   00000108   86108DE2           ADD      R1,SP,#+134
   \   0000010C   B8008FE2           ADR      R0,??WriteCodeImage_0+0x8  ;; "tqb"
   \   00000110   ........           BL       strncmp
   \   00000114   000050E3           CMP      R0,#+0
   \   00000118   1300001A           BNE      ??WriteCodeImage_3
   1273          						if (0 == strncmp(TRAQDASHBOOTNAME, filename, CODENAMESIZE))
   \   0000011C   0620A0E3           MOV      R2,#+6
   \   00000120   7C108DE2           ADD      R1,SP,#+124
   \   00000124   ............       ADRL     R0,`?<Constant "tdboot">`
   \              ....        
   \   0000012C   ........           BL       strncmp
   \   00000130   000050E3           CMP      R0,#+0
   \   00000134   0C00001A           BNE      ??WriteCodeImage_3
   1274          							whichcodefile = BOOTTQ;
   \   00000138   0200A0E3           MOV      R0,#+2
   1275          					} // else if
   1276          					
   1277          					if (NOMATCH != whichcodefile) {
   1278          						if (rev > codefiles[whichcodefile].rev) {					// only remember the latest of each type
   \                     ??WriteCodeImage_6:
   \   0000013C   1410A0E3           MOV      R1,#+20
   \   00000140   40208DE2           ADD      R2,SP,#+64
   \   00000144   812006E1           SMLABB   R6,R1,R0,R2
   \   00000148   100096E5           LDR      R0,[R6, #+16]
   \   0000014C   050050E1           CMP      R0,R5
   \   00000150   050000AA           BGE      ??WriteCodeImage_3
   1279          							filename[CODEFILENAMEDOT] = '.';						// put the dot back
   \   00000154   2E00A0E3           MOV      R0,#+46
   \   00000158   0900C4E5           STRB     R0,[R4, #+9]
   1280          							strcpy(codefiles[whichcodefile].name, filename);		// save filename for later
   \   0000015C   7C108DE2           ADD      R1,SP,#+124
   \   00000160   0600A0E1           MOV      R0,R6
   \   00000164   ........           BL       strcpy
   1281          							codefiles[whichcodefile].rev = rev;
   \   00000168   105086E5           STR      R5,[R6, #+16]
   1282          						} // if
   1283          					 } // if
   1284          				} // if
   1285          			} // if
   1286          			
   1287          		} while (0 != FS_FindNextFile(&findstruct));
   \                     ??WriteCodeImage_3:
   \   0000016C   450F8DE2           ADD      R0,SP,#+276
   \   00000170   ........           BL       FS_FindNextFile
   \   00000174   000050E3           CMP      R0,#+0
   \   00000178   B4FFFF1A           BNE      ??WriteCodeImage_2
   1288          	} // if
   1289          
   1290          	// clean up
   1291          	FS_FindClose(&findstruct);
   \                     ??WriteCodeImage_1:
   \   0000017C   450F8DE2           ADD      R0,SP,#+276
   \   00000180   ........           BL       FS_FindClose
   \   00000184   50108DE2           ADD      R1,SP,#+80
   \   00000188   0080A0E3           MOV      R8,#+0
   \   0000018C   14108DE5           STR      R1,[SP, #+20]
   \   00000190   ........           LDR      R4,??DataTable103_1
   \   00000194   ........           LDR      R5,??DataTable103_3
   \   00000198   ........           LDR      R6,??DataTable103_4
   1292          
   1293          	// process the files that we found
   1294          	for (whichcodefile = CODESU; whichcodefile < NOMATCH; whichcodefile++) {
   1295          		if (0 != codefiles[whichcodefile].rev) {
   \                     ??WriteCodeImage_7:
   \   0000019C   14009DE5           LDR      R0,[SP, #+20]
   \   000001A0   000090E5           LDR      R0,[R0, #+0]
   \   000001A4   000050E3           CMP      R0,#+0
   \   000001A8   2B02000A           BEQ      ??WriteCodeImage_8
   1296          			switch (whichcodefile) {
   \   000001AC   000058E3           CMP      R8,#+0
   \   000001B0   0600000A           BEQ      ??WriteCodeImage_9
   \   000001B4   020058E3           CMP      R8,#+2
   \   000001B8   0E01000A           BEQ      ??WriteCodeImage_10
   \   000001BC   0D01003A           BCC      ??WriteCodeImage_10
   \   000001C0   250200EA           B        ??WriteCodeImage_8
   \                     ??WriteCodeImage_0:
   \   000001C4   5C000000           DC8      "\\",0x0,0x0
   \   000001C8   74716300           DC8      "tqc"
   \   000001CC   74716200           DC8      "tqb"
   1297          				case CODESU: {
   1298          
   1299          					if (0 != suData.suSwRev) {					// only attempt SU reflash if we have made contact with SU
   \                     ??WriteCodeImage_9:
   \   000001D0   ........           LDR      R0,??DataTable103_5
   \   000001D4   B001D0E1           LDRH     R0,[R0, #+16]
   \   000001D8   000050E3           CMP      R0,#+0
   \   000001DC   1E02000A           BEQ      ??WriteCodeImage_8
   1300          						if (suData.suSwRev < codefiles[whichcodefile].rev) {		// and make sure SU code is newer
   \   000001E0   50109DE5           LDR      R1,[SP, #+80]
   \   000001E4   010050E1           CMP      R0,R1
   \   000001E8   1B0200AA           BGE      ??WriteCodeImage_8
   1301          
   1302          							// give SU a chance to finish boot up
   1303          							OS_Delay(2500);
   \   000001EC   C400A0E3           MOV      R0,#+196
   \   000001F0   900E80E3           ORR      R0,R0,#0x900
   \   000001F4   ........           BL       OS_Delay
   1304          
   1305          							// give user chance to back out
   1306          							if (!ReFlashYorN(CODESU, codefiles[whichcodefile].rev))
   \   000001F8   50909DE5           LDR      R9,[SP, #+80]
   \   000001FC   0300A0E3           MOV      R0,#+3
   \   00000200   ........           BL       SetPopupDefaults
   \   00000204   18008DE2           ADD      R0,SP,#+24
   \   00000208   4C0085E5           STR      R0,[R5, #+76]
   \   0000020C   ........           LDR      R0,??DataTable103_5
   \   00000210   B071D0E1           LDRH     R7,[R0, #+16]
   \   00000214   ............       ADRL     R0,`?<Constant "NEW SU FIRMWARE FOUND">`
   \              ....        
   \   0000021C   040085E5           STR      R0,[R5, #+4]
   \   00000220   ............       ADRL     R0,`?<Constant "Update Connected SU F...">`
   \              ....        
   \   00000228   640085E5           STR      R0,[R5, #+100]
   \   0000022C   0900A0E1           MOV      R0,R9
   \   00000230   ........           BL       __aeabi_i2f
   \   00000234   ........           BL       __aeabi_f2d
   \   00000238   4034A0E3           MOV      R3,#+1073741824
   \   0000023C   0020A0E3           MOV      R2,#+0
   \   00000240   593883E3           ORR      R3,R3,#0x590000
   \   00000244   ........           BL       __aeabi_ddiv
   \   00000248   03008DE8           STM      SP,{R0,R1}
   \   0000024C   0700A0E1           MOV      R0,R7
   \   00000250   ........           BL       __aeabi_i2f
   \   00000254   ........           BL       __aeabi_f2d
   \   00000258   4034A0E3           MOV      R3,#+1073741824
   \   0000025C   0020A0E3           MOV      R2,#+0
   \   00000260   593883E3           ORR      R3,R3,#0x590000
   \   00000264   ........           BL       __aeabi_ddiv
   \   00000268   0020A0E1           MOV      R2,R0
   \   0000026C   0130A0E1           MOV      R3,R1
   \   00000270   ............       ADRL     R1,`?<Constant "Current Rev %1.2f, Ne...">`
   \              ....        
   \   00000278   18008DE2           ADD      R0,SP,#+24
   \   0000027C   ........           BL       sprintf
   \   00000280   ........           BL       WM_GetDesktopWindow
   \   00000284   0A10A0E3           MOV      R1,#+10
   \   00000288   04108DE5           STR      R1,[SP, #+4]
   \   0000028C   00108DE5           STR      R1,[SP, #+0]
   \   00000290   0030A0E1           MOV      R3,R0
   \   00000294   ........           LDR      R2,??DataTable101
   \   00000298   0610A0E3           MOV      R1,#+6
   \   0000029C   0500A0E1           MOV      R0,R5
   \   000002A0   ........           BL       GUI_ExecDialogBox
   \   000002A4   010050E3           CMP      R0,#+1
   \   000002A8   EB01001A           BNE      ??WriteCodeImage_8
   \   000002AC   ........           BL       StopTouchScreenScan
   1307          								break;
   1308          #ifdef BUILD_DEBUG_PORT
   1309          							sprintf(tempstr, "SU code program, file = %s, rev = %d \n\r", codefiles[whichcodefile].name, codefiles[whichcodefile].rev);
   1310          							DBGU_Print(tempstr);
   1311          #endif
   1312          							// change mode and notify tasks
   1313          							SetUserMode(DU2_REPROGRAMMING_SU);
   \   000002B0   1F00A0E3           MOV      R0,#+31
   \   000002B4   ........           BL       SetUserMode
   1314          							
   1315          							// Attempt to read SD card code binary file
   1316          							if (NULL == (pFile = FS_FOpen(codefiles[whichcodefile].name, "r")))
   \   000002B8   D11F8FE2           ADR      R1,??WriteCodeImage_11  ;; "r"
   \   000002BC   40008DE2           ADD      R0,SP,#+64
   \   000002C0   ........           BL       FS_FOpen
   \   000002C4   0070B0E1           MOVS     R7,R0
   \   000002C8   E301000A           BEQ      ??WriteCodeImage_8
   1317          								break;
   1318          							else {		// opened the file						
   1319          								char destaddr;
   1320          								char cksum;
   1321          								BOOL downloaderror = FALSE;
   1322          
   1323          								CreateProgressBar(&hProgBar, NUMBER_OF_DOWNLOAD_MSGS);							
   \   000002CC   0100A0E3           MOV      R0,#+1
   \   000002D0   0C008DE5           STR      R0,[SP, #+12]
   \   000002D4   0000A0E3           MOV      R0,#+0
   \   000002D8   08008DE5           STR      R0,[SP, #+8]
   \   000002DC   0200A0E3           MOV      R0,#+2
   \   000002E0   04008DE5           STR      R0,[SP, #+4]
   \   000002E4   0000A0E3           MOV      R0,#+0
   \   000002E8   00008DE5           STR      R0,[SP, #+0]
   \   000002EC   4630A0E3           MOV      R3,#+70
   \   000002F0   4B2FA0E3           MOV      R2,#+300
   \   000002F4   AA10A0E3           MOV      R1,#+170
   \   000002F8   5A00A0E3           MOV      R0,#+90
   \   000002FC   ........           BL       PROGBAR_CreateEx
   \   00000300   0090A0E1           MOV      R9,R0
   \   00000304   ........           LDR      R1,??DataTable101_4
   \   00000308   ........           BL       PROGBAR_SetFont
   \   0000030C   0020A0E3           MOV      R2,#+0
   \   00000310   0010A0E3           MOV      R1,#+0
   \   00000314   0900A0E1           MOV      R0,R9
   \   00000318   ........           BL       PROGBAR_SetTextColor
   \   0000031C   FF24E0E3           MVN      R2,#-16777216
   \   00000320   0110A0E3           MOV      R1,#+1
   \   00000324   0900A0E1           MOV      R0,R9
   \   00000328   ........           BL       PROGBAR_SetTextColor
   \   0000032C   8020A0E3           MOV      R2,#+128
   \   00000330   0010A0E3           MOV      R1,#+0
   \   00000334   0900A0E1           MOV      R0,R9
   \   00000338   ........           BL       PROGBAR_SetMinMax
   \   0000033C   FF2CA0E3           MOV      R2,#+65280
   \   00000340   0010A0E3           MOV      R1,#+0
   \   00000344   0900A0E1           MOV      R0,R9
   \   00000348   ........           BL       PROGBAR_SetBarColor
   \   0000034C   0020A0E3           MOV      R2,#+0
   \   00000350   0110A0E3           MOV      R1,#+1
   \   00000354   0900A0E1           MOV      R0,R9
   \   00000358   ........           BL       PROGBAR_SetBarColor
   \   0000035C   ........           LDR      R1,??DataTable103
   \   00000360   0900A0E1           MOV      R0,R9
   \   00000364   ........           BL       WIDGET_SetEffect
   1324          								OS_Delay(1000);					// wait for things to quiet down
   \   00000368   FA0FA0E3           MOV      R0,#+1000
   \   0000036C   ........           BL       OS_Delay
   1325          								
   1326          								PROGBAR_SetText(hProgBar, "Sending");
   \   00000370   ............       ADRL     R1,`?<Constant "Sending">`
   \              ....        
   \   00000378   0900A0E1           MOV      R0,R9
   \   0000037C   ........           BL       PROGBAR_SetText
   1327          								GUI_Exec();
   \   00000380   ........           BL       GUI_Exec
   1328          
   1329          								// get the first byte = destination
   1330          								FS_Read(pFile, &destaddr, 1);
   \   00000384   0120A0E3           MOV      R2,#+1
   \   00000388   10108DE2           ADD      R1,SP,#+16
   \   0000038C   0700A0E1           MOV      R0,R7
   \   00000390   ........           BL       FS_Read
   1331          								
   1332          								// tell SU to start the reprogramming process
   1333          								com[msgrouting[SENSOR_UNIT]].txbuff[DATA_START] = (unsigned char) START_DOWNLOAD; // change operating mode
   \   00000394   ........           LDR      R0,??DataTable103_6
   \   00000398   ........           LDR      R2,??DataTable103_7
   \   0000039C   D200D0E1           LDRSB    R0,[R0, #+2]
   \   000003A0   1810A0E3           MOV      R1,#+24
   1334          								SendMessage((u08) DISPLAY_UNIT, destaddr, (u08) MODE_CHANGE, 1);
   \   000003A4   0130A0E3           MOV      R3,#+1
   \   000003A8   80210AE1           SMLABB   R10,R0,R1,R2
   \   000003AC   F010A0E3           MOV      R1,#+240
   \   000003B0   10009AE5           LDR      R0,[R10, #+16]
   \   000003B4   9120A0E3           MOV      R2,#+145
   \   000003B8   0710C0E5           STRB     R1,[R0, #+7]
   \   000003BC   1010DDE5           LDRB     R1,[SP, #+16]
   \   000003C0   0300A0E3           MOV      R0,#+3
   \   000003C4   ........           BL       SendMessage
   1335          								WAIT_ACK(destaddr);
   \   000003C8   1000DDE5           LDRB     R0,[SP, #+16]
   \   000003CC   040080E0           ADD      R0,R0,R4
   \   000003D0   010050E5           LDRB     R0,[R0, #-1]
   \   000003D4   000050E3           CMP      R0,#+0
   \   000003D8   0600000A           BEQ      ??WriteCodeImage_12
   \                     ??WriteCodeImage_13:
   \   000003DC   0A00A0E3           MOV      R0,#+10
   \   000003E0   ........           BL       OS_Delay
   \   000003E4   1000DDE5           LDRB     R0,[SP, #+16]
   \   000003E8   040080E0           ADD      R0,R0,R4
   \   000003EC   010050E5           LDRB     R0,[R0, #-1]
   \   000003F0   000050E3           CMP      R0,#+0
   \   000003F4   F8FFFF1A           BNE      ??WriteCodeImage_13
   1336          							
   1337          								for (pagenum = 0; pagenum < NUMBER_OF_DOWNLOAD_MSGS; pagenum++) {
   \                     ??WriteCodeImage_12:
   \   000003F8   00B0A0E3           MOV      R11,#+0
   1338          									// read each page and send it over
   1339          									if (CODE_DOWNLOAD_SIZE != FS_Read(pFile, &(com[msgrouting[SENSOR_UNIT]].txbuff[DATA_START]), CODE_DOWNLOAD_SIZE)) {
   \                     ??WriteCodeImage_14:
   \   000003FC   10009AE5           LDR      R0,[R10, #+16]
   \   00000400   802FA0E3           MOV      R2,#+512
   \   00000404   071080E2           ADD      R1,R0,#+7
   \   00000408   0700A0E1           MOV      R0,R7
   \   0000040C   ........           BL       FS_Read
   \   00000410   800F50E3           CMP      R0,#+512
   \   00000414   6000001A           BNE      ??WriteCodeImage_15
   1340          										downloaderror = TRUE;
   1341          										break;
   1342          									} // if
   1343          							
   1344          									// send a 512 byte chunk over to SU
   1345          									SendMessage((u08) DISPLAY_UNIT, destaddr, (u08) SW_DOWNLOAD, CODE_DOWNLOAD_SIZE);	
   \   00000418   803FA0E3           MOV      R3,#+512
   \   0000041C   5020A0E3           MOV      R2,#+80
   \   00000420   1010DDE5           LDRB     R1,[SP, #+16]
   \   00000424   0300A0E3           MOV      R0,#+3
   \   00000428   ........           BL       SendMessage
   1346          									WAIT_ACK(destaddr);
   \   0000042C   1000DDE5           LDRB     R0,[SP, #+16]
   \   00000430   040080E0           ADD      R0,R0,R4
   \   00000434   010050E5           LDRB     R0,[R0, #-1]
   \   00000438   000050E3           CMP      R0,#+0
   \   0000043C   0600000A           BEQ      ??WriteCodeImage_16
   \                     ??WriteCodeImage_17:
   \   00000440   0A00A0E3           MOV      R0,#+10
   \   00000444   ........           BL       OS_Delay
   \   00000448   1000DDE5           LDRB     R0,[SP, #+16]
   \   0000044C   040080E0           ADD      R0,R0,R4
   \   00000450   010050E5           LDRB     R0,[R0, #-1]
   \   00000454   000050E3           CMP      R0,#+0
   \   00000458   F8FFFF1A           BNE      ??WriteCodeImage_17
   1347          
   1348          									PROGBAR_SetValue(hProgBar, pagenum);		// update the user
   \                     ??WriteCodeImage_16:
   \   0000045C   0B10A0E1           MOV      R1,R11
   \   00000460   0900A0E1           MOV      R0,R9
   \   00000464   ........           BL       PROGBAR_SetValue
   1349          									GUI_Exec();
   \   00000468   ........           BL       GUI_Exec
   1350          								} // while
   \   0000046C   01B08BE2           ADD      R11,R11,#+1
   \   00000470   0BB8A0E1           LSL      R11,R11,#+16
   \   00000474   2BB8A0E1           LSR      R11,R11,#+16
   \   00000478   80005BE3           CMP      R11,#+128
   \   0000047C   DEFFFF3A           BCC      ??WriteCodeImage_14
   1351          							
   1352          								if (downloaderror) {								
   1353          									PROGBAR_SetText(hProgBar, "Error");
   1354          									GUI_Exec();
   1355          									// tell SU to cancel the reprogramming process
   1356          									SendMessage((u08) DISPLAY_UNIT, destaddr, (u08) CANCEL_DOWNLOAD, 0);	
   1357          									WAIT_ACK(destaddr);
   1358          								} // if
   1359          								else {
   1360          									// tell SU that download is finished
   1361          									com[msgrouting[SENSOR_UNIT]].txbuff[DATA_START] = (unsigned char) DOWNLOAD_COMPLETE;
   \   00000480   10009AE5           LDR      R0,[R10, #+16]
   \   00000484   F110A0E3           MOV      R1,#+241
   \   00000488   0710C0E5           STRB     R1,[R0, #+7]
   1362          									SendMessage((u08) DISPLAY_UNIT, destaddr, (u08) MODE_CHANGE, 1);	
   \   0000048C   0130A0E3           MOV      R3,#+1
   \   00000490   9120A0E3           MOV      R2,#+145
   \   00000494   1010DDE5           LDRB     R1,[SP, #+16]
   \   00000498   0300A0E3           MOV      R0,#+3
   \   0000049C   ........           BL       SendMessage
   1363          									WAIT_ACK(destaddr);
   \   000004A0   1000DDE5           LDRB     R0,[SP, #+16]
   \   000004A4   040080E0           ADD      R0,R0,R4
   \   000004A8   010050E5           LDRB     R0,[R0, #-1]
   \   000004AC   000050E3           CMP      R0,#+0
   \   000004B0   0600000A           BEQ      ??WriteCodeImage_18
   \                     ??WriteCodeImage_19:
   \   000004B4   0A00A0E3           MOV      R0,#+10
   \   000004B8   ........           BL       OS_Delay
   \   000004BC   1000DDE5           LDRB     R0,[SP, #+16]
   \   000004C0   040080E0           ADD      R0,R0,R4
   \   000004C4   010050E5           LDRB     R0,[R0, #-1]
   \   000004C8   000050E3           CMP      R0,#+0
   \   000004CC   F8FFFF1A           BNE      ??WriteCodeImage_19
   1364          									
   1365          									// get the checksum from the file
   1366          									FS_Read(pFile, &cksum, 1);
   \                     ??WriteCodeImage_18:
   \   000004D0   0120A0E3           MOV      R2,#+1
   \   000004D4   11108DE2           ADD      R1,SP,#+17
   \   000004D8   0700A0E1           MOV      R0,R7
   \   000004DC   ........           BL       FS_Read
   1367          									
   1368          									// sent all the sectors, now send the checksum
   1369          									com[msgrouting[SENSOR_UNIT]].txbuff[DATA_START] = cksum;
   \   000004E0   1110DDE5           LDRB     R1,[SP, #+17]
   \   000004E4   10009AE5           LDR      R0,[R10, #+16]
   1370          									SendMessage((u08) DISPLAY_UNIT, (u08) SENSOR_UNIT, (u08) SW_REPROGRAM, 1);	
   \   000004E8   0130A0E3           MOV      R3,#+1
   \   000004EC   0710C0E5           STRB     R1,[R0, #+7]
   \   000004F0   5120A0E3           MOV      R2,#+81
   \   000004F4   0210A0E3           MOV      R1,#+2
   \   000004F8   0300A0E3           MOV      R0,#+3
   \   000004FC   ........           BL       SendMessage
   1371          									WAIT_ACK(destaddr);
   \   00000500   1000DDE5           LDRB     R0,[SP, #+16]
   \   00000504   040080E0           ADD      R0,R0,R4
   \   00000508   010050E5           LDRB     R0,[R0, #-1]
   \   0000050C   000050E3           CMP      R0,#+0
   \   00000510   0600000A           BEQ      ??WriteCodeImage_20
   \                     ??WriteCodeImage_21:
   \   00000514   0A00A0E3           MOV      R0,#+10
   \   00000518   ........           BL       OS_Delay
   \   0000051C   1000DDE5           LDRB     R0,[SP, #+16]
   \   00000520   040080E0           ADD      R0,R0,R4
   \   00000524   010050E5           LDRB     R0,[R0, #-1]
   \   00000528   000050E3           CMP      R0,#+0
   \   0000052C   F8FFFF1A           BNE      ??WriteCodeImage_21
   1372          								} // else
   1373          							} // else
   1374          #ifdef BUILD_DEBUG_PORT
   1375          							sprintf(tempstr, "SU reprogram complete\n\r");
   1376          							DBGU_Print(tempstr);
   1377          #endif			
   1378          							FS_FClose(pFile);
   \                     ??WriteCodeImage_20:
   \   00000530   0700A0E1           MOV      R0,R7
   \   00000534   ........           BL       FS_FClose
   1379          
   1380          							PROGBAR_SetValue(hProgBar, 0);		
   \   00000538   0010A0E3           MOV      R1,#+0
   \   0000053C   0900A0E1           MOV      R0,R9
   \   00000540   ........           BL       PROGBAR_SetValue
   1381          							PROGBAR_SetText(hProgBar, "Wait for SU to Turn Off");
   \   00000544   ............       ADRL     R1,`?<Constant "Wait for SU to Turn Off">`
   \              ....        
   \   0000054C   0900A0E1           MOV      R0,R9
   \   00000550   ........           BL       PROGBAR_SetText
   1382          							GUI_Exec();
   \   00000554   ........           BL       GUI_Exec
   1383          
   1384          							// give user something to look at while SU is reflashing
   1385          							for (pagenum=0; pagenum <= NUMBER_OF_DOWNLOAD_MSGS; pagenum++) {
   \   00000558   00B0A0E3           MOV      R11,#+0
   1386          								OS_Delay(350);		// 300 is about right. 350 is extra slow to ensure completion
   \                     ??WriteCodeImage_22:
   \   0000055C   5E00A0E3           MOV      R0,#+94
   \   00000560   400F80E3           ORR      R0,R0,#0x100
   \   00000564   ........           BL       OS_Delay
   1387          								PROGBAR_SetValue(hProgBar, pagenum);
   \   00000568   0B10A0E1           MOV      R1,R11
   \   0000056C   0900A0E1           MOV      R0,R9
   \   00000570   ........           BL       PROGBAR_SetValue
   1388          								GUI_Exec();						
   \   00000574   ........           BL       GUI_Exec
   1389          							} // for
   \   00000578   01B08BE2           ADD      R11,R11,#+1
   \   0000057C   81005BE3           CMP      R11,#+129
   \   00000580   F5FFFF3A           BCC      ??WriteCodeImage_22
   1390          							
   1391          							// change mode and notify tasks
   1392          							SetUserMode(DU2_STARTUP);
   \   00000584   0000A0E3           MOV      R0,#+0
   \   00000588   ........           BL       SetUserMode
   1393          
   1394          							// just wait for powerdown
   1395          							OS_Delay(60000);
   \   0000058C   6000A0E3           MOV      R0,#+96
   \   00000590   EA0C80E3           ORR      R0,R0,#0xEA00
   \   00000594   ........           BL       OS_Delay
   \   00000598   2F0100EA           B        ??WriteCodeImage_8
   \                     ??WriteCodeImage_15:
   \   0000059C   ............       ADRL     R1,`?<Constant "Error">`
   \              ....        
   \   000005A4   0900A0E1           MOV      R0,R9
   \   000005A8   ........           BL       PROGBAR_SetText
   \   000005AC   ........           BL       GUI_Exec
   \   000005B0   0030A0E3           MOV      R3,#+0
   \   000005B4   F220A0E3           MOV      R2,#+242
   \   000005B8   1010DDE5           LDRB     R1,[SP, #+16]
   \   000005BC   0300A0E3           MOV      R0,#+3
   \   000005C0   ........           BL       SendMessage
   \   000005C4   1000DDE5           LDRB     R0,[SP, #+16]
   \   000005C8   040080E0           ADD      R0,R0,R4
   \   000005CC   010050E5           LDRB     R0,[R0, #-1]
   \   000005D0   000050E3           CMP      R0,#+0
   \   000005D4   D5FFFF0A           BEQ      ??WriteCodeImage_20
   \                     ??WriteCodeImage_23:
   \   000005D8   0A00A0E3           MOV      R0,#+10
   \   000005DC   ........           BL       OS_Delay
   \   000005E0   1000DDE5           LDRB     R0,[SP, #+16]
   \   000005E4   040080E0           ADD      R0,R0,R4
   \   000005E8   010050E5           LDRB     R0,[R0, #-1]
   \   000005EC   000050E3           CMP      R0,#+0
   \   000005F0   F8FFFF1A           BNE      ??WriteCodeImage_23
   \   000005F4   CDFFFFEA           B        ??WriteCodeImage_20
   1396          						} // if
   1397          					} // if
   1398          					
   1399          					break;
   1400          				} // case
   1401          				case BOOTTQ:
   1402          				case CODETQ: {
   1403          					unsigned int pagemismatch;
   1404          					unsigned char status;
   1405          					unsigned int firstpage;
   1406          
   1407          					// Attempt to read SD card code binary file
   1408          					if (NULL == (pFile = FS_FOpen(codefiles[whichcodefile].name, "r")))
   \                     ??WriteCodeImage_10:
   \   000005F8   14009DE5           LDR      R0,[SP, #+20]
   \   000005FC   00108FE2           ADR      R1,??WriteCodeImage_11  ;; "r"
   \   00000600   000000EA           B        ??WriteCodeImage_24
   \                     ??WriteCodeImage_11:
   \   00000604   72000000           DC8      "r",0x0,0x0
   \                     ??WriteCodeImage_24:
   \   00000608   100040E2           SUB      R0,R0,#+16
   \   0000060C   ........           BL       FS_FOpen
   \   00000610   0070B0E1           MOVS     R7,R0
   \   00000614   1001000A           BEQ      ??WriteCodeImage_8
   1409          						break;
   1410          					else {		// opened the file
   1411          						u16 rangeupper, partialrange, lastpartial;
   1412          
   1413          						if (BOOTTQ == whichcodefile) {		// TraqDash bootloader
   \   00000618   14009DE5           LDR      R0,[SP, #+20]
   \   0000061C   020058E3           CMP      R8,#+2
   \   00000620   00A090E5           LDR      R10,[R0, #+0]
   \   00000624   3500001A           BNE      ??WriteCodeImage_25
   1414          							if (unsavedSysData.unitInfo.bootloaderSwRev >= codefiles[whichcodefile].rev)
   \   00000628   6C0096E5           LDR      R0,[R6, #+108]
   \   0000062C   0A0050E1           CMP      R0,R10
   \   00000630   0901002A           BCS      ??WriteCodeImage_8
   1415          								break;				// don't update if we don't need to
   1416          							
   1417          							if (!ReFlashYorN(BOOTTQ, codefiles[whichcodefile].rev))	// ask user if they want to do it
   \   00000634   0300A0E3           MOV      R0,#+3
   \   00000638   ........           BL       SetPopupDefaults
   \   0000063C   18008DE2           ADD      R0,SP,#+24
   \   00000640   4C0085E5           STR      R0,[R5, #+76]
   \   00000644   ............       ADRL     R0,`?<Constant "NEW BOOTLOADER FOUND">`
   \              ....        
   \   0000064C   6C9096E5           LDR      R9,[R6, #+108]
   \   00000650   040085E5           STR      R0,[R5, #+4]
   \   00000654   ............       ADRL     R0,`?<Constant "Update TraqDash Bootl...">`
   \              ....        
   \   0000065C   640085E5           STR      R0,[R5, #+100]
   \   00000660   0A00A0E1           MOV      R0,R10
   \   00000664   ........           BL       __aeabi_i2f
   \   00000668   ........           BL       __aeabi_f2d
   \   0000066C   4034A0E3           MOV      R3,#+1073741824
   \   00000670   0020A0E3           MOV      R2,#+0
   \   00000674   593883E3           ORR      R3,R3,#0x590000
   \   00000678   ........           BL       __aeabi_ddiv
   \   0000067C   03008DE8           STM      SP,{R0,R1}
   \   00000680   0900A0E1           MOV      R0,R9
   \   00000684   ........           BL       __aeabi_i2f
   \   00000688   ........           BL       __aeabi_f2d
   \   0000068C   4034A0E3           MOV      R3,#+1073741824
   \   00000690   0020A0E3           MOV      R2,#+0
   \   00000694   593883E3           ORR      R3,R3,#0x590000
   \   00000698   ........           BL       __aeabi_ddiv
   \   0000069C   0020A0E1           MOV      R2,R0
   \   000006A0   0130A0E1           MOV      R3,R1
   \   000006A4   ............       ADRL     R1,`?<Constant "Current Rev %1.2f, Ne...">`
   \              ....        
   \   000006AC   18008DE2           ADD      R0,SP,#+24
   \   000006B0   ........           BL       sprintf
   \   000006B4   ........           BL       WM_GetDesktopWindow
   \   000006B8   0A10A0E3           MOV      R1,#+10
   \   000006BC   04108DE5           STR      R1,[SP, #+4]
   \   000006C0   00108DE5           STR      R1,[SP, #+0]
   \   000006C4   0030A0E1           MOV      R3,R0
   \   000006C8   ........           LDR      R2,??DataTable101
   \   000006CC   0610A0E3           MOV      R1,#+6
   \   000006D0   0500A0E1           MOV      R0,R5
   \   000006D4   ........           BL       GUI_ExecDialogBox
   \   000006D8   010050E3           CMP      R0,#+1
   \   000006DC   DE00001A           BNE      ??WriteCodeImage_8
   \   000006E0   ........           BL       StopTouchScreenScan
   1418          								break;
   1419          							
   1420          							firstpage = 0;
   \   000006E4   0010A0E3           MOV      R1,#+0
   \   000006E8   10108DE5           STR      R1,[SP, #+16]
   1421          							rangeupper = CODELOAD(0)-2;		// don't reflash the serial number at top of bootloader memory space	
   \   000006EC   400BA0E3           MOV      R0,#+65536
   \   000006F0   B218D6E1           LDRH     R1,[R6, #+130]
   \   000006F4   ........           BL       __aeabi_idiv
   \   000006F8   02A040E2           SUB      R10,R0,#+2
   \   000006FC   340000EA           B        ??WriteCodeImage_26
   1422          #ifdef BUILD_DEBUG_PORT
   1423          							DBGU_Print("Erasing Boot Area \n\r");
   1424          #endif
   1425          						} // if
   1426          						else {						// TraqDash Code
   1427          							if (unsavedSysData.duSwRev >= codefiles[whichcodefile].rev)
   \                     ??WriteCodeImage_25:
   \   00000700   B000D6E1           LDRH     R0,[R6, #+0]
   \   00000704   0A0050E1           CMP      R0,R10
   \   00000708   D30000AA           BGE      ??WriteCodeImage_8
   1428          								break;				// don't update if we don't need to
   1429          							
   1430          							if (!ReFlashYorN(CODETQ, codefiles[whichcodefile].rev))	// ask user if they want to do it
   \   0000070C   0300A0E3           MOV      R0,#+3
   \   00000710   ........           BL       SetPopupDefaults
   \   00000714   18008DE2           ADD      R0,SP,#+24
   \   00000718   4C0085E5           STR      R0,[R5, #+76]
   \   0000071C   ............       ADRL     R0,`?<Constant "NEW FIRMWARE FOUND">`
   \              ....        
   \   00000724   B090D6E1           LDRH     R9,[R6, #+0]
   \   00000728   040085E5           STR      R0,[R5, #+4]
   \   0000072C   ............       ADRL     R0,`?<Constant "Update TraqDash Firmw...">`
   \              ....        
   \   00000734   640085E5           STR      R0,[R5, #+100]
   \   00000738   0A00A0E1           MOV      R0,R10
   \   0000073C   ........           BL       __aeabi_i2f
   \   00000740   ........           BL       __aeabi_f2d
   \   00000744   4034A0E3           MOV      R3,#+1073741824
   \   00000748   0020A0E3           MOV      R2,#+0
   \   0000074C   593883E3           ORR      R3,R3,#0x590000
   \   00000750   ........           BL       __aeabi_ddiv
   \   00000754   03008DE8           STM      SP,{R0,R1}
   \   00000758   0900A0E1           MOV      R0,R9
   \   0000075C   ........           BL       __aeabi_i2f
   \   00000760   ........           BL       __aeabi_f2d
   \   00000764   4034A0E3           MOV      R3,#+1073741824
   \   00000768   0020A0E3           MOV      R2,#+0
   \   0000076C   593883E3           ORR      R3,R3,#0x590000
   \   00000770   ........           BL       __aeabi_ddiv
   \   00000774   0020A0E1           MOV      R2,R0
   \   00000778   0130A0E1           MOV      R3,R1
   \   0000077C   ............       ADRL     R1,`?<Constant "Current Rev %1.2f, Ne...">`
   \              ....        
   \   00000784   18008DE2           ADD      R0,SP,#+24
   \   00000788   ........           BL       sprintf
   \   0000078C   ........           BL       WM_GetDesktopWindow
   \   00000790   0030A0E1           MOV      R3,R0
   \   00000794   0A00A0E3           MOV      R0,#+10
   \   00000798   04008DE5           STR      R0,[SP, #+4]
   \   0000079C   00008DE5           STR      R0,[SP, #+0]
   \   000007A0   ........           LDR      R2,??DataTable101
   \   000007A4   0610A0E3           MOV      R1,#+6
   \   000007A8   0500A0E1           MOV      R0,R5
   \   000007AC   ........           BL       GUI_ExecDialogBox
   \   000007B0   010050E3           CMP      R0,#+1
   \   000007B4   A800001A           BNE      ??WriteCodeImage_8
   \   000007B8   ........           BL       StopTouchScreenScan
   1431          								break;
   1432          
   1433          							firstpage = CODELOAD(0);
   \   000007BC   400BA0E3           MOV      R0,#+65536
   \   000007C0   B218D6E1           LDRH     R1,[R6, #+130]
   \   000007C4   ........           BL       __aeabi_idiv
   \   000007C8   10008DE5           STR      R0,[SP, #+16]
   1434          							rangeupper = unsavedSysData.dataflash[0].numPages-1;								
   \   000007CC   B008D6E1           LDRH     R0,[R6, #+128]
   \   000007D0   01A040E2           SUB      R10,R0,#+1
   \                     ??WriteCodeImage_26:
   \   000007D4   0AA8A0E1           LSL      R10,R10,#+16
   \   000007D8   2AA8A0E1           LSR      R10,R10,#+16
   1435          #ifdef BUILD_DEBUG_PORT
   1436          							DBGU_Print("Erasing Code Area \n\r");
   1437          #endif						
   1438          						} // else
   1439          						
   1440          						// tell tasks to leave us alone
   1441          						SetUserMode(DU2_REPROGRAMMING);
   \   000007DC   2000A0E3           MOV      R0,#+32
   \   000007E0   ........           BL       SetUserMode
   1442          
   1443          						CreateProgressBar(&hProgBar, rangeupper);							
   \   000007E4   0100A0E3           MOV      R0,#+1
   \   000007E8   0C008DE5           STR      R0,[SP, #+12]
   \   000007EC   0000A0E3           MOV      R0,#+0
   \   000007F0   08008DE5           STR      R0,[SP, #+8]
   \   000007F4   0200A0E3           MOV      R0,#+2
   \   000007F8   04008DE5           STR      R0,[SP, #+4]
   \   000007FC   0000A0E3           MOV      R0,#+0
   \   00000800   00008DE5           STR      R0,[SP, #+0]
   \   00000804   4630A0E3           MOV      R3,#+70
   \   00000808   4B2FA0E3           MOV      R2,#+300
   \   0000080C   AA10A0E3           MOV      R1,#+170
   \   00000810   5A00A0E3           MOV      R0,#+90
   \   00000814   ........           BL       PROGBAR_CreateEx
   \   00000818   0090A0E1           MOV      R9,R0
   \   0000081C   ........           LDR      R1,??DataTable101_4
   \   00000820   ........           BL       PROGBAR_SetFont
   \   00000824   0020A0E3           MOV      R2,#+0
   \   00000828   0010A0E3           MOV      R1,#+0
   \   0000082C   0900A0E1           MOV      R0,R9
   \   00000830   ........           BL       PROGBAR_SetTextColor
   \   00000834   FF24E0E3           MVN      R2,#-16777216
   \   00000838   0110A0E3           MOV      R1,#+1
   \   0000083C   0900A0E1           MOV      R0,R9
   \   00000840   ........           BL       PROGBAR_SetTextColor
   \   00000844   0A20A0E1           MOV      R2,R10
   \   00000848   0010A0E3           MOV      R1,#+0
   \   0000084C   0900A0E1           MOV      R0,R9
   \   00000850   ........           BL       PROGBAR_SetMinMax
   \   00000854   FF2CA0E3           MOV      R2,#+65280
   \   00000858   0010A0E3           MOV      R1,#+0
   \   0000085C   0900A0E1           MOV      R0,R9
   \   00000860   ........           BL       PROGBAR_SetBarColor
   \   00000864   0020A0E3           MOV      R2,#+0
   \   00000868   0110A0E3           MOV      R1,#+1
   \   0000086C   0900A0E1           MOV      R0,R9
   \   00000870   ........           BL       PROGBAR_SetBarColor
   \   00000874   ........           LDR      R1,??DataTable103
   \   00000878   0900A0E1           MOV      R0,R9
   \   0000087C   ........           BL       WIDGET_SetEffect
   1444          						OS_Delay(500);					// wait for things to quiet down
   \   00000880   7D0FA0E3           MOV      R0,#+500
   \   00000884   ........           BL       OS_Delay
   1445          	
   1446          						totalbytes = 0;
   1447          						
   1448          						PROGBAR_SetText(hProgBar, "Erasing");
   \   00000888   ............       ADRL     R1,`?<Constant "Erasing">`
   \              ....        
   \   00000890   0900A0E1           MOV      R0,R9
   \   00000894   ........           BL       PROGBAR_SetText
   1449          						GUI_Exec();
   \   00000898   ........           BL       GUI_Exec
   1450          						
   1451          						partialrange = firstpage;
   \   0000089C   10B09DE5           LDR      R11,[SP, #+16]
   1452          						do {
   1453          							lastpartial = partialrange;
   \                     ??WriteCodeImage_27:
   \   000008A0   0B10A0E1           MOV      R1,R11
   1454          							partialrange += 256;				// clear in 256 chunks for progress bar
   \   000008A4   40BF8BE2           ADD      R11,R11,#+256
   \   000008A8   0BB8A0E1           LSL      R11,R11,#+16
   \   000008AC   2BB8A0E1           LSR      R11,R11,#+16
   1455          													
   1456          							if (partialrange > rangeupper)
   \   000008B0   0B005AE1           CMP      R10,R11
   1457          								partialrange = rangeupper+1;
   \   000008B4   01B08AB2           ADDLT    R11,R10,#+1
   \   000008B8   0BB8A0B1           LSLLT    R11,R11,#+16
   \   000008BC   2BB8A0B1           LSRLT    R11,R11,#+16
   1458          							
   1459          							DataFlash_Erase_Range(0, lastpartial, partialrange-1);
   \   000008C0   01204BE2           SUB      R2,R11,#+1
   \   000008C4   0228A0E1           LSL      R2,R2,#+16
   \   000008C8   0118A0E1           LSL      R1,R1,#+16
   \   000008CC   2228A0E1           LSR      R2,R2,#+16
   \   000008D0   2118A0E1           LSR      R1,R1,#+16
   \   000008D4   0000A0E3           MOV      R0,#+0
   \   000008D8   ........           BL       DataFlash_Erase_Range
   1460          							
   1461          							PROGBAR_SetValue(hProgBar, partialrange);		// update the user
   \   000008DC   0B10A0E1           MOV      R1,R11
   \   000008E0   0900A0E1           MOV      R0,R9
   \   000008E4   ........           BL       PROGBAR_SetValue
   1462          							GUI_Exec();
   \   000008E8   ........           BL       GUI_Exec
   1463          						} while (partialrange < rangeupper);
   \   000008EC   0A005BE1           CMP      R11,R10
   \   000008F0   EAFFFFBA           BLT      ??WriteCodeImage_27
   1464          
   1465          						PROGBAR_SetText(hProgBar, "Writing");
   \   000008F4   ............       ADRL     R1,`?<Constant "Writing">`
   \              ....        
   \   000008FC   0900A0E1           MOV      R0,R9
   \   00000900   ........           BL       PROGBAR_SetText
   1466          						PROGBAR_SetValue(hProgBar, 0);						// clear the progress bar
   \   00000904   0010A0E3           MOV      R1,#+0
   \   00000908   0900A0E1           MOV      R0,R9
   \   0000090C   ........           BL       PROGBAR_SetValue
   1467          						GUI_Exec();
   \   00000910   ........           BL       GUI_Exec
   1468          						
   1469          						pagenum = firstpage;
   \   00000914   10B09DE5           LDR      R11,[SP, #+16]
   1470          						if (CODETQ == whichcodefile) {
   \   00000918   010058E3           CMP      R8,#+1
   \   0000091C   2D00001A           BNE      ??WriteCodeImage_28
   1471          							// just in case code is not going at an even page boundary
   1472          							pagemismatch = CODESTART % unsavedSysData.dataflash[0].bytesPerPage;
   \   00000920   400BA0E3           MOV      R0,#+65536
   \   00000924   B218D6E1           LDRH     R1,[R6, #+130]
   \   00000928   ........           BL       __aeabi_idivmod
   \   0000092C   00108DE5           STR      R1,[SP, #+0]
   1473          							
   1474          							if (0 != pagemismatch) {
   \   00000930   000051E3           CMP      R1,#+0
   \   00000934   2700000A           BEQ      ??WriteCodeImage_28
   1475          								int i;
   1476          	
   1477          								// fill start of buffer with blank flash bytes
   1478          								for (i=0; i < pagemismatch; i++)
   1479          									pagebuff[i] = 0xFF;
   \   00000938   FF20A0E3           MOV      R2,#+255
   \   0000093C   540F8DE2           ADD      R0,SP,#+336
   \   00000940   ........           BL       __aeabi_memset4
   1480          								// read a partial
   1481          								bytesread = FS_Read(pFile, &(pagebuff[pagemismatch]), (unsavedSysData.dataflash[0].bytesPerPage - pagemismatch));
   \   00000944   B208D6E1           LDRH     R0,[R6, #+130]
   \   00000948   00109DE5           LDR      R1,[SP, #+0]
   \   0000094C   012040E0           SUB      R2,R0,R1
   \   00000950   0100A0E1           MOV      R0,R1
   \   00000954   541F8DE2           ADD      R1,SP,#+336
   \   00000958   011080E0           ADD      R1,R0,R1
   \   0000095C   0700A0E1           MOV      R0,R7
   \   00000960   ........           BL       FS_Read
   1482          								// write the first page
   1483          								DataFlash_Page_Write(0, (1 + (pagenum % 1)), unsavedSysData.dataflash[0].bytesPerPage, pagebuff, pagenum);
   \   00000964   0BB8A0E1           LSL      R11,R11,#+16
   \   00000968   2BB8A0E1           LSR      R11,R11,#+16
   \   0000096C   00B08DE5           STR      R11,[SP, #+0]
   \   00000970   543F8DE2           ADD      R3,SP,#+336
   \   00000974   B228D6E1           LDRH     R2,[R6, #+130]
   \   00000978   0110A0E3           MOV      R1,#+1
   \   0000097C   0000A0E3           MOV      R0,#+0
   \   00000980   ........           BL       DataFlash_Page_Write
   1484          	
   1485          								pagenum++;
   \   00000984   120000EA           B        ??WriteCodeImage_29
   1486          								totalbytes += bytesread;
   1487          							} // if
   1488          						} // if
   1489          						
   1490          						while (0 !=	(bytesread = FS_Read(pFile, &pagebuff, unsavedSysData.dataflash[0].bytesPerPage))) {
   1491          							unsigned int *iptr;
   1492          
   1493          							// store size of bootloader in image at 0x0014. Use 8000 for now.
   1494          							if ((BOOTTQ == whichcodefile) && (0 == pagenum)) {
   \                     ??WriteCodeImage_30:
   \   00000988   020058E3           CMP      R8,#+2
   \   0000098C   0BB8A001           LSLEQ    R11,R11,#+16
   \   00000990   2BB8B001           LSRSEQ   R11,R11,#+16
   1495          								iptr = (unsigned int *) (pagebuff + 0x14);
   1496          								*iptr = 8000;				// store size of bootloader
   \   00000994   7D1DA003           MOVEQ    R1,#+8000
   1497          							} //if
   1498          						
   1499          							if (bytesread != unsavedSysData.dataflash[0].bytesPerPage) {
   1500          #ifdef BUILD_DEBUG_PORT
   1501          								sprintf(tempstr, "bytes left over = %ld \n\r", bytesread);
   1502          								DBGU_Print(tempstr);
   1503          #endif		
   1504          							} // if
   1505          								
   1506          							DataFlash_Page_Write(0, (1 + (pagenum % 1)), unsavedSysData.dataflash[0].bytesPerPage, pagebuff, pagenum);
   \   00000998   0BB8A0E1           LSL      R11,R11,#+16
   \   0000099C   64118D05           STREQ    R1,[SP, #+356]
   \   000009A0   2BB8A0E1           LSR      R11,R11,#+16
   \   000009A4   00B08DE5           STR      R11,[SP, #+0]
   \   000009A8   543F8DE2           ADD      R3,SP,#+336
   \   000009AC   B228D6E1           LDRH     R2,[R6, #+130]
   \   000009B0   0110A0E3           MOV      R1,#+1
   \   000009B4   0000A0E3           MOV      R0,#+0
   \   000009B8   ........           BL       DataFlash_Page_Write
   1507          
   1508          							if (0 == (pagenum % 256)) {						
   \   000009BC   0B0CB0E1           LSLS     R0,R11,#+24
   \   000009C0   0300001A           BNE      ??WriteCodeImage_29
   1509          								PROGBAR_SetValue(hProgBar, pagenum);		// update the user
   \   000009C4   0B10A0E1           MOV      R1,R11
   \   000009C8   0900A0E1           MOV      R0,R9
   \   000009CC   ........           BL       PROGBAR_SetValue
   1510          								GUI_Exec();
   \   000009D0   ........           BL       GUI_Exec
   1511          #ifdef BUILD_DEBUG_PORT
   1512          								sprintf(tempstr, "Writing page = %d \n\r", pagenum);
   1513          								DBGU_Print(tempstr);
   1514          #endif								
   1515          							} // if
   1516          
   1517          							pagenum++;
   \                     ??WriteCodeImage_29:
   \   000009D4   01B08BE2           ADD      R11,R11,#+1
   1518          							totalbytes += bytesread;
   1519          						} // while
   \                     ??WriteCodeImage_28:
   \   000009D8   B228D6E1           LDRH     R2,[R6, #+130]
   \   000009DC   541F8DE2           ADD      R1,SP,#+336
   \   000009E0   0700A0E1           MOV      R0,R7
   \   000009E4   ........           BL       FS_Read
   \   000009E8   000050E3           CMP      R0,#+0
   \   000009EC   E5FFFF1A           BNE      ??WriteCodeImage_30
   1520          							
   1521          						PROGBAR_SetValue(hProgBar, rangeupper);		// show 100%
   \   000009F0   0A10A0E1           MOV      R1,R10
   \   000009F4   0900A0E1           MOV      R0,R9
   \   000009F8   ........           BL       PROGBAR_SetValue
   1522          						GUI_Exec();
   \   000009FC   ........           BL       GUI_Exec
   1523          						
   1524          						// make sure it is finished
   1525          						do {
   1526          							status = DataFlash_Read_Status(0);
   1527          						} while (!(status & STATUS_READY_MASK));
   \                     ??WriteCodeImage_31:
   \   00000A00   0000A0E3           MOV      R0,#+0
   \   00000A04   ........           BL       DataFlash_Read_Status
   \   00000A08   800010E3           TST      R0,#0x80
   \   00000A0C   FBFFFF0A           BEQ      ??WriteCodeImage_31
   1528          									
   1529          #ifdef BUILD_DEBUG_PORT
   1530          						sprintf(tempstr, "Write complete, pages = %d, total bytes = %ld \n\r", pagenum, totalbytes);
   1531          						DBGU_Print(tempstr);
   1532          #endif			
   1533          						FS_FClose(pFile);
   \   00000A10   0700A0E1           MOV      R0,R7
   \   00000A14   ........           BL       FS_FClose
   1534          
   1535          						// if bootloader, erase it from SD card and write new bootloader rev into flash
   1536          						if (BOOTTQ == whichcodefile) {
   \   00000A18   020058E3           CMP      R8,#+2
   \   00000A1C   0600001A           BNE      ??WriteCodeImage_32
   1537          #ifdef BUILD_DEBUG_PORT
   1538          							DBGU_Print("Updating bootloader rev\n\r");
   1539          #endif
   1540          							unsavedSysData.unitInfo.bootloaderSwRev = codefiles[whichcodefile].rev;
   \   00000A20   14009DE5           LDR      R0,[SP, #+20]
   \   00000A24   000090E5           LDR      R0,[R0, #+0]
   \   00000A28   6C0086E5           STR      R0,[R6, #+108]
   1541          							WriteUserData();
   \   00000A2C   ........           BL       WriteUserData
   1542          #ifdef BUILD_DEBUG_PORT
   1543          							DBGU_Print("Removing bootloader file \n\r");
   1544          #endif
   1545          							FS_Remove(codefiles[whichcodefile].name);
   \   00000A30   14009DE5           LDR      R0,[SP, #+20]
   \   00000A34   100040E2           SUB      R0,R0,#+16
   \   00000A38   ........           BL       FS_Remove
   1546          						} // if
   1547          						
   1548          						FS_Sync("");
   \                     ??WriteCodeImage_32:
   \   00000A3C   ........           ADR      R0,??DataTable101_3  ;; ""
   \   00000A40   ........           BL       FS_Sync
   1549          						
   1550          						unsavedSysData.systemMode = DU2_IDLE;
   \   00000A44   0100A0E3           MOV      R0,#+1
   \   00000A48   8800C6E5           STRB     R0,[R6, #+136]
   1551          						
   1552          						// reboot
   1553          #ifdef BUILD_DEBUG_PORT
   1554          						DBGU_Print("Rebooting \n\r");
   1555          #endif
   1556          						OS_Delay(3000);
   \   00000A4C   B800A0E3           MOV      R0,#+184
   \   00000A50   B00E80E3           ORR      R0,R0,#0xB00
   \   00000A54   ........           BL       OS_Delay
   1557          						reset();			// reset to reload
   \   00000A58   ........           BL       reset
   1558          
   1559          					} // else
   1560          					break;
   1561          				} // case
   1562          			} // switch
   1563          		} // if
   1564          	} // for
   \                     ??WriteCodeImage_8:
   \   00000A5C   14009DE5           LDR      R0,[SP, #+20]
   \   00000A60   018088E2           ADD      R8,R8,#+1
   \   00000A64   140080E2           ADD      R0,R0,#+20
   \   00000A68   14008DE5           STR      R0,[SP, #+20]
   \   00000A6C   030058E3           CMP      R8,#+3
   \   00000A70   C9FDFFBA           BLT      ??WriteCodeImage_7
   1565          }
   \   00000A74   5DDF8DE2           ADD      SP,SP,#+372
   \   00000A78   40DE8DE2           ADD      SP,SP,#+1024
   \   00000A7C   F08FBDE8           POP      {R4-R11,PC}      ;; return
   1566          #endif
   1567          
   1568          #define	ICON_ROW	190
   1569          #define	TEXT_ROW	250
   1570          #define	ICON_START	5
   1571          #define	INCREMENT	68
   1572          #define	TEXT_START	35
   1573          

   \                                 In section .text, align 4, keep-with-next
   1574          const GUI_RECT DriverRect = {100, 107, 230, 180};
   \                     DriverRect:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   64006B00E600       DC16 100, 107, 230, 180
   \              B400        

   \                                 In section .text, align 4, keep-with-next
   1575          const GUI_RECT VehicleRect = {330, 107, 460, 180};
   \                     VehicleRect:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   4A016B00CC01       DC16 330, 107, 460, 180
   \              B400        
   1576          

   \                                 In section .text, align 4, keep-with-next
   1577          void RepaintSplash(void)
   1578          {
   \                     RepaintSplash:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   1579          	DisplaySplashScreen1();
   \   00000008   ........           BL       GUI_Clear
   \   0000000C   0A20A0E3           MOV      R2,#+10
   \   00000010   2710A0E3           MOV      R1,#+39
   \   00000014   ........           LDR      R0,??DataTable103_8
   \   00000018   ........           BL       GUI_DrawBitmap
   \   0000001C   6120A0E3           MOV      R2,#+97
   \   00000020   1410A0E3           MOV      R1,#+20
   \   00000024   ........           LDR      R0,??DataTable103_9
   \   00000028   ........           BL       GUI_DrawBitmap
   \   0000002C   04D08DE2           ADD      SP,SP,#+4
   \   00000030   0040BDE8           POP      {LR}
   \   00000034   6E20A0E3           MOV      R2,#+110
   \   00000038   F010A0E3           MOV      R1,#+240
   \   0000003C   ........           LDR      R0,??DataTable103_10
   \   00000040   ........           B        GUI_DrawBitmap   ;; tailcall
   1580          // Do not want to do here - causes issues with Archive Popup sequence	DisplaySplashScreen3();
   1581          }
   1582          

   \                                 In section .text, align 4, keep-with-next
   1583          void DisplaySplashScreen1(void)
   1584          {
   \                     DisplaySplashScreen1:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   1585          	GUI_Clear();
   \   00000008   ........           BL       GUI_Clear
   1586          	GUI_DrawBitmap(&bmSplashScreen, 39, 10);
   \   0000000C   0A20A0E3           MOV      R2,#+10
   \   00000010   2710A0E3           MOV      R1,#+39
   \   00000014   ........           LDR      R0,??DataTable103_8
   \   00000018   ........           BL       GUI_DrawBitmap
   1587          	GUI_DrawBitmap(&bmDriverName, 20, 97);
   \   0000001C   6120A0E3           MOV      R2,#+97
   \   00000020   1410A0E3           MOV      R1,#+20
   \   00000024   ........           LDR      R0,??DataTable103_9
   \   00000028   ........           BL       GUI_DrawBitmap
   1588          	GUI_DrawBitmap(&bmVehicleName, 240, 110);
   \   0000002C   04D08DE2           ADD      SP,SP,#+4
   \   00000030   0040BDE8           POP      {LR}
   \   00000034   6E20A0E3           MOV      R2,#+110
   \   00000038   F010A0E3           MOV      R1,#+240
   \   0000003C   ........           LDR      R0,??DataTable103_10
   \   00000040   ........           B        GUI_DrawBitmap   ;; tailcall
   1589          }
   1590          

   \                                 In section .text, align 4, keep-with-next
   1591          void DisplaySplashScreen3(void)
   1592          {
   \                     DisplaySplashScreen3:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
   1593          	const GUI_BITMAP *pGraphic;
   1594          	int i;
   1595          	unsigned int temp;
   1596          
   1597          	// Start screen persistance timer
   1598          	splashScreenStartTime = GUI_GetTime();
   \   00000008   ........           BL       GUI_GetTime
   \   0000000C   ........           LDR      R1,??DataTable103_11
   1599          
   1600          	temp = sysData.multiSettings_2 & 0x0000000F;
   \   00000010   ........           LDR      R5,??DataTable103_12
   \   00000014   0C0081E5           STR      R0,[R1, #+12]
   \   00000018   EC0095E5           LDR      R0,[R5, #+236]
   \   0000001C   0F1000E2           AND      R1,R0,#0xF
   1601          
   1602          	// If on main menu and one of first 4 times to power up - draw help splash screen
   1603          	if ((temp < HELP_SPLASH_COUNT) && (sysData.screentype == GENERAL_CONFIG_SCREEN_TYPE))
   \   00000020   040051E3           CMP      R1,#+4
   \   00000024   0A00002A           BCS      ??DisplaySplashScreen3_1
   \   00000028   1420D5E5           LDRB     R2,[R5, #+20]
   \   0000002C   000052E3           CMP      R2,#+0
   \   00000030   0700001A           BNE      ??DisplaySplashScreen3_1
   1604          	{
   1605          		if (++temp >= HELP_SPLASH_COUNT)
   \   00000034   011081E2           ADD      R1,R1,#+1
   \   00000038   040051E3           CMP      R1,#+4
   1606          			temp = HELP_SPLASH_COUNT;
   \   0000003C   0410A023           MOVCS    R1,#+4
   1607          		sysData.multiSettings_2 = (sysData.multiSettings_2 & 0xFFFFFFF0) | temp;
   \   00000040   2002A0E1           LSR      R0,R0,#+4
   \   00000044   000281E1           ORR      R0,R1,R0, LSL #+4
   \   00000048   EC0085E5           STR      R0,[R5, #+236]
   1608          
   1609          		DrawJPEGSplash();
   \   0000004C   ........           BL       DrawJPEGSplash
   \   00000050   C00000EA           B        ??DisplaySplashScreen3_2
   1610          	}
   1611          	else
   1612          	{
   1613          		GUI_SetColor(GUI_WHITE);
   \                     ??DisplaySplashScreen3_1:
   \   00000054   FF44E0E3           MVN      R4,#-16777216
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           BL       GUI_SetColor
   1614          		GUI_SetFont(&GUI_Font24_ASCII);
   \   00000060   ........           LDR      R0,??DataTable103_13
   \   00000064   ........           BL       GUI_SetFont
   1615          		GUI_DispStringInRectWrap(sysData.driver, (GUI_RECT *)&DriverRect, GUI_TA_LEFT | GUI_TA_VCENTER, GUI_WRAPMODE_WORD);
   \   00000068   0130A0E3           MOV      R3,#+1
   \   0000006C   0C20A0E3           MOV      R2,#+12
   \   00000070   ............       ADRL     R1,DriverRect
   \              ....        
   \   00000078   7E0085E2           ADD      R0,R5,#+126
   \   0000007C   ........           BL       GUI_DispStringInRectWrap
   1616          		GUI_DispStringInRectWrap(sysData.vehicle, (GUI_RECT *)&VehicleRect, GUI_TA_LEFT | GUI_TA_VCENTER, GUI_WRAPMODE_WORD);
   \   00000080   0130A0E3           MOV      R3,#+1
   \   00000084   0C20A0E3           MOV      R2,#+12
   \   00000088   ............       ADRL     R1,VehicleRect
   \              ....        
   \   00000090   8F0085E2           ADD      R0,R5,#+143
   \   00000094   ........           BL       GUI_DispStringInRectWrap
   1617          
   1618          		// Display inputs and camera configuration graphics
   1619          		GUI_SetFont(&GUI_Font16B_ASCII);
   \   00000098   ........           LDR      R5,??DataTable103_14
   \   0000009C   0500A0E1           MOV      R0,R5
   \   000000A0   ........           BL       GUI_SetFont
   1620          		if (GetSUCam() != CAMERA_NONE)
   \   000000A4   ........           BL       GetSUCam
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   3E00000A           BEQ      ??DisplaySplashScreen3_3
   1621          		{
   1622          			GUI_SetColor(GUI_WHITE);
   \   000000B0   0400A0E1           MOV      R0,R4
   \   000000B4   ........           BL       GUI_SetColor
   1623          			GUI_DispStringHCenterAt("Camera", TEXT_START, TEXT_ROW);
   \   000000B8   FA20A0E3           MOV      R2,#+250
   \   000000BC   2310A0E3           MOV      R1,#+35
   \   000000C0   ............       ADRL     R0,`?<Constant "Camera">`
   \              ....        
   \   000000C8   ........           BL       GUI_DispStringHCenterAt
   1624          
   1625          			switch (GetSUCam())
   \   000000CC   ........           BL       GetSUCam
   \   000000D0   010040E2           SUB      R0,R0,#+1
   \   000000D4   0D0050E3           CMP      R0,#+13
   \   000000D8   00F18F90           ADDLS    PC,PC,R0, LSL #+2
   \                     ??DisplaySplashScreen3_0:
   \   000000DC   1F00008A           BHI      ??DisplaySplashScreen3_4
   \   000000E0   0C0000EA           B        ??DisplaySplashScreen3_5
   \   000000E4   0D0000EA           B        ??DisplaySplashScreen3_6
   \   000000E8   0E0000EA           B        ??DisplaySplashScreen3_7
   \   000000EC   0D0000EA           B        ??DisplaySplashScreen3_7
   \   000000F0   080000EA           B        ??DisplaySplashScreen3_5
   \   000000F4   070000EA           B        ??DisplaySplashScreen3_5
   \   000000F8   060000EA           B        ??DisplaySplashScreen3_5
   \   000000FC   0B0000EA           B        ??DisplaySplashScreen3_8
   \   00000100   0C0000EA           B        ??DisplaySplashScreen3_9
   \   00000104   0D0000EA           B        ??DisplaySplashScreen3_10
   \   00000108   080000EA           B        ??DisplaySplashScreen3_8
   \   0000010C   0D0000EA           B        ??DisplaySplashScreen3_11
   \   00000110   0E0000EA           B        ??DisplaySplashScreen3_12
   \   00000114   0F0000EA           B        ??DisplaySplashScreen3_13
   1626          			{
   1627          			case CAMERA_SONY_CAMCORDER:
   1628          			case CAMERA_SONY_VCR_HARD:
   1629          			case CAMERA_SONY_VCR_SOFT:
   1630          			case CAMERA_SONY_HD:			pGraphic = &bmSonyIcon;			break;
   \                     ??DisplaySplashScreen3_5:
   \   00000118   ........           LDR      R0,??DataTable103_15
   \   0000011C   100000EA           B        ??DisplaySplashScreen3_14
   1631          			case CAMERA_RACECAM_HD:			pGraphic = &bmRaceCamIcon;		break;
   \                     ??DisplaySplashScreen3_6:
   \   00000120   ........           LDR      R0,??DataTable103_16
   \   00000124   0E0000EA           B        ??DisplaySplashScreen3_14
   1632          			case CAMERA_CHASECAM_LANC:
   1633          			case CAMERA_CHASECAM:			pGraphic = &bmChaseCamIcon;		break;
   \                     ??DisplaySplashScreen3_7:
   \   00000128   ........           LDR      R0,??DataTable103_17
   \   0000012C   0C0000EA           B        ??DisplaySplashScreen3_14
   1634          			case CAMERA_GOPRO_HD_PRO:
   1635          			case CAMERA_GOPRO_HD:			pGraphic = &bmGoProIcon;		break;
   \                     ??DisplaySplashScreen3_8:
   \   00000130   ........           LDR      R0,??DataTable103_18
   \   00000134   0A0000EA           B        ??DisplaySplashScreen3_14
   1636          			case CAMERA_REPLAY_HD:			pGraphic = &bmReplayIcon;		break;
   \                     ??DisplaySplashScreen3_9:
   \   00000138   ........           LDR      R0,??DataTable103_19
   \   0000013C   080000EA           B        ??DisplaySplashScreen3_14
   1637          			case CAMERA_REPLAY_XD_USB:		pGraphic = &bmReplay1080Icon;	break;	// XD 1080 connected via TraqData USB
   \                     ??DisplaySplashScreen3_10:
   \   00000140   ........           LDR      R0,??DataTable103_20
   \   00000144   060000EA           B        ??DisplaySplashScreen3_14
   1638          			case CAMERA_REPLAY_MINI:		pGraphic = &bmReplayMiniIcon;	break;	// Mini connected via TraqData USB
   \                     ??DisplaySplashScreen3_11:
   \   00000148   ........           LDR      R0,??DataTable103_21
   \   0000014C   040000EA           B        ??DisplaySplashScreen3_14
   1639          			case CAMERA_REPLAY_PRIMEX:		pGraphic = &bmReplayPrimeIcon;	break;	// Prime X connected via TraqData USB
   \                     ??DisplaySplashScreen3_12:
   \   00000150   ........           LDR      R0,??DataTable103_22
   \   00000154   020000EA           B        ??DisplaySplashScreen3_14
   1640          			case CAMERA_MOBIUS:				pGraphic = &bmMobiusIcon;		break;	// Mobius connected via TraqData USB
   \                     ??DisplaySplashScreen3_13:
   \   00000158   ........           LDR      R0,??DataTable103_23
   \   0000015C   000000EA           B        ??DisplaySplashScreen3_14
   1641          
   1642          			default:						pGraphic = &bmCheckIcon;		break;
   \                     ??DisplaySplashScreen3_4:
   \   00000160   ........           LDR      R0,??DataTable103_24
   1643          			}
   1644          		
   1645          			GUI_DrawBitmap(pGraphic, ICON_START, ICON_ROW);
   \                     ??DisplaySplashScreen3_14:
   \   00000164   BE20A0E3           MOV      R2,#+190
   \   00000168   0510A0E3           MOV      R1,#+5
   \   0000016C   ........           BL       GUI_DrawBitmap
   1646          
   1647          			if ((GetTDCam() != TD_CAM_NONE) && (unsavedSysData.unitInfo.bootloaderSwRev > FIRST_GEN_BOOTLOADER))
   \   00000170   ........           BL       GetTDCam
   \   00000174   000050E3           CMP      R0,#+0
   \   00000178   3900000A           BEQ      ??DisplaySplashScreen3_15
   \   0000017C   ........           LDR      R0,??DataTable103_4
   \   00000180   6C0090E5           LDR      R0,[R0, #+108]
   \   00000184   880050E3           CMP      R0,#+136
   \   00000188   3500003A           BCC      ??DisplaySplashScreen3_15
   1648          			{
   1649          				GUI_SetTextMode(GUI_TM_TRANS);
   \   0000018C   0200A0E3           MOV      R0,#+2
   \   00000190   ........           BL       GUI_SetTextMode
   1650          				GUI_SetColor(GUI_RED);
   \   00000194   FF00A0E3           MOV      R0,#+255
   \   00000198   ........           BL       GUI_SetColor
   1651          				GUI_DispStringHCenterAt("USB", ICON_START + 40, ICON_ROW + 40);
   \   0000019C   E620A0E3           MOV      R2,#+230
   \   000001A0   2D10A0E3           MOV      R1,#+45
   \   000001A4   ........           ADR      R0,??DataTable103_2  ;; "USB"
   \   000001A8   2C0000EA           B        ??DisplaySplashScreen3_16
   1652          			}
   1653          		}
   1654          		else 
   1655          		{
   1656          			if (GetTDCam() && (unsavedSysData.unitInfo.bootloaderSwRev > FIRST_GEN_BOOTLOADER))
   \                     ??DisplaySplashScreen3_3:
   \   000001AC   ........           BL       GetTDCam
   \   000001B0   000050E3           CMP      R0,#+0
   \   000001B4   1B00000A           BEQ      ??DisplaySplashScreen3_17
   \   000001B8   ........           LDR      R0,??DataTable103_4
   \   000001BC   6C0090E5           LDR      R0,[R0, #+108]
   \   000001C0   880050E3           CMP      R0,#+136
   \   000001C4   1700003A           BCC      ??DisplaySplashScreen3_17
   1657          			{
   1658          				GUI_SetColor(GUI_WHITE);
   \   000001C8   0400A0E1           MOV      R0,R4
   \   000001CC   ........           BL       GUI_SetColor
   1659          				GUI_DispStringHCenterAt("Camera", TEXT_START, TEXT_ROW);
   \   000001D0   FA20A0E3           MOV      R2,#+250
   \   000001D4   2310A0E3           MOV      R1,#+35
   \   000001D8   ............       ADRL     R0,`?<Constant "Camera">`
   \              ....        
   \   000001E0   ........           BL       GUI_DispStringHCenterAt
   1660          
   1661          				GUI_SetFont(&GUI_Font20B_ASCII);
   \   000001E4   ........           LDR      R0,??DataTable103_25
   \   000001E8   ........           BL       GUI_SetFont
   1662          				GUI_DrawBitmap(&bmUSBCamIcon, ICON_START, ICON_ROW);
   \   000001EC   BE20A0E3           MOV      R2,#+190
   \   000001F0   0510A0E3           MOV      R1,#+5
   \   000001F4   ........           LDR      R0,??DataTable103_26
   \   000001F8   ........           BL       GUI_DrawBitmap
   1663          				GUI_SetTextMode(GUI_TM_TRANS);
   \   000001FC   0200A0E3           MOV      R0,#+2
   \   00000200   ........           BL       GUI_SetTextMode
   1664          				GUI_SetColor(GUI_RED);
   \   00000204   FF00A0E3           MOV      R0,#+255
   \   00000208   ........           BL       GUI_SetColor
   1665          				GUI_DispStringHCenterAt("USB", ICON_START + 30, ICON_ROW + 20);
   \   0000020C   D220A0E3           MOV      R2,#+210
   \   00000210   2310A0E3           MOV      R1,#+35
   \   00000214   ........           ADR      R0,??DataTable103_2  ;; "USB"
   \   00000218   ........           BL       GUI_DispStringHCenterAt
   1666          				GUI_SetFont(&GUI_Font16B_ASCII);
   \   0000021C   0500A0E1           MOV      R0,R5
   \   00000220   ........           BL       GUI_SetFont
   \   00000224   0E0000EA           B        ??DisplaySplashScreen3_15
   1667          			}
   1668          			else
   1669          			{
   1670          				if (vehicleData.digitalInput[0].enabled)
   \                     ??DisplaySplashScreen3_17:
   \   00000228   ........           LDR      R0,??DataTable103_27
   1671          					pGraphic = &bmCheckIcon;
   1672          				else pGraphic = &bmXIcon;
   1673          				GUI_DrawBitmap(pGraphic, ICON_START, ICON_ROW);
   \   0000022C   BE20A0E3           MOV      R2,#+190
   \   00000230   A301D0E5           LDRB     R0,[R0, #+419]
   \   00000234   0510A0E3           MOV      R1,#+5
   \   00000238   000050E3           CMP      R0,#+0
   \   0000023C   ........           LDRNE    R0,??DataTable103_24
   \   00000240   ........           LDREQ    R0,??DataTable103_28
   \   00000244   ........           BL       GUI_DrawBitmap
   1674          				GUI_SetColor(GUI_LIGHTCYAN);
   \   00000248   7F00C4E3           BIC      R0,R4,#0x7F
   \   0000024C   ........           BL       GUI_SetColor
   1675          				GUI_DispStringHCenterAt("Digital 4", TEXT_START, TEXT_ROW);
   \   00000250   FA20A0E3           MOV      R2,#+250
   \   00000254   2310A0E3           MOV      R1,#+35
   \   00000258   ............       ADRL     R0,`?<Constant "Digital 4">`
   \              ....        
   \                     ??DisplaySplashScreen3_16:
   \   00000260   ........           BL       GUI_DispStringHCenterAt
   1676          			}
   1677          		}
   1678          
   1679          		GUI_SetColor(GUI_YELLOW);
   \                     ??DisplaySplashScreen3_15:
   \   00000264   FF08C4E3           BIC      R0,R4,#0xFF0000
   \   00000268   ........           BL       GUI_SetColor
   1680          
   1681          		for (i = 0; i < 4; i++)
   \   0000026C   ........           LDR      R6,??DataTable103_27
   \   00000270   0050A0E3           MOV      R5,#+0
   \   00000274   0670A0E1           MOV      R7,R6
   \   00000278   4980A0E3           MOV      R8,#+73
   \   0000027C   ............       ADRL     R9,`?<Constant "Analog %d">`
   \              ....        
   \   00000284   ........           LDR      R10,??DataTable103_28
   \   00000288   ........           LDR      R11,??DataTable103_24
   1682          			DisplayAnalogStatus(i);
   \                     ??DisplaySplashScreen3_18:
   \   0000028C   9300D7E5           LDRB     R0,[R7, #+147]
   \   00000290   BE20A0E3           MOV      R2,#+190
   \   00000294   0810A0E1           MOV      R1,R8
   \   00000298   000050E3           CMP      R0,#+0
   \   0000029C   0B00A011           MOVNE    R0,R11
   \   000002A0   0A00A001           MOVEQ    R0,R10
   \   000002A4   ........           BL       GUI_DrawBitmap
   \   000002A8   0520A0E1           MOV      R2,R5
   \   000002AC   0910A0E1           MOV      R1,R9
   \   000002B0   0D00A0E1           MOV      R0,SP
   \   000002B4   ........           BL       sprintf
   \   000002B8   FA20A0E3           MOV      R2,#+250
   \   000002BC   1E1088E2           ADD      R1,R8,#+30
   \   000002C0   0D00A0E1           MOV      R0,SP
   \   000002C4   ........           BL       GUI_DispStringHCenterAt
   \   000002C8   015085E2           ADD      R5,R5,#+1
   \   000002CC   448088E2           ADD      R8,R8,#+68
   \   000002D0   407087E2           ADD      R7,R7,#+64
   \   000002D4   040055E3           CMP      R5,#+4
   \   000002D8   EBFFFFBA           BLT      ??DisplaySplashScreen3_18
   1683          
   1684          		if (vehicleData.digitalInput[1].enabled)
   \   000002DC   D201D6E5           LDRB     R0,[R6, #+466]
   1685          			pGraphic = &bmCheckIcon;
   1686          		else pGraphic = &bmXIcon;
   1687          		GUI_DrawBitmap(pGraphic, ICON_START + (INCREMENT * 5), ICON_ROW);
   \   000002E0   BE20A0E3           MOV      R2,#+190
   \   000002E4   9B1082E2           ADD      R1,R2,#+155
   \   000002E8   000050E3           CMP      R0,#+0
   \   000002EC   0B00A011           MOVNE    R0,R11
   \   000002F0   0A00A001           MOVEQ    R0,R10
   \   000002F4   ........           BL       GUI_DrawBitmap
   1688          		GUI_SetColor(GUI_LIGHTCYAN);
   \   000002F8   7F00C4E3           BIC      R0,R4,#0x7F
   \   000002FC   ........           BL       GUI_SetColor
   1689          		GUI_DispStringHCenterAt("Digital 5", TEXT_START + (INCREMENT * 5), TEXT_ROW);
   \   00000300   FA20A0E3           MOV      R2,#+250
   \   00000304   7D1082E2           ADD      R1,R2,#+125
   \   00000308   ............       ADRL     R0,`?<Constant "Digital 5">`
   \              ....        
   \   00000310   ........           BL       GUI_DispStringHCenterAt
   1690          
   1691          		// Dislpay WiFi Icon
   1692          		if (unsavedSysData.wifiEnabled && unsavedSysData.wifiCardInserted)
   \   00000314   ........           LDR      R0,??DataTable103_4
   1693          			pGraphic = &bmWiFiEnabledIcon;
   1694          		else pGraphic = &bmWiFiDisabledIcon;
   1695          
   1696          		GUI_DrawBitmap(pGraphic, ICON_START + (INCREMENT * 6), ICON_ROW);
   \   00000318   BE20A0E3           MOV      R2,#+190
   \   0000031C   D01090E5           LDR      R1,[R0, #+208]
   \   00000320   000051E3           CMP      R1,#+0
   \   00000324   CC009015           LDRNE    R0,[R0, #+204]
   \   00000328   DF1082E2           ADD      R1,R2,#+223
   \   0000032C   00005013           CMPNE    R0,#+0
   \   00000330   ........           LDRNE    R0,??DataTable103_29
   \   00000334   ........           LDREQ    R0,??DataTable103_30
   \   00000338   ........           BL       GUI_DrawBitmap
   1697          
   1698          		GUI_SetColor(GUI_WHITE);
   \   0000033C   0400A0E1           MOV      R0,R4
   \   00000340   ........           BL       GUI_SetColor
   1699          		GUI_DispStringHCenterAt("WiFi", TEXT_START + (INCREMENT * 6), TEXT_ROW);
   \   00000344   FA20A0E3           MOV      R2,#+250
   \   00000348   C11082E2           ADD      R1,R2,#+193
   \   0000034C   ............       ADRL     R0,`?<Constant "WiFi">`
   \              ....        
   \   00000354   ........           BL       GUI_DispStringHCenterAt
   1700          	}
   1701          }
   \                     ??DisplaySplashScreen3_2:
   \   00000358   0CD08DE2           ADD      SP,SP,#+12       ;; stack cleaning
   \   0000035C   F08FBDE8           POP      {R4-R11,PC}      ;; return
   1702          
   1703          

   \                                 In section .text, align 4, keep-with-next
   1704          void DisplayAnalogStatus(int i)
   1705          {
   \                     DisplayAnalogStatus:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1706          	char buffer[10];
   1707          	const GUI_BITMAP *pGraphic;
   1708          
   1709          	if (vehicleData.analogInput[i].enabled)
   \   00000008   ........           LDR      R0,??DataTable103_27
   1710          		pGraphic = &bmCheckIcon;
   1711          	else pGraphic = &bmXIcon;
   \   0000000C   4410A0E3           MOV      R1,#+68
   \   00000010   040380E0           ADD      R0,R0,R4, LSL #+6
   \   00000014   9300D0E5           LDRB     R0,[R0, #+147]
   \   00000018   910405E0           MUL      R5,R1,R4
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0CD04DE2           SUB      SP,SP,#+12
   \   00000024   ........           LDRNE    R0,??DataTable103_24
   \   00000028   ........           LDREQ    R0,??DataTable103_28
   \   0000002C   BE20A0E3           MOV      R2,#+190
   \   00000030   491085E2           ADD      R1,R5,#+73
   1712          	GUI_DrawBitmap(pGraphic, ICON_START + (INCREMENT * (i + 1)), ICON_ROW);
   \   00000034   ........           BL       GUI_DrawBitmap
   1713          	sprintf(buffer, "Analog %d", i);
   \   00000038   0420A0E1           MOV      R2,R4
   \   0000003C   ............       ADRL     R1,`?<Constant "Analog %d">`
   \              ....        
   \   00000044   0D00A0E1           MOV      R0,SP
   \   00000048   ........           BL       sprintf
   1714          	GUI_DispStringHCenterAt(buffer, TEXT_START + (INCREMENT * (i + 1)), TEXT_ROW);
   \   0000004C   FA20A0E3           MOV      R2,#+250
   \   00000050   671085E2           ADD      R1,R5,#+103
   \   00000054   0D00A0E1           MOV      R0,SP
   \   00000058   ........           BL       GUI_DispStringHCenterAt
   1715          }
   \   0000005C   0CD08DE2           ADD      SP,SP,#+12       ;; stack cleaning
   \   00000060   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable86:
   \   00000000   00000000           DC8      "",0x0,0x0,0x0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91:
   \   00000000   ........           DC32     unsavedSysData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_1:
   \   00000000   ........           DC32     bmSplashScreen

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_2:
   \   00000000   ........           DC32     bmDriverName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_3:
   \   00000000   ........           DC32     bmVehicleName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_4:
   \   00000000   ........           DC32     BUTTON_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_5:
   \   00000000   ........           DC32     CHECKBOX_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_6:
   \   00000000   ........           DC32     DROPDOWN_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_7:
   \   00000000   ........           DC32     FRAMEWIN_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_8:
   \   00000000   ........           DC32     HEADER_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_9:
   \   00000000   ........           DC32     RADIO_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_10:
   \   00000000   ........           DC32     SCROLLBAR_DrawSkinFlex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_11:
   \   00000000   F0F0F000           DC32     0xf0f0f0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable91_12:
   \   00000000   ........           DC32     FS_CacheRW_Init

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable92:
   \   00000000   ........           DC32     testMode

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable93:
   \   00000000   00000000           DC8      "",0x0,0x0,0x0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable93_1:
   \   00000000   ........           DC32     popupCallback

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable93_2:
   \   00000000   ........           DC32     WIDGET_Effect_None

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable93_3:
   \   00000000   ........           DC32     raceModeState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable94:
   \   00000000   ........           DC32     glbBlackoutFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable95:
   \   00000000   ........           DC32     sysData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable96:
   \   00000000   ........           DC32     commTCB

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable96_1:
   \   00000000   ........           DC32     commStack

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable96_2:
   \   00000000   ........           DC32     CommSimulatorTask

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable97:
   \   00000000   ........           DC32     mainTCB

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable97_1:
   \   00000000   ........           DC32     nonModalPopupCallback

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable97_2:
   \   00000000   ........           DC32     OS_Global

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable97_3:
   \   00000000   722B0000           DC8      0x72, 0x2B, 0x00, 0x00

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98:
   \   00000000   77000000           DC8      "w",0x0,0x0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_1:
   \   00000000   2C200000           DC8      0x2C, 0x20, 0x00, 0x00

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_2:
   \   00000000   70D0FF00           DC32     0xffd070

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_3:
   \   00000000   ........           DC32     popupTitleTextColor

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_4:
   \   00000000   B1030300           DC32     0x303b1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_5:
   \   00000000   08A52200           DC32     0x22a508

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_6:
   \   00000000   ........           DC32     GUI_Font24_ASCII

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_7:
   \   00000000   ........           DC32     ??NewFirmwareResources

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_8:
   \   00000000   ........           DC32     suData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_9:
   \   00000000   ........           DC32     unsavedSysData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_10:
   \   00000000   ........           DC32     bmSplashScreen

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_11:
   \   00000000   ........           DC32     bmDriverName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_12:
   \   00000000   ........           DC32     bmVehicleName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_13:
   \   00000000   67666666           DC32     0x66666667

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable98_14:
   \   00000000   ........           DC32     glbBlackoutFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable101:
   \   00000000   ........           DC32     popupCallback

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable101_1:
   \   00000000   ........           DC32     systemSettingsPopupScreen

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable101_2:
   \   00000000   ........           DC32     fileList

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable101_3:
   \   00000000   00000000           DC8      "",0x0,0x0,0x0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable101_4:
   \   00000000   ........           DC32     GUI_Font32_ASCII

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103:
   \   00000000   ........           DC32     WIDGET_Effect_3D

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_1:
   \   00000000   ........           DC32     outstanding_msg

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_2:
   \   00000000   55534200           DC8      "USB"

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_3:
   \   00000000   ........           DC32     ??NewFirmwareResources

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_4:
   \   00000000   ........           DC32     unsavedSysData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_5:
   \   00000000   ........           DC32     suData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_6:
   \   00000000   ........           DC32     msgrouting

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_7:
   \   00000000   ........           DC32     com

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_8:
   \   00000000   ........           DC32     bmSplashScreen

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_9:
   \   00000000   ........           DC32     bmDriverName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_10:
   \   00000000   ........           DC32     bmVehicleName

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_11:
   \   00000000   ........           DC32     testMode

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_12:
   \   00000000   ........           DC32     sysData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_13:
   \   00000000   ........           DC32     GUI_Font24_ASCII

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_14:
   \   00000000   ........           DC32     GUI_Font16B_ASCII

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_15:
   \   00000000   ........           DC32     bmSonyIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_16:
   \   00000000   ........           DC32     bmRaceCamIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_17:
   \   00000000   ........           DC32     bmChaseCamIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_18:
   \   00000000   ........           DC32     bmGoProIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_19:
   \   00000000   ........           DC32     bmReplayIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_20:
   \   00000000   ........           DC32     bmReplay1080Icon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_21:
   \   00000000   ........           DC32     bmReplayMiniIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_22:
   \   00000000   ........           DC32     bmReplayPrimeIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_23:
   \   00000000   ........           DC32     bmMobiusIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_24:
   \   00000000   ........           DC32     bmCheckIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_25:
   \   00000000   ........           DC32     GUI_Font20B_ASCII

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_26:
   \   00000000   ........           DC32     bmUSBCamIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_27:
   \   00000000   ........           DC32     vehicleData

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_28:
   \   00000000   ........           DC32     bmXIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_29:
   \   00000000   ........           DC32     bmWiFiEnabledIcon

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable103_30:
   \   00000000   ........           DC32     bmWiFiDisabledIcon

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "STATUS">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   535441545553       DC8 83, 84, 65, 84, 85, 83, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Saving Files">`:
   \   00000000                      ; Initializer data, 16 bytes
   \   00000000   536176696E67       DC8 83, 97, 118, 105, 110, 103, 32, 70, 105, 108
   \              2046696C    
   \   0000000A   657300000000       DC8 101, 115, 0, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "All files saved.">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   416C6C206669       DC8 65, 108, 108, 32, 102, 105, 108, 101, 115, 32
   \              6C657320    
   \   0000000A   73617665642E       DC8 115, 97, 118, 101, 100, 46, 0, 0, 0, 0
   \              00000000    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Powering off the unit.">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   506F77657269       DC8 80, 111, 119, 101, 114, 105, 110, 103, 32, 111
   \              6E67206F    
   \   0000000A   666620746865       DC8 102, 102, 32, 116, 104, 101, 32, 117, 110, 105
   \              20756E69    
   \   00000014   742E0000           DC8 116, 46, 0, 0

   \                                 In section .rodata, align 1, keep-with-next
   \                     `?<Constant "">`:
   \   00000000                      ; Initializer data, 1 bytes
   \   00000000   00                 DC8 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "SD CARD NOT READY!">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   534420434152       DC8 83, 68, 32, 67, 65, 82, 68, 32, 78, 79
   \              44204E4F    
   \   0000000A   542052454144       DC8 84, 32, 82, 69, 65, 68, 89, 33, 0, 0
   \              59210000    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "No SD card or write p...">`:
   \   00000000                      ; Initializer data, 32 bytes
   \   00000000   4E6F20534420       DC8 78, 111, 32, 83, 68, 32, 99, 97, 114, 100
   \              63617264    
   \   0000000A   206F72207772       DC8 32, 111, 114, 32, 119, 114, 105, 116, 101, 32
   \              69746520    
   \   00000014   70726F746563       DC8 112, 114, 111, 116, 101, 99, 116, 101, 100, 0
   \              74656400    
   \   0000001E   0000               DC8 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Insert SD card now or...">`:
   \   00000000                      ; Initializer data, 36 bytes
   \   00000000   496E73657274       DC8 73, 110, 115, 101, 114, 116, 32, 83, 68, 32
   \              20534420    
   \   0000000A   63617264206E       DC8 99, 97, 114, 100, 32, 110, 111, 119, 32, 111
   \              6F77206F    
   \   00000014   7220706F7765       DC8 114, 32, 112, 111, 119, 101, 114, 32, 100, 111
   \              7220646F    
   \   0000001E   776E00000000       DC8 119, 110, 0, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "RETRY">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   524554525900       DC8 82, 69, 84, 82, 89, 0, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "POWER DOWN">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   504F57455220       DC8 80, 79, 87, 69, 82, 32, 68, 79, 87, 78
   \              444F574E    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "SD CARD REMOVED!">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   534420434152       DC8 83, 68, 32, 67, 65, 82, 68, 32, 82, 69
   \              44205245    
   \   0000000A   4D4F56454421       DC8 77, 79, 86, 69, 68, 33, 0, 0, 0, 0
   \              00000000    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Cannot record further...">`:
   \   00000000                      ; Initializer data, 40 bytes
   \   00000000   43616E6E6F74       DC8 67, 97, 110, 110, 111, 116, 32, 114, 101, 99
   \              20726563    
   \   0000000A   6F7264206675       DC8 111, 114, 100, 32, 102, 117, 114, 116, 104, 101
   \              72746865    
   \   00000014   722064617461       DC8 114, 32, 100, 97, 116, 97, 32, 119, 105, 116
   \              20776974    
   \   0000001E   686F75742063       DC8 104, 111, 117, 116, 32, 99, 97, 114, 100, 0
   \              61726400    

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "TRAQDASH">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   545241514441       DC8 84, 82, 65, 81, 68, 65, 83, 72, 0, 0
   \              53480000    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "CommSimulatorTask">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   436F6D6D5369       DC8 67, 111, 109, 109, 83, 105, 109, 117, 108, 97
   \              6D756C61    
   \   0000000A   746F72546173       DC8 116, 111, 114, 84, 97, 115, 107, 0, 0, 0
   \              6B000000    

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "NEW SU FIRMWARE FOUND">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   4E4557205355       DC8 78, 69, 87, 32, 83, 85, 32, 70, 73, 82
   \              20464952    
   \   0000000A   4D5741524520       DC8 77, 87, 65, 82, 69, 32, 70, 79, 85, 78
   \              464F554E    
   \   00000014   44000000           DC8 68, 0, 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Update Connected SU F...">`:
   \   00000000                      ; Initializer data, 32 bytes
   \   00000000   557064617465       DC8 85, 112, 100, 97, 116, 101, 32, 67, 111, 110
   \              20436F6E    
   \   0000000A   6E6563746564       DC8 110, 101, 99, 116, 101, 100, 32, 83, 85, 32
   \              20535520    
   \   00000014   4669726D7761       DC8 70, 105, 114, 109, 119, 97, 114, 101, 63, 0
   \              72653F00    
   \   0000001E   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "NEW FIRMWARE FOUND">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   4E4557204649       DC8 78, 69, 87, 32, 70, 73, 82, 77, 87, 65
   \              524D5741    
   \   0000000A   524520464F55       DC8 82, 69, 32, 70, 79, 85, 78, 68, 0, 0
   \              4E440000    

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Update TraqDash Firmw...">`:
   \   00000000                      ; Initializer data, 28 bytes
   \   00000000   557064617465       DC8 85, 112, 100, 97, 116, 101, 32, 84, 114, 97
   \              20547261    
   \   0000000A   714461736820       DC8 113, 68, 97, 115, 104, 32, 70, 105, 114, 109
   \              4669726D    
   \   00000014   776172653F00       DC8 119, 97, 114, 101, 63, 0, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "NEW BOOTLOADER FOUND">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   4E455720424F       DC8 78, 69, 87, 32, 66, 79, 79, 84, 76, 79
   \              4F544C4F    
   \   0000000A   414445522046       DC8 65, 68, 69, 82, 32, 70, 79, 85, 78, 68
   \              4F554E44    
   \   00000014   00000000           DC8 0, 0, 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Update TraqDash Bootl...">`:
   \   00000000                      ; Initializer data, 28 bytes
   \   00000000   557064617465       DC8 85, 112, 100, 97, 116, 101, 32, 84, 114, 97
   \              20547261    
   \   0000000A   714461736820       DC8 113, 68, 97, 115, 104, 32, 66, 111, 111, 116
   \              426F6F74    
   \   00000014   6C6F61646572       DC8 108, 111, 97, 100, 101, 114, 63, 0
   \              3F00        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Current Rev %1.2f, Ne...">`:
   \   00000000                      ; Initializer data, 36 bytes
   \   00000000   43757272656E       DC8 67, 117, 114, 114, 101, 110, 116, 32, 82, 101
   \              74205265    
   \   0000000A   762025312E32       DC8 118, 32, 37, 49, 46, 50, 102, 44, 32, 78
   \              662C204E    
   \   00000014   657720526576       DC8 101, 119, 32, 82, 101, 118, 32, 37, 49, 46
   \              2025312E    
   \   0000001E   326600000000       DC8 50, 102, 0, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "What would you like t...">`:
   \   00000000                      ; Initializer data, 28 bytes
   \   00000000   576861742077       DC8 87, 104, 97, 116, 32, 119, 111, 117, 108, 100
   \              6F756C64    
   \   0000000A   20796F75206C       DC8 32, 121, 111, 117, 32, 108, 105, 107, 101, 32
   \              696B6520    
   \   00000014   746F20646F3F       DC8 116, 111, 32, 100, 111, 63, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "POWER OFF">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   504F57455220       DC8 80, 79, 87, 69, 82, 32, 79, 70, 70, 0
   \              4F464600    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "RUN WITHOUT">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   52554E205749       DC8 82, 85, 78, 32, 87, 73, 84, 72, 79, 85
   \              54484F55    
   \   0000000A   5400               DC8 84, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "SD CARD INSERTED!">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   534420434152       DC8 83, 68, 32, 67, 65, 82, 68, 32, 73, 78
   \              4420494E    
   \   0000000A   534552544544       DC8 83, 69, 82, 84, 69, 68, 33, 0, 0, 0
   \              21000000    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Must reset unit to st...">`:
   \   00000000                      ; Initializer data, 44 bytes
   \   00000000   4D7573742072       DC8 77, 117, 115, 116, 32, 114, 101, 115, 101, 116
   \              65736574    
   \   0000000A   20756E697420       DC8 32, 117, 110, 105, 116, 32, 116, 111, 32, 115
   \              746F2073    
   \   00000014   746172742075       DC8 116, 97, 114, 116, 32, 117, 115, 105, 110, 103
   \              73696E67    
   \   0000001E   207468697320       DC8 32, 116, 104, 105, 115, 32, 99, 97, 114, 100
   \              63617264    
   \   00000028   00000000           DC8 0, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "RESET UNIT">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   524553455420       DC8 82, 69, 83, 69, 84, 32, 85, 78, 73, 84
   \              554E4954    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "UPDATE">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   555044415445       DC8 85, 80, 68, 65, 84, 69, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "SKIP">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   534B49500000       DC8 83, 75, 73, 80, 0, 0, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Do Not Disconnect or ...">`:
   \   00000000                      ; Initializer data, 32 bytes
   \   00000000   446F204E6F74       DC8 68, 111, 32, 78, 111, 116, 32, 68, 105, 115
   \              20446973    
   \   0000000A   636F6E6E6563       DC8 99, 111, 110, 110, 101, 99, 116, 32, 111, 114
   \              74206F72    
   \   00000014   20506F776572       DC8 32, 80, 111, 119, 101, 114, 32, 68, 111, 119
   \              20446F77    
   \   0000001E   6E00               DC8 110, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\544729.sno">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   5C3534343732       DC8 92, 53, 52, 52, 55, 50, 57, 46, 115, 110
   \              392E736E    
   \   0000000A   6F00               DC8 111, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\testmode">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   5C746573746D       DC8 92, 116, 101, 115, 116, 109, 111, 100, 101, 0
   \              6F646500    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\demomode">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   5C64656D6F6D       DC8 92, 100, 101, 109, 111, 109, 111, 100, 101, 0
   \              6F646500    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\factmode">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   5C666163746D       DC8 92, 102, 97, 99, 116, 109, 111, 100, 101, 0
   \              6F646500    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\tempcal">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   5C74656D7063       DC8 92, 116, 101, 109, 112, 99, 97, 108, 0, 0
   \              616C0000    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "\\\\SD_WLAN\\\\CONFIG">`:
   \   00000000                      ; Initializer data, 16 bytes
   \   00000000   5C53445F574C       DC8 92, 83, 68, 95, 87, 76, 65, 78, 92, 67
   \              414E5C43    
   \   0000000A   4F4E46494700       DC8 79, 78, 70, 73, 71, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "System">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   53797374656D       DC8 83, 121, 115, 116, 101, 109, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Vehicle">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   56656869636C       DC8 86, 101, 104, 105, 99, 108, 101, 0
   \              6500        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Track">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   547261636B00       DC8 84, 114, 97, 99, 107, 0, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Driver">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   447269766572       DC8 68, 114, 105, 118, 101, 114, 0, 0
   \              0000        

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "r+">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   722B0000           DC8 114, 43, 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "tdfirm">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   74646669726D       DC8 116, 100, 102, 105, 114, 109, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "sufirm">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   73756669726D       DC8 115, 117, 102, 105, 114, 109, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "tdboot">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   7464626F6F74       DC8 116, 100, 98, 111, 111, 116, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Sending">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   53656E64696E       DC8 83, 101, 110, 100, 105, 110, 103, 0
   \              6700        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Error">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   4572726F7200       DC8 69, 114, 114, 111, 114, 0, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Wait for SU to Turn Off">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   576169742066       DC8 87, 97, 105, 116, 32, 102, 111, 114, 32, 83
   \              6F722053    
   \   0000000A   5520746F2054       DC8 85, 32, 116, 111, 32, 84, 117, 114, 110, 32
   \              75726E20    
   \   00000014   4F666600           DC8 79, 102, 102, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Erasing">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   45726173696E       DC8 69, 114, 97, 115, 105, 110, 103, 0
   \              6700        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Writing">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   57726974696E       DC8 87, 114, 105, 116, 105, 110, 103, 0
   \              6700        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Camera">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   43616D657261       DC8 67, 97, 109, 101, 114, 97, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Digital 4">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   446967697461       DC8 68, 105, 103, 105, 116, 97, 108, 32, 52, 0
   \              6C203400    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Digital 5">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   446967697461       DC8 68, 105, 103, 105, 116, 97, 108, 32, 53, 0
   \              6C203500    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "WiFi">`:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   576946690000       DC8 87, 105, 70, 105, 0, 0, 0, 0
   \              0000        

   \                                 In section .text, align 4, keep-with-next
   \                     `?<Constant "Analog %d">`:
   \   00000000                      ; Initializer data, 12 bytes
   \   00000000   416E616C6F67       DC8 65, 110, 97, 108, 111, 103, 32, 37, 100, 0
   \              20256400    
   \   0000000A   0000               DC8 0, 0

   \                                 In section .rodata, align 2, keep-with-next
   \                     `?<Constant "w">`:
   \   00000000                      ; Initializer data, 2 bytes
   \   00000000   7700               DC8 119, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "New Software Detected">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   4E657720536F       DC8 78, 101, 119, 32, 83, 111, 102, 116, 119, 97
   \              66747761    
   \   0000000A   726520446574       DC8 114, 101, 32, 68, 101, 116, 101, 99, 116, 101
   \              65637465    
   \   00000014   64000000           DC8 100, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "New Track Definitions...">`:
   \   00000000                      ; Initializer data, 40 bytes
   \   00000000   4E6577205472       DC8 78, 101, 119, 32, 84, 114, 97, 99, 107, 32
   \              61636B20    
   \   0000000A   446566696E69       DC8 68, 101, 102, 105, 110, 105, 116, 105, 111, 110
   \              74696F6E    
   \   00000014   732E20576F75       DC8 115, 46, 32, 87, 111, 117, 108, 100, 32, 121
   \              6C642079    
   \   0000001E   6F75206C696B       DC8 111, 117, 32, 108, 105, 107, 101, 0, 0, 0
   \              65000000    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "to update Start/Finis...">`:
   \   00000000                      ; Initializer data, 36 bytes
   \   00000000   746F20757064       DC8 116, 111, 32, 117, 112, 100, 97, 116, 101, 32
   \              61746520    
   \   0000000A   53746172742F       DC8 83, 116, 97, 114, 116, 47, 70, 105, 110, 105
   \              46696E69    
   \   00000014   736820636F6F       DC8 115, 104, 32, 99, 111, 111, 114, 100, 105, 110
   \              7264696E    
   \   0000001E   617465733F00       DC8 97, 116, 101, 115, 63, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "YES">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   59455300           DC8 89, 69, 83, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "NO">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   4E4F0000           DC8 78, 79, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant ", ">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   2C200000           DC8 44, 32, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "Check Your Settings">`:
   \   00000000                      ; Initializer data, 20 bytes
   \   00000000   436865636B20       DC8 67, 104, 101, 99, 107, 32, 89, 111, 117, 114
   \              596F7572    
   \   0000000A   205365747469       DC8 32, 83, 101, 116, 116, 105, 110, 103, 115, 0
   \              6E677300    

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "The following configu...">`:
   \   00000000                      ; Initializer data, 32 bytes
   \   00000000   54686520666F       DC8 84, 104, 101, 32, 102, 111, 108, 108, 111, 119
   \              6C6C6F77    
   \   0000000A   696E6720636F       DC8 105, 110, 103, 32, 99, 111, 110, 102, 105, 103
   \              6E666967    
   \   00000014   75726174696F       DC8 117, 114, 97, 116, 105, 111, 110, 40, 115, 41
   \              6E287329    
   \   0000001E   0000               DC8 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "were set to defaults:">`:
   \   00000000                      ; Initializer data, 24 bytes
   \   00000000   776572652073       DC8 119, 101, 114, 101, 32, 115, 101, 116, 32, 116
   \              65742074    
   \   0000000A   6F2064656661       DC8 111, 32, 100, 101, 102, 97, 117, 108, 116, 115
   \              756C7473    
   \   00000014   3A000000           DC8 58, 0, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "OK">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   4F4B0000           DC8 79, 75, 0, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant {{"", 0}, {"", 0}, {"", 0}}>`:
   \   00000000                      ; Initializer data, 60 bytes
   \   00000000   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              00000000    
   \   0000000A   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000010   00000000           DC32 0
   \   00000014   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              00000000    
   \   0000001E   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000024   00000000           DC32 0
   \   00000028   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              00000000    
   \   00000032   000000000000       DC8 0, 0, 0, 0, 0, 0
   \   00000038   00000000           DC32 0

   \                                 In section .rodata, align 2, keep-with-next
   \                     `?<Constant "\\\\">`:
   \   00000000                      ; Initializer data, 2 bytes
   \   00000000   5C00               DC8 92, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "tqc">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   74716300           DC8 116, 113, 99, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "tqb">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   74716200           DC8 116, 113, 98, 0

   \                                 In section .rodata, align 2, keep-with-next
   \                     `?<Constant "r">`:
   \   00000000                      ; Initializer data, 2 bytes
   \   00000000   7200               DC8 114, 0

   \                                 In section .rodata, align 4, keep-with-next
   \                     `?<Constant "USB">`:
   \   00000000                      ; Initializer data, 4 bytes
   \   00000000   55534200           DC8 85, 83, 66, 0
   1716          
   1717          /****** End of File *************************************************/

   Maximum stack usage in bytes:

     Function                 .cstack
     --------                 -------
     AskAndDoFormatSDCard          8
     ConfigureCache                8
     ConfigureForNoSDCard          8
     CreateProgressBar            32
     DisplayAnalogStatus          24
     DisplayInvalidFilesPopup     32
     DisplaySplashScreen1          8
     DisplaySplashScreen3         48
     InitializeTraqmateData        8
     InitializeTraqmateFiles      24
     MainTask                     88
     NewSWVersion                 40
     OkToUseSDCard                 0
     PowerOffUnit                 32
     ReFlashYorN                  72
     RepaintSplash                 8
     RetrySDCard                  24
     SDCardReinserted             16
     SDCardRemoved                16
     SaveFilesAndPowerDown         8
     SetPopupDefaults             56
     UserWantsToUpdateSF          16
     WriteCodeImage             1432
     local_itoa                   16
     reverse                      16


   Section sizes:

     Function/Label                          Bytes
     --------------                          -----
     popupTitleTextColor                        4
     VERSION_PATH                              28
     MainTask                                2100
     testMode                                  23
     demoMode
     factMode
     splashScreenStartTime
     debounce
     lockupSemaphore
     localSDCardFlag
     okToUseSDCard
     ConfigureForNoSDCard                      76
     RetrySDCard                              276
     NoSDCardResources                        120
     SetPopupDefaults                         336
     SDCardRemoved                            108
     SDCardRemovedResources                   120
     SDCardReinserted                         112
     SDCardReinsertedResources                 72
     ReFlashYorN                              308
     NewFirmwareResources                     144
     ShuttingDownResources                     48
     SafeToPowerOffUnit                        72
     PowerOffUnit                             236
     SaveFilesAndPowerDown                     40
     ConfigureCache                            56
     fileCache                                  4
     OkToUseSDCard                             12
     InitializeTraqmateFiles                  416
     local_itoa                               156
     reverse                                   76
     NewSWVersion                             328
     UserWantsToUpdateSF                      132
     CheckUpdateTracks                        120
     InitializeTraqmateData                    60
     fileList                                 100
     DisplayInvalidFilesPopup                 280
     InvalidFilesResources                     96
     AskAndDoFormatSDCard                      64
     CreateProgressBar                        180
     WriteCodeImage                          2688
     DriverRect                                 8
     VehicleRect                                8
     RepaintSplash                             68
     DisplaySplashScreen1                      68
     DisplaySplashScreen3                     864
     DisplayAnalogStatus                      100
     ??DataTable86                              4
     ??DataTable91                              4
     ??DataTable91_1                            4
     ??DataTable91_2                            4
     ??DataTable91_3                            4
     ??DataTable91_4                            4
     ??DataTable91_5                            4
     ??DataTable91_6                            4
     ??DataTable91_7                            4
     ??DataTable91_8                            4
     ??DataTable91_9                            4
     ??DataTable91_10                           4
     ??DataTable91_11                           4
     ??DataTable91_12                           4
     ??DataTable92                              4
     ??DataTable93                              4
     ??DataTable93_1                            4
     ??DataTable93_2                            4
     ??DataTable93_3                            4
     ??DataTable94                              4
     ??DataTable95                              4
     ??DataTable96                              4
     ??DataTable96_1                            4
     ??DataTable96_2                            4
     ??DataTable97                              4
     ??DataTable97_1                            4
     ??DataTable97_2                            4
     ??DataTable97_3                            4
     ??DataTable98                              4
     ??DataTable98_1                            4
     ??DataTable98_2                            4
     ??DataTable98_3                            4
     ??DataTable98_4                            4
     ??DataTable98_5                            4
     ??DataTable98_6                            4
     ??DataTable98_7                            4
     ??DataTable98_8                            4
     ??DataTable98_9                            4
     ??DataTable98_10                           4
     ??DataTable98_11                           4
     ??DataTable98_12                           4
     ??DataTable98_13                           4
     ??DataTable98_14                           4
     ??DataTable101                             4
     ??DataTable101_1                           4
     ??DataTable101_2                           4
     ??DataTable101_3                           4
     ??DataTable101_4                           4
     ??DataTable103                             4
     ??DataTable103_1                           4
     ??DataTable103_2                           4
     ??DataTable103_3                           4
     ??DataTable103_4                           4
     ??DataTable103_5                           4
     ??DataTable103_6                           4
     ??DataTable103_7                           4
     ??DataTable103_8                           4
     ??DataTable103_9                           4
     ??DataTable103_10                          4
     ??DataTable103_11                          4
     ??DataTable103_12                          4
     ??DataTable103_13                          4
     ??DataTable103_14                          4
     ??DataTable103_15                          4
     ??DataTable103_16                          4
     ??DataTable103_17                          4
     ??DataTable103_18                          4
     ??DataTable103_19                          4
     ??DataTable103_20                          4
     ??DataTable103_21                          4
     ??DataTable103_22                          4
     ??DataTable103_23                          4
     ??DataTable103_24                          4
     ??DataTable103_25                          4
     ??DataTable103_26                          4
     ??DataTable103_27                          4
     ??DataTable103_28                          4
     ??DataTable103_29                          4
     ??DataTable103_30                          4
     ?<Constant "STATUS">                       8
     ?<Constant "Saving Files">                16
     ?<Constant "All files saved.">            20
     ?<Constant "Powering off the unit.">      24
     ?<Constant "">                             1
     ?<Constant "SD CARD NOT READY!">          20
     ?<Constant "No SD card or write p...">    32
     ?<Constant "Insert SD card now or...">    36
     ?<Constant "RETRY">                        8
     ?<Constant "POWER DOWN">                  12
     ?<Constant "SD CARD REMOVED!">            20
     ?<Constant "Cannot record further...">    40
     ?<Constant "TRAQDASH">                    12
     ?<Constant "CommSimulatorTask">           20
     ?<Constant "NEW SU FIRMWARE FOUND">       24
     ?<Constant "Update Connected SU F...">    32
     ?<Constant "NEW FIRMWARE FOUND">          20
     ?<Constant "Update TraqDash Firmw...">    28
     ?<Constant "NEW BOOTLOADER FOUND">        24
     ?<Constant "Update TraqDash Bootl...">    28
     ?<Constant "Current Rev %1.2f, Ne...">    36
     ?<Constant "What would you like t...">    28
     ?<Constant "POWER OFF">                   12
     ?<Constant "RUN WITHOUT">                 12
     ?<Constant "SD CARD INSERTED!">           20
     ?<Constant "Must reset unit to st...">    44
     ?<Constant "RESET UNIT">                  12
     ?<Constant "UPDATE">                       8
     ?<Constant "SKIP">                         8
     ?<Constant "Do Not Disconnect or ...">    32
     ?<Constant "\\544729.sno">                12
     ?<Constant "\\testmode">                  12
     ?<Constant "\\demomode">                  12
     ?<Constant "\\factmode">                  12
     ?<Constant "\\tempcal">                   12
     ?<Constant "\\SD_WLAN\\CONFIG">           16
     ?<Constant "System">                       8
     ?<Constant "Vehicle">                      8
     ?<Constant "Track">                        8
     ?<Constant "Driver">                       8
     ?<Constant "r+">                           4
     ?<Constant "tdfirm">                       8
     ?<Constant "sufirm">                       8
     ?<Constant "tdboot">                       8
     ?<Constant "Sending">                      8
     ?<Constant "Error">                        8
     ?<Constant "Wait for SU to Turn Off">     24
     ?<Constant "Erasing">                      8
     ?<Constant "Writing">                      8
     ?<Constant "Camera">                       8
     ?<Constant "Digital 4">                   12
     ?<Constant "Digital 5">                   12
     ?<Constant "WiFi">                         8
     ?<Constant "Analog %d">                   12
     ?<Constant "w">                            2
     ?<Constant "New Software Detected">       24
     ?<Constant "New Track Definitions...">    40
     ?<Constant "to update Start/Finis...">    36
     ?<Constant "YES">                          4
     ?<Constant "NO">                           4
     ?<Constant ", ">                           4
     ?<Constant "Check Your Settings">         20
     ?<Constant "The following configu...">    32
     ?<Constant "were set to defaults:">       24
     ?<Constant "OK">                           4
     ?<Constant {{"", 0}, {"", 0}, {"", 0}}>   60
     ?<Constant "\\">                           2
     ?<Constant "tqc">                          4
     ?<Constant "tqb">                          4
     ?<Constant "r">                            2
     ?<Constant "USB">                          4

 
    123 bytes in section .bss
    152 bytes in section .data
    687 bytes in section .rodata
 10 612 bytes in section .text
 
 10 612 bytes of CODE  memory
    687 bytes of CONST memory
    275 bytes of DATA  memory

Errors: none
Warnings: none
