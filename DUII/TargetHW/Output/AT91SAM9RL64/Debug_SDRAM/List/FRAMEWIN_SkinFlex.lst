###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.10.2.52244/W32 for ARM     14/Jul/2015  18:58:51 #
# Copyright 1999-2010 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  arm                                                      #
#    Endian       =  little                                                   #
#    Source file  =  C:\DUII\TargetHW\GUI\FRAMEWIN_SkinFlex.c                 #
#    Command line =  C:\DUII\TargetHW\GUI\FRAMEWIN_SkinFlex.c -D DEBUG=1 -D   #
#                    SDRAM_TARGET=1 -D USB_IS_HIGH_SPEED -D                   #
#                    XIGNORE_TEMPERATURE -D BUILD_DEBUG_PORT -D PROFILER      #
#                    -lCN C:\DUII\TargetHW\Output\AT91SAM9RL64\Debug_SDRAM\Li #
#                    st\ -o C:\DUII\TargetHW\Output\AT91SAM9RL64\Debug_SDRAM\ #
#                    Obj\ --debug --endian=little --cpu=ARM926EJ-S -e         #
#                    --fpu=None --dlib_config "C:\Program Files (x86)\IAR     #
#                    Systems\Embedded Workbench 6.0\arm\INC\c\DLib_Config_Ful #
#                    l.h" -I C:\DUII\TargetHW\Application\SEGGERDEMO\ -I      #
#                    C:\DUII\TargetHW\Application\SEGGERDEMO\Src\ -I          #
#                    C:\DUII\TargetHW\Config\ -I C:\DUII\TargetHW\FS\ -I      #
#                    C:\DUII\TargetHW\GUI\ -I C:\DUII\TargetHW\Inc\ -I        #
#                    C:\DUII\TargetHW\OS\ -I C:\DUII\TargetHW\Setup\ -I       #
#                    \DUII\DUII\ -I \DUII\DUII\Graphics\ -I PROFILER\         #
#                    --cpu_mode arm -Ohs --use_c++_inline                     #
#                    --require_prototypes                                     #
#    List file    =  C:\DUII\TargetHW\Output\AT91SAM9RL64\Debug_SDRAM\List\FR #
#                    AMEWIN_SkinFlex.lst                                      #
#    Object file  =  C:\DUII\TargetHW\Output\AT91SAM9RL64\Debug_SDRAM\Obj\FRA #
#                    MEWIN_SkinFlex.o                                         #
#                                                                             #
#                                                                             #
###############################################################################

C:\DUII\TargetHW\GUI\FRAMEWIN_SkinFlex.c
      1          /*********************************************************************
      2          *                SEGGER Microcontroller GmbH & Co. KG                *
      3          *        Solutions for real time microcontroller applications        *
      4          **********************************************************************
      5          *                                                                    *
      6          *        (c) 1996 - 2010  SEGGER Microcontroller GmbH & Co. KG       *
      7          *                                                                    *
      8          *        Internet: www.segger.com    Support:  support@segger.com    *
      9          *                                                                    *
     10          **********************************************************************
     11          
     12          ** emWin V5.06 - Graphical user interface for embedded applications **
     13          emWin is protected by international copyright laws.   Knowledge of the
     14          source code may not be used to write a similar product.  This file may
     15          only be used in accordance with a license and should not be re-
     16          distributed in any way. We appreciate your understanding and fairness.
     17          ----------------------------------------------------------------------
     18          File        : FRAMEWIN_SkinFlex.c
     19          Purpose     : Implementation of framewindow skin
     20          ---------------------------END-OF-HEADER------------------------------
     21          */
     22          
     23          #include "FRAMEWIN_Private.h"
     24          #include "GUI_Private.h"
     25          #include "WM_Intern.h"
     26          
     27          #if GUI_WINSUPPORT
     28          
     29          /*********************************************************************
     30          *
     31          *       Defines (configuration defaults)
     32          *
     33          **********************************************************************
     34          */
     35          #ifndef   FRAMEWIN_SKINFLEX_BORDERSIZE_L
     36            #define FRAMEWIN_SKINFLEX_BORDERSIZE_L 5
     37          #endif
     38          #ifndef   FRAMEWIN_SKINFLEX_BORDERSIZE_R
     39            #define FRAMEWIN_SKINFLEX_BORDERSIZE_R 5
     40          #endif
     41          #ifndef   FRAMEWIN_SKINFLEX_BORDERSIZE_T
     42            #define FRAMEWIN_SKINFLEX_BORDERSIZE_T 2
     43          #endif
     44          #ifndef   FRAMEWIN_SKINFLEX_BORDERSIZE_B
     45            #define FRAMEWIN_SKINFLEX_BORDERSIZE_B 4
     46          #endif
     47          #ifndef   FRAMEWIN_SKINFLEX_RADIUS
     48            #define FRAMEWIN_SKINFLEX_RADIUS       5
     49          #endif
     50          #ifndef   FRAMEWIN_SKINFLEX_SPACE_X
     51            #define FRAMEWIN_SKINFLEX_SPACE_X      0
     52          #endif
     53          
     54          #ifndef   FRAMEWIN_SKINPROPS_ACTIVE

   \                                 In section .data, align 4
     55            static FRAMEWIN_SKINFLEX_PROPS _PropsActive = {
   \                     _PropsActive:
   \   00000000   00000000FFFF       DC32 0, 16777215, 13809306, 13809306, 15389113, 5, 0, 5, 5, 2, 4
   \              FF009AB6D200
   \              9AB6D200B9D1
   \              EA0005000000
   \              000000000500
   \              000005000000
   \              020000000400
   \              0000        
     56              { 0x00000000, 0x00FFFFFF, 0x00D2B69A },
     57              { 0x00D2B69A, 0x00EAD1B9 },
     58              FRAMEWIN_SKINFLEX_RADIUS,   
     59              FRAMEWIN_SKINFLEX_SPACE_X,   
     60              FRAMEWIN_SKINFLEX_BORDERSIZE_L,
     61              FRAMEWIN_SKINFLEX_BORDERSIZE_R,
     62              FRAMEWIN_SKINFLEX_BORDERSIZE_T,
     63              FRAMEWIN_SKINFLEX_BORDERSIZE_B
     64            };
     65            #define FRAMEWIN_SKINPROPS_ACTIVE      &_PropsActive
     66          #endif
     67          
     68          #ifndef   FRAMEWIN_SKINPROPS_INACTIVE
     69            static FRAMEWIN_SKINFLEX_PROPS _PropsInactive = {
   \                     _PropsInactive:
   \   0000002C   4C4C4C00FFFF       DC32 5000268, 16777215, 14470848, 14470848, 15918295, 5, 0, 5, 5, 2, 4
   \              FF00C0CEDC00
   \              C0CEDC00D7E4
   \              F20005000000
   \              000000000500
   \              000005000000
   \              020000000400
   \              0000        
     70              { 0x004C4C4C, 0x00FFFFFF, 0x00DCCEC0 },
     71              { 0x00DCCEC0, 0x00F2E4D7 },
     72              FRAMEWIN_SKINFLEX_RADIUS,   
     73              FRAMEWIN_SKINFLEX_SPACE_X,   
     74              FRAMEWIN_SKINFLEX_BORDERSIZE_L,
     75              FRAMEWIN_SKINFLEX_BORDERSIZE_R,
     76              FRAMEWIN_SKINFLEX_BORDERSIZE_T,
     77              FRAMEWIN_SKINFLEX_BORDERSIZE_B
     78            };
     79            #define FRAMEWIN_SKINPROPS_INACTIVE    &_PropsInactive
     80          #endif
     81          
     82          /*********************************************************************
     83          *
     84          *       Static data
     85          *
     86          **********************************************************************
     87          */

   \                                 In section .text, align 4, keep-with-next
     88          static FRAMEWIN_SKINFLEX_PROPS * const _apProps[] = {
   \                     _apProps:
   \   00000000                      ; Initializer data, 8 bytes
   \   00000000   ............       DC32 _PropsActive, _PropsInactive
   \              ....        
     89            FRAMEWIN_SKINPROPS_ACTIVE,
     90            FRAMEWIN_SKINPROPS_INACTIVE
     91          };
     92          
     93          /*********************************************************************
     94          *
     95          *        Public code
     96          *
     97          **********************************************************************
     98          */
     99          /*********************************************************************
    100          *
    101          *       FRAMEWIN_DrawSkinFlex
    102          */

   \                                 In section .text, align 4, keep-with-next
    103          int FRAMEWIN_DrawSkinFlex(const WIDGET_ITEM_DRAW_INFO * pDrawItemInfo) {
   \                     FRAMEWIN_DrawSkinFlex:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   0050A0E1           MOV      R5,R0
   \   00000008   14D04DE2           SUB      SP,SP,#+20
    104            const FRAMEWIN_SKINFLEX_PROPS * pProps;
    105            GUI_RECT Rect;
    106            FRAMEWIN_Obj * pObj;
    107            int ColorIndex;
    108            const char * pText;
    109            int IsActive, x0, y0, x1, y1;
    110          
    111            IsActive = FRAMEWIN_GetActive(pDrawItemInfo->hWin);
    112            pProps = (IsActive) ? _apProps[FRAMEWIN_SKINFLEX_PI_ACTIVE] : _apProps[FRAMEWIN_SKINFLEX_PI_INACTIVE];
   \   0000000C   ........           LDR      R4,??DataTable1
   \   00000010   000095E5           LDR      R0,[R5, #+0]
   \   00000014   ........           BL       FRAMEWIN_GetActive
   \   00000018   000050E3           CMP      R0,#+0
    113            switch (pDrawItemInfo->Cmd) {
   \   0000001C   040095E5           LDR      R0,[R5, #+4]
   \   00000020   2C408402           ADDEQ    R4,R4,#+44
   \   00000024   160050E3           CMP      R0,#+22
   \   00000028   00F18F90           ADDLS    PC,PC,R0, LSL #+2
   \                     ??FRAMEWIN_DrawSkinFlex_0:
   \   0000002C   3801008A           BHI      ??FRAMEWIN_DrawSkinFlex_1
   \   00000030   2F0100EA           B        ??FRAMEWIN_DrawSkinFlex_2
   \   00000034   360100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000038   350100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   0000003C   E90000EA           B        ??FRAMEWIN_DrawSkinFlex_3
   \   00000040   330100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000044   320100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000048   310100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   0000004C   300100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000050   2F0100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000054   140000EA           B        ??FRAMEWIN_DrawSkinFlex_4
   \   00000058   2D0100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   0000005C   2C0100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000060   160100EA           B        ??FRAMEWIN_DrawSkinFlex_5
   \   00000064   2A0100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000068   290100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   0000006C   280100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000070   EE0000EA           B        ??FRAMEWIN_DrawSkinFlex_6
   \   00000074   260100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   00000078   250100EA           B        ??FRAMEWIN_DrawSkinFlex_1
   \   0000007C   080000EA           B        ??FRAMEWIN_DrawSkinFlex_7
   \   00000080   010000EA           B        ??FRAMEWIN_DrawSkinFlex_8
   \   00000084   020000EA           B        ??FRAMEWIN_DrawSkinFlex_9
   \   00000088   030000EA           B        ??FRAMEWIN_DrawSkinFlex_10
    114            case WIDGET_ITEM_GET_BORDERSIZE_L:
    115              return pProps->BorderSizeL;
   \                     ??FRAMEWIN_DrawSkinFlex_8:
   \   0000008C   1C0094E5           LDR      R0,[R4, #+28]
   \   00000090   200100EA           B        ??FRAMEWIN_DrawSkinFlex_11
    116            case WIDGET_ITEM_GET_BORDERSIZE_R:
    117              return pProps->BorderSizeR;
   \                     ??FRAMEWIN_DrawSkinFlex_9:
   \   00000094   200094E5           LDR      R0,[R4, #+32]
   \   00000098   1E0100EA           B        ??FRAMEWIN_DrawSkinFlex_11
    118            case WIDGET_ITEM_GET_BORDERSIZE_T:
    119              return pProps->BorderSizeT;
   \                     ??FRAMEWIN_DrawSkinFlex_10:
   \   0000009C   240094E5           LDR      R0,[R4, #+36]
   \   000000A0   1C0100EA           B        ??FRAMEWIN_DrawSkinFlex_11
    120            case WIDGET_ITEM_GET_BORDERSIZE_B:
    121              return pProps->BorderSizeB;
   \                     ??FRAMEWIN_DrawSkinFlex_7:
   \   000000A4   280094E5           LDR      R0,[R4, #+40]
   \   000000A8   1A0100EA           B        ??FRAMEWIN_DrawSkinFlex_11
    122            case WIDGET_ITEM_DRAW_FRAME:
    123              //
    124              // Rounded corners
    125              //
    126              if (pProps->Radius >= 2) {
   \                     ??FRAMEWIN_DrawSkinFlex_4:
   \   000000AC   143094E5           LDR      R3,[R4, #+20]
   \   000000B0   000094E5           LDR      R0,[R4, #+0]
   \   000000B4   020053E3           CMP      R3,#+2
   \   000000B8   090000BA           BLT      ??FRAMEWIN_DrawSkinFlex_12
    127                GUI__DrawTwinArc2(pDrawItemInfo->x0, pDrawItemInfo->x1, pDrawItemInfo->y0, pProps->Radius, pProps->aColorFrame[0], pProps->aColorFrame[1], pProps->aColorFrame[2]);
   \   000000BC   081094E5           LDR      R1,[R4, #+8]
   \   000000C0   08108DE5           STR      R1,[SP, #+8]
   \   000000C4   041094E5           LDR      R1,[R4, #+4]
   \   000000C8   00008DE5           STR      R0,[SP, #+0]
   \   000000CC   04108DE5           STR      R1,[SP, #+4]
   \   000000D0   102095E5           LDR      R2,[R5, #+16]
   \   000000D4   141095E5           LDR      R1,[R5, #+20]
   \   000000D8   0C0095E5           LDR      R0,[R5, #+12]
   \   000000DC   ........           BL       GUI__DrawTwinArc2
   \   000000E0   1E0000EA           B        ??FRAMEWIN_DrawSkinFlex_13
    128              } else {
    129                GUI_SetColor(pProps->aColorFrame[0]);
   \                     ??FRAMEWIN_DrawSkinFlex_12:
   \   000000E4   ........           BL       GUI_SetColor
    130                GUI_DrawHLine(pDrawItemInfo->y0, pDrawItemInfo->x0, pDrawItemInfo->x0 + pProps->BorderSizeL - 1);
   \   000000E8   0C1095E5           LDR      R1,[R5, #+12]
   \   000000EC   1C0094E5           LDR      R0,[R4, #+28]
   \   000000F0   010080E0           ADD      R0,R0,R1
   \   000000F4   012040E2           SUB      R2,R0,#+1
   \   000000F8   100095E5           LDR      R0,[R5, #+16]
   \   000000FC   ........           BL       GUI_DrawHLine
    131                GUI_DrawHLine(pDrawItemInfo->y0, pDrawItemInfo->x1 - pProps->BorderSizeL + 1, pDrawItemInfo->x1);
   \   00000100   142095E5           LDR      R2,[R5, #+20]
   \   00000104   1C0094E5           LDR      R0,[R4, #+28]
   \   00000108   000042E0           SUB      R0,R2,R0
   \   0000010C   011080E2           ADD      R1,R0,#+1
   \   00000110   100095E5           LDR      R0,[R5, #+16]
   \   00000114   ........           BL       GUI_DrawHLine
    132                y0 = pDrawItemInfo->y0 + 1;
   \   00000118   100095E5           LDR      R0,[R5, #+16]
   \   0000011C   019080E2           ADD      R9,R0,#+1
    133                GUI_DrawPixel(pDrawItemInfo->x0, y0);
   \   00000120   0910A0E1           MOV      R1,R9
   \   00000124   0C0095E5           LDR      R0,[R5, #+12]
   \   00000128   ........           BL       GUI_DrawPixel
    134                GUI_DrawPixel(pDrawItemInfo->x1, y0);
   \   0000012C   0910A0E1           MOV      R1,R9
   \   00000130   140095E5           LDR      R0,[R5, #+20]
   \   00000134   ........           BL       GUI_DrawPixel
    135                GUI_SetColor(pProps->aColorFrame[1]);
   \   00000138   040094E5           LDR      R0,[R4, #+4]
   \   0000013C   ........           BL       GUI_SetColor
    136                GUI_DrawPixel(pDrawItemInfo->x0 + 1, y0);
   \   00000140   0C0095E5           LDR      R0,[R5, #+12]
   \   00000144   0910A0E1           MOV      R1,R9
   \   00000148   010080E2           ADD      R0,R0,#+1
   \   0000014C   ........           BL       GUI_DrawPixel
    137                GUI_DrawPixel(pDrawItemInfo->x1 - 1, y0);
   \   00000150   140095E5           LDR      R0,[R5, #+20]
   \   00000154   0910A0E1           MOV      R1,R9
   \   00000158   010040E2           SUB      R0,R0,#+1
   \   0000015C   ........           BL       GUI_DrawPixel
    138              }
    139              //
    140              // Border top
    141              //
    142              if (pProps->Radius >= 2) {
   \                     ??FRAMEWIN_DrawSkinFlex_13:
   \   00000160   142094E5           LDR      R2,[R4, #+20]
   \   00000164   140095E5           LDR      R0,[R5, #+20]
   \   00000168   0C1095E5           LDR      R1,[R5, #+12]
   \   0000016C   020052E3           CMP      R2,#+2
    143                x0 = pDrawItemInfo->x0 + pProps->Radius;
    144                x1 = pDrawItemInfo->x1 - pProps->Radius;
   \   00000170   027040A0           SUBGE    R7,R0,R2
    145              } else {
    146                x0 = pDrawItemInfo->x0 + 2;
    147                x1 = pDrawItemInfo->x1 - 2;
   \   00000174   027040B2           SUBLT    R7,R0,#+2
   \   00000178   016082A0           ADDGE    R6,R2,R1
   \   0000017C   026081B2           ADDLT    R6,R1,#+2
    148              }
    149              GUI_SetColor(pProps->aColorFrame[0]);
   \   00000180   000094E5           LDR      R0,[R4, #+0]
   \   00000184   ........           BL       GUI_SetColor
    150              GUI_DrawHLine(pDrawItemInfo->y0, x0, x1);
   \   00000188   0720A0E1           MOV      R2,R7
   \   0000018C   0610A0E1           MOV      R1,R6
   \   00000190   100095E5           LDR      R0,[R5, #+16]
   \   00000194   ........           BL       GUI_DrawHLine
    151              GUI_SetColor(pProps->aColorFrame[1]);
   \   00000198   040094E5           LDR      R0,[R4, #+4]
   \   0000019C   ........           BL       GUI_SetColor
    152              GUI_DrawHLine(pDrawItemInfo->y0 + 1, x0, x1);
   \   000001A0   100095E5           LDR      R0,[R5, #+16]
   \   000001A4   0720A0E1           MOV      R2,R7
   \   000001A8   0610A0E1           MOV      R1,R6
   \   000001AC   010080E2           ADD      R0,R0,#+1
   \   000001B0   ........           BL       GUI_DrawHLine
    153              if (pProps->BorderSizeT > 2) {
   \   000001B4   240094E5           LDR      R0,[R4, #+36]
   \   000001B8   030050E3           CMP      R0,#+3
   \   000001BC   090000BA           BLT      ??FRAMEWIN_DrawSkinFlex_14
    154                GUI_SetColor(pProps->aColorFrame[2]);
   \   000001C0   080094E5           LDR      R0,[R4, #+8]
   \   000001C4   ........           BL       GUI_SetColor
    155                y0 = pDrawItemInfo->y0 + 2;
    156                y1 = pDrawItemInfo->y0 + pProps->BorderSizeT - 1;
    157                GUI_FillRect(x0, y0, x1, y1);
   \   000001C8   100095E5           LDR      R0,[R5, #+16]
   \   000001CC   241094E5           LDR      R1,[R4, #+36]
   \   000001D0   0720A0E1           MOV      R2,R7
   \   000001D4   001081E0           ADD      R1,R1,R0
   \   000001D8   013041E2           SUB      R3,R1,#+1
   \   000001DC   021080E2           ADD      R1,R0,#+2
   \   000001E0   0600A0E1           MOV      R0,R6
   \   000001E4   1C0000EA           B        ??FRAMEWIN_DrawSkinFlex_15
    158              } else {
    159                if (pProps->BorderSizeR > pProps->Radius) {
   \                     ??FRAMEWIN_DrawSkinFlex_14:
   \   000001E8   200094E5           LDR      R0,[R4, #+32]
   \   000001EC   141094E5           LDR      R1,[R4, #+20]
   \   000001F0   000051E1           CMP      R1,R0
   \   000001F4   190000AA           BGE      ??FRAMEWIN_DrawSkinFlex_16
    160                  y0 = pDrawItemInfo->y0 + 2;
   \   000001F8   102095E5           LDR      R2,[R5, #+16]
    161                  y1 = (pProps->Radius >= 2) ? pDrawItemInfo->y0 + pProps->Radius : pDrawItemInfo->y0 + 2;
   \   000001FC   0CC095E5           LDR      R12,[R5, #+12]
   \   00000200   028082E2           ADD      R8,R2,#+2
   \   00000204   0890A0E1           MOV      R9,R8
   \   00000208   020051E3           CMP      R1,#+2
   \   0000020C   028081A0           ADDGE    R8,R1,R2
    162                  x0 = (pProps->Radius >= 2) ? pDrawItemInfo->x0 + pProps->Radius : pDrawItemInfo->x0 + 2;
    163                  x1 = pDrawItemInfo->x0 + pProps->BorderSizeR - 1;
    164                  GUI_FillRect(x0, y0, x1, y1);
   \   00000210   0C0080E0           ADD      R0,R0,R12
   \   00000214   0C6081A0           ADDGE    R6,R1,R12
   \   00000218   02608CB2           ADDLT    R6,R12,#+2
   \   0000021C   012040E2           SUB      R2,R0,#+1
   \   00000220   0830A0E1           MOV      R3,R8
   \   00000224   0910A0E1           MOV      R1,R9
   \   00000228   0600A0E1           MOV      R0,R6
   \   0000022C   ........           BL       GUI_FillRect
    165                  x1 = (pProps->Radius >= 2) ? pDrawItemInfo->x1 - pProps->Radius : pDrawItemInfo->x1 - 2;
   \   00000230   141094E5           LDR      R1,[R4, #+20]
   \   00000234   140095E5           LDR      R0,[R5, #+20]
   \   00000238   020051E3           CMP      R1,#+2
    166                  x0 = pDrawItemInfo->x1 - pProps->BorderSizeL + 1;
    167                  GUI_FillRect(x0, y0, x1, y1);
   \   0000023C   1CC094E5           LDR      R12,[R4, #+28]
   \   00000240   017040A0           SUBGE    R7,R0,R1
   \   00000244   027040B2           SUBLT    R7,R0,#+2
   \   00000248   0C0040E0           SUB      R0,R0,R12
   \   0000024C   0830A0E1           MOV      R3,R8
   \   00000250   0720A0E1           MOV      R2,R7
   \   00000254   0910A0E1           MOV      R1,R9
   \   00000258   010080E2           ADD      R0,R0,#+1
   \                     ??FRAMEWIN_DrawSkinFlex_15:
   \   0000025C   ........           BL       GUI_FillRect
    168                }
    169              }
    170              //
    171              // Border left & right
    172              //
    173              y0 = (pProps->Radius >= 2) ? pDrawItemInfo->y0 + pProps->Radius : pDrawItemInfo->y0 + 2;
   \                     ??FRAMEWIN_DrawSkinFlex_16:
   \   00000260   141094E5           LDR      R1,[R4, #+20]
   \   00000264   100095E5           LDR      R0,[R5, #+16]
   \   00000268   020051E3           CMP      R1,#+2
   \   0000026C   008081A0           ADDGE    R8,R1,R0
   \   00000270   028080B2           ADDLT    R8,R0,#+2
    174              y1 = pDrawItemInfo->y1 - 1;
   \   00000274   180095E5           LDR      R0,[R5, #+24]
   \   00000278   016040E2           SUB      R6,R0,#+1
    175              GUI_SetColor(pProps->aColorFrame[0]);
   \   0000027C   000094E5           LDR      R0,[R4, #+0]
   \   00000280   ........           BL       GUI_SetColor
    176              GUI_DrawVLine(pDrawItemInfo->x0, y0, y1);
   \   00000284   0620A0E1           MOV      R2,R6
   \   00000288   0810A0E1           MOV      R1,R8
   \   0000028C   0C0095E5           LDR      R0,[R5, #+12]
   \   00000290   ........           BL       GUI_DrawVLine
    177              GUI_DrawVLine(pDrawItemInfo->x1, y0, y1);
   \   00000294   0620A0E1           MOV      R2,R6
   \   00000298   0810A0E1           MOV      R1,R8
   \   0000029C   140095E5           LDR      R0,[R5, #+20]
   \   000002A0   ........           BL       GUI_DrawVLine
    178              y1 = pDrawItemInfo->y1 - 2;
   \   000002A4   180095E5           LDR      R0,[R5, #+24]
   \   000002A8   029040E2           SUB      R9,R0,#+2
    179              GUI_SetColor(pProps->aColorFrame[1]);
   \   000002AC   040094E5           LDR      R0,[R4, #+4]
   \   000002B0   ........           BL       GUI_SetColor
    180              GUI_DrawVLine(pDrawItemInfo->x0 + 1, y0, y1);
   \   000002B4   0C0095E5           LDR      R0,[R5, #+12]
   \   000002B8   0920A0E1           MOV      R2,R9
   \   000002BC   0810A0E1           MOV      R1,R8
   \   000002C0   010080E2           ADD      R0,R0,#+1
   \   000002C4   ........           BL       GUI_DrawVLine
    181              GUI_DrawVLine(pDrawItemInfo->x1 - 1, y0, y1);
   \   000002C8   140095E5           LDR      R0,[R5, #+20]
   \   000002CC   0920A0E1           MOV      R2,R9
   \   000002D0   0810A0E1           MOV      R1,R8
   \   000002D4   010040E2           SUB      R0,R0,#+1
   \   000002D8   ........           BL       GUI_DrawVLine
    182              if ((pProps->BorderSizeL > 2) || (pProps->BorderSizeR > 2)) {
   \   000002DC   1C0094E5           LDR      R0,[R4, #+28]
   \   000002E0   030050E3           CMP      R0,#+3
   \   000002E4   200094B5           LDRLT    R0,[R4, #+32]
   \   000002E8   030050B3           CMPLT    R0,#+3
   \   000002EC   1B0000BA           BLT      ??FRAMEWIN_DrawSkinFlex_17
    183                y1 = (pProps->BorderSizeB > 2) ? pDrawItemInfo->y1 - pProps->BorderSizeB : pDrawItemInfo->y1 - 2;
   \   000002F0   281094E5           LDR      R1,[R4, #+40]
   \   000002F4   180095E5           LDR      R0,[R5, #+24]
   \   000002F8   030051E3           CMP      R1,#+3
   \   000002FC   019040A0           SUBGE    R9,R0,R1
   \   00000300   029040B2           SUBLT    R9,R0,#+2
    184                GUI_SetColor(pProps->aColorFrame[2]);
   \   00000304   080094E5           LDR      R0,[R4, #+8]
   \   00000308   ........           BL       GUI_SetColor
    185                if (pProps->BorderSizeL > 2) {
   \   0000030C   1C0094E5           LDR      R0,[R4, #+28]
   \   00000310   030050E3           CMP      R0,#+3
   \   00000314   060000BA           BLT      ??FRAMEWIN_DrawSkinFlex_18
    186                  x0 = pDrawItemInfo->x0 + 2;
    187                  x1 = pDrawItemInfo->x0 + pProps->BorderSizeL - 1;
    188                  GUI_FillRect(x0, y0, x1, y1);
   \   00000318   0CC095E5           LDR      R12,[R5, #+12]
   \   0000031C   0930A0E1           MOV      R3,R9
   \   00000320   0C0080E0           ADD      R0,R0,R12
   \   00000324   012040E2           SUB      R2,R0,#+1
   \   00000328   0810A0E1           MOV      R1,R8
   \   0000032C   02008CE2           ADD      R0,R12,#+2
   \   00000330   ........           BL       GUI_FillRect
    189                }
    190                if (pProps->BorderSizeR > 2) {
   \                     ??FRAMEWIN_DrawSkinFlex_18:
   \   00000334   200094E5           LDR      R0,[R4, #+32]
   \   00000338   030050E3           CMP      R0,#+3
   \   0000033C   070000BA           BLT      ??FRAMEWIN_DrawSkinFlex_17
    191                  x0 = pDrawItemInfo->x1 - pProps->BorderSizeL + 1;
    192                  x1 = pDrawItemInfo->x1 - 2;
    193                  GUI_FillRect(x0, y0, x1, y1);
   \   00000340   140095E5           LDR      R0,[R5, #+20]
   \   00000344   1CC094E5           LDR      R12,[R4, #+28]
   \   00000348   022040E2           SUB      R2,R0,#+2
   \   0000034C   0C0040E0           SUB      R0,R0,R12
   \   00000350   0930A0E1           MOV      R3,R9
   \   00000354   0810A0E1           MOV      R1,R8
   \   00000358   010080E2           ADD      R0,R0,#+1
   \   0000035C   ........           BL       GUI_FillRect
    194                }
    195              }
    196              //
    197              // Border bottom
    198              //
    199              GUI_SetColor(pProps->aColorFrame[0]);
   \                     ??FRAMEWIN_DrawSkinFlex_17:
   \   00000360   000094E5           LDR      R0,[R4, #+0]
   \   00000364   ........           BL       GUI_SetColor
    200              GUI_DrawHLine(pDrawItemInfo->y1, pDrawItemInfo->x0, pDrawItemInfo->x1);
   \   00000368   142095E5           LDR      R2,[R5, #+20]
   \   0000036C   0C1095E5           LDR      R1,[R5, #+12]
   \   00000370   180095E5           LDR      R0,[R5, #+24]
   \   00000374   ........           BL       GUI_DrawHLine
    201              GUI_SetColor(pProps->aColorFrame[1]);
   \   00000378   040094E5           LDR      R0,[R4, #+4]
   \   0000037C   ........           BL       GUI_SetColor
    202              GUI_DrawHLine(pDrawItemInfo->y1 - 1, pDrawItemInfo->x0 + 1, pDrawItemInfo->x1 - 1);
   \   00000380   140095E5           LDR      R0,[R5, #+20]
   \   00000384   012040E2           SUB      R2,R0,#+1
   \   00000388   0C0095E5           LDR      R0,[R5, #+12]
   \   0000038C   011080E2           ADD      R1,R0,#+1
   \   00000390   180095E5           LDR      R0,[R5, #+24]
   \   00000394   010040E2           SUB      R0,R0,#+1
   \   00000398   ........           BL       GUI_DrawHLine
    203              if (pProps->BorderSizeB > 2) {
   \   0000039C   280094E5           LDR      R0,[R4, #+40]
   \   000003A0   030050E3           CMP      R0,#+3
   \   000003A4   5A0000BA           BLT      ??FRAMEWIN_DrawSkinFlex_1
    204                x0 = pDrawItemInfo->x0 + 2;
   \   000003A8   0C1095E5           LDR      R1,[R5, #+12]
   \   000003AC   026081E2           ADD      R6,R1,#+2
    205                x1 = pDrawItemInfo->x1 - 2;
   \   000003B0   141095E5           LDR      R1,[R5, #+20]
   \   000003B4   027041E2           SUB      R7,R1,#+2
    206                y0 = pDrawItemInfo->y1 - pProps->BorderSizeB + 1;
   \   000003B8   181095E5           LDR      R1,[R5, #+24]
   \   000003BC   000041E0           SUB      R0,R1,R0
   \   000003C0   018080E2           ADD      R8,R0,#+1
    207                y1 = pDrawItemInfo->y1 - 2;
   \   000003C4   029041E2           SUB      R9,R1,#+2
    208                GUI_SetColor(pProps->aColorFrame[2]);
   \   000003C8   080094E5           LDR      R0,[R4, #+8]
   \   000003CC   ........           BL       GUI_SetColor
    209                GUI_FillRect(x0, y0, x1, y1);
   \   000003D0   0930A0E1           MOV      R3,R9
   \   000003D4   0720A0E1           MOV      R2,R7
   \   000003D8   0810A0E1           MOV      R1,R8
   \   000003DC   0600A0E1           MOV      R0,R6
   \   000003E0   ........           BL       GUI_FillRect
   \   000003E4   4A0000EA           B        ??FRAMEWIN_DrawSkinFlex_1
    210              }
    211              break;
    212            case WIDGET_ITEM_DRAW_BACKGROUND:
    213              Rect.x0 = pDrawItemInfo->x0;
   \                     ??FRAMEWIN_DrawSkinFlex_3:
   \   000003E8   0C0095E5           LDR      R0,[R5, #+12]
   \   000003EC   BC00CDE1           STRH     R0,[SP, #+12]
    214              Rect.y0 = pDrawItemInfo->y0;
   \   000003F0   100095E5           LDR      R0,[R5, #+16]
   \   000003F4   BE00CDE1           STRH     R0,[SP, #+14]
    215              Rect.x1 = pDrawItemInfo->x1;
   \   000003F8   140095E5           LDR      R0,[R5, #+20]
    216              Rect.y1 = pDrawItemInfo->y1;
    217              GUI_DrawGradientV(Rect.x0, Rect.y0, Rect.x1, Rect.y1, pProps->aColorTitle[0], pProps->aColorTitle[1]);
   \   000003FC   FE10DDE1           LDRSH    R1,[SP, #+14]
   \   00000400   B001CDE1           STRH     R0,[SP, #+16]
   \   00000404   180095E5           LDR      R0,[R5, #+24]
   \   00000408   F021DDE1           LDRSH    R2,[SP, #+16]
   \   0000040C   B201CDE1           STRH     R0,[SP, #+18]
   \   00000410   100094E5           LDR      R0,[R4, #+16]
   \   00000414   F231DDE1           LDRSH    R3,[SP, #+18]
   \   00000418   04008DE5           STR      R0,[SP, #+4]
   \   0000041C   0C0094E5           LDR      R0,[R4, #+12]
   \   00000420   00008DE5           STR      R0,[SP, #+0]
   \   00000424   FC00DDE1           LDRSH    R0,[SP, #+12]
   \   00000428   ........           BL       GUI_DrawGradientV
    218              break;
   \   0000042C   380000EA           B        ??FRAMEWIN_DrawSkinFlex_1
    219            case WIDGET_ITEM_DRAW_TEXT:
    220              Rect.x0 = pDrawItemInfo->x0 + pProps->SpaceX;
   \                     ??FRAMEWIN_DrawSkinFlex_6:
   \   00000430   180094E5           LDR      R0,[R4, #+24]
   \   00000434   0C1095E5           LDR      R1,[R5, #+12]
   \   00000438   011080E0           ADD      R1,R0,R1
   \   0000043C   BC10CDE1           STRH     R1,[SP, #+12]
    221              Rect.y0 = pDrawItemInfo->y0;
   \   00000440   101095E5           LDR      R1,[R5, #+16]
   \   00000444   BE10CDE1           STRH     R1,[SP, #+14]
    222              Rect.x1 = pDrawItemInfo->x1 - pProps->SpaceX;
   \   00000448   141095E5           LDR      R1,[R5, #+20]
   \   0000044C   000041E0           SUB      R0,R1,R0
   \   00000450   B001CDE1           STRH     R0,[SP, #+16]
    223              Rect.y1 = pDrawItemInfo->y1;
   \   00000454   180095E5           LDR      R0,[R5, #+24]
   \   00000458   B201CDE1           STRH     R0,[SP, #+18]
    224              pObj = FRAMEWIN_LOCK_H(pDrawItemInfo->hWin); {
   \   0000045C   000095E5           LDR      R0,[R5, #+0]
   \   00000460   ........           BL       GUI_ALLOC_LockH
   \   00000464   0040A0E1           MOV      R4,R0
    225                if (pObj->hText) {
   \   00000468   700094E5           LDR      R0,[R4, #+112]
   \   0000046C   000050E3           CMP      R0,#+0
   \   00000470   1000000A           BEQ      ??FRAMEWIN_DrawSkinFlex_19
    226                  GUI_SetTextMode(GUI_TM_TRANS);
   \   00000474   0200A0E3           MOV      R0,#+2
   \   00000478   ........           BL       GUI_SetTextMode
    227                  ColorIndex = (pObj->Flags & FRAMEWIN_SF_ACTIVE) ? 1 : 0;
    228                  GUI_SetColor(pObj->Props.aTextColor[ColorIndex]);
   \   0000047C   BC07D4E1           LDRH     R0,[R4, #+124]
   \   00000480   0110A0E3           MOV      R1,#+1
   \   00000484   FF0000E2           AND      R0,R0,#0xFF
   \   00000488   A00101E0           AND      R0,R1,R0, LSR #+3
   \   0000048C   000184E0           ADD      R0,R4,R0, LSL #+2
   \   00000490   400090E5           LDR      R0,[R0, #+64]
   \   00000494   ........           BL       GUI_SetColor
    229                  GUI_SetFont(pObj->Props.pFont);
   \   00000498   340094E5           LDR      R0,[R4, #+52]
   \   0000049C   ........           BL       GUI_SetFont
    230                  pText = (const char *)GUI_LOCK_H(pObj->hText); {
   \   000004A0   700094E5           LDR      R0,[R4, #+112]
   \   000004A4   ........           BL       GUI_ALLOC_LockH
    231                    GUI_DispStringInRect(pText, &Rect, pObj->Props.TextAlign);
   \   000004A8   FA25D4E1           LDRSH    R2,[R4, #+90]
   \   000004AC   0C108DE2           ADD      R1,SP,#+12
   \   000004B0   ........           BL       GUI_DispStringInRect
    232                  } GUI_UNLOCK_H(pText);
   \   000004B4   ........           BL       GUI_ALLOC_UnlockH
    233                }
    234              } GUI_UNLOCK_H(pObj);
   \                     ??FRAMEWIN_DrawSkinFlex_19:
   \   000004B8   ........           BL       GUI_ALLOC_UnlockH
    235              break;
   \   000004BC   140000EA           B        ??FRAMEWIN_DrawSkinFlex_1
    236            case WIDGET_ITEM_DRAW_SEP:
    237              Rect.x0 = pDrawItemInfo->x0;
   \                     ??FRAMEWIN_DrawSkinFlex_5:
   \   000004C0   0C0095E5           LDR      R0,[R5, #+12]
   \   000004C4   BC00CDE1           STRH     R0,[SP, #+12]
    238              Rect.y0 = pDrawItemInfo->y0;
   \   000004C8   100095E5           LDR      R0,[R5, #+16]
   \   000004CC   BE00CDE1           STRH     R0,[SP, #+14]
    239              Rect.x1 = pDrawItemInfo->x1;
   \   000004D0   140095E5           LDR      R0,[R5, #+20]
   \   000004D4   B001CDE1           STRH     R0,[SP, #+16]
    240              Rect.y1 = pDrawItemInfo->y1;
   \   000004D8   180095E5           LDR      R0,[R5, #+24]
   \   000004DC   B201CDE1           STRH     R0,[SP, #+18]
    241              GUI_SetColor(pProps->aColorFrame[2]);
   \   000004E0   080094E5           LDR      R0,[R4, #+8]
   \   000004E4   ........           BL       GUI_SetColor
    242              GUI_FillRectEx(&Rect);
   \   000004E8   0C008DE2           ADD      R0,SP,#+12
   \   000004EC   ........           BL       GUI_FillRectEx
    243              break;
   \   000004F0   070000EA           B        ??FRAMEWIN_DrawSkinFlex_1
    244            case WIDGET_ITEM_CREATE:
    245              pObj = FRAMEWIN_LOCK_H(pDrawItemInfo->hWin); {
   \                     ??FRAMEWIN_DrawSkinFlex_2:
   \   000004F4   000095E5           LDR      R0,[R5, #+0]
   \   000004F8   ........           BL       GUI_ALLOC_LockH
    246                pObj->Props.TextAlign |= GUI_TA_VCENTER;
   \   000004FC   FA15D0E1           LDRSH    R1,[R0, #+90]
   \   00000500   0C1081E3           ORR      R1,R1,#0xC
   \   00000504   BA15C0E1           STRH     R1,[R0, #+90]
    247              } GUI_UNLOCK_H(pObj);
   \   00000508   ........           BL       GUI_ALLOC_UnlockH
    248              WM_SetHasTrans(pDrawItemInfo->hWin);
   \   0000050C   000095E5           LDR      R0,[R5, #+0]
   \   00000510   ........           BL       WM_SetHasTrans
    249              break;
    250            }
    251            return 0;
   \                     ??FRAMEWIN_DrawSkinFlex_1:
   \   00000514   0000A0E3           MOV      R0,#+0
   \                     ??FRAMEWIN_DrawSkinFlex_11:
   \   00000518   14D08DE2           ADD      SP,SP,#+20       ;; stack cleaning
   \   0000051C   F083BDE8           POP      {R4-R9,PC}       ;; return
    252          }
    253          
    254          /*********************************************************************
    255          *
    256          *       FRAMEWIN_SetSkinFlexProps
    257          */

   \                                 In section .text, align 4, keep-with-next
    258          void FRAMEWIN_SetSkinFlexProps(const FRAMEWIN_SKINFLEX_PROPS * pProps, int Index) {
    259            if (Index < GUI_COUNTOF(_apProps)) {
   \                     FRAMEWIN_SetSkinFlexProps:
   \   00000000   020051E3           CMP      R1,#+2
   \   00000004   0000003A           BCC      ??FRAMEWIN_SetSkinFlexProps_0
   \   00000008   1EFF2FE1           BX       LR
   \                     ??FRAMEWIN_SetSkinFlexProps_0:
   \   0000000C   30402DE9           PUSH     {R4,R5,LR}
   \   00000010   ........           ADR      R2,_apProps
   \   00000014   011192E7           LDR      R1,[R2, +R1, LSL #+2]
   \   00000018   3C50B0E8           LDM      R0!,{R2-R5,R12,LR}
   \   0000001C   3C50A1E8           STM      R1!,{R2-R5,R12,LR}
   \   00000020   1C50B0E8           LDM      R0!,{R2-R4,R12,LR}
    260              *_apProps[Index] = *pProps;
    261              //
    262              // The size of the border has to be at least 2 pixels
    263              //
    264              if (_apProps[Index]->BorderSizeL < 2) {
   \   00000024   020053E3           CMP      R3,#+2
   \   00000028   1C50A1E8           STM      R1!,{R2-R4,R12,LR}
   \   0000002C   2C1041E2           SUB      R1,R1,#+44
    265                _apProps[Index]->BorderSizeL = 2;
   \   00000030   0200A0B3           MOVLT    R0,#+2
   \   00000034   1C0081B5           STRLT    R0,[R1, #+28]
    266              }
    267              if (_apProps[Index]->BorderSizeR < 2) {
   \   00000038   020054E3           CMP      R4,#+2
    268                _apProps[Index]->BorderSizeR = 2;
   \   0000003C   0200A0B3           MOVLT    R0,#+2
   \   00000040   200081B5           STRLT    R0,[R1, #+32]
    269              }
    270              if (_apProps[Index]->BorderSizeT < 2) {
   \   00000044   02005CE3           CMP      R12,#+2
    271                _apProps[Index]->BorderSizeT = 2;
   \   00000048   0200A0B3           MOVLT    R0,#+2
   \   0000004C   240081B5           STRLT    R0,[R1, #+36]
    272              }
    273              if (_apProps[Index]->BorderSizeB < 2) {
   \   00000050   02005EE3           CMP      LR,#+2
    274                _apProps[Index]->BorderSizeB = 2;
   \   00000054   0200A0B3           MOVLT    R0,#+2
   \   00000058   280081B5           STRLT    R0,[R1, #+40]
    275              }
    276            }
    277          }
   \   0000005C   3080BDE8           POP      {R4,R5,PC}       ;; return
    278          
    279          /*********************************************************************
    280          *
    281          *       FRAMEWIN_GetSkinFlexProps
    282          */

   \                                 In section .text, align 4, keep-with-next
    283          void FRAMEWIN_GetSkinFlexProps(FRAMEWIN_SKINFLEX_PROPS * pProps, int Index) {
    284            if (Index < GUI_COUNTOF(_apProps)) {
   \                     FRAMEWIN_GetSkinFlexProps:
   \   00000000   020051E3           CMP      R1,#+2
   \   00000004   0000003A           BCC      ??FRAMEWIN_GetSkinFlexProps_0
    285              *pProps = *_apProps[Index];
   \   00000008   1EFF2FE1           BX       LR
    286            }
   \                     ??FRAMEWIN_GetSkinFlexProps_0:
   \   0000000C   30402DE9           PUSH     {R4,R5,LR}
   \   00000010   ........           ADR      R2,_apProps
   \   00000014   011192E7           LDR      R1,[R2, +R1, LSL #+2]
   \   00000018   3C50B1E8           LDM      R1!,{R2-R5,R12,LR}
   \   0000001C   3C50A0E8           STM      R0!,{R2-R5,R12,LR}
   \   00000020   1C50B1E8           LDM      R1!,{R2-R4,R12,LR}
   \   00000024   1C50A0E8           STM      R0!,{R2-R4,R12,LR}
    287          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     _PropsActive
    288          
    289          #else
    290            void FRAMEWIN_SkinFlex_C(void);
    291            void FRAMEWIN_SkinFlex_C(void) {} /* avoid empty object files */
    292          #endif /* GUI_WINSUPPORT */
    293          
    294          /*************************** End of file ****************************/

   Maximum stack usage in bytes:

     Function                  .cstack
     --------                  -------
     FRAMEWIN_DrawSkinFlex         48
     FRAMEWIN_GetSkinFlexProps     12
     FRAMEWIN_SetSkinFlexProps     12


   Section sizes:

     Function/Label            Bytes
     --------------            -----
     _PropsActive                88
     _PropsInactive
     _apProps                     8
     FRAMEWIN_DrawSkinFlex     1312
     FRAMEWIN_SetSkinFlexProps   96
     FRAMEWIN_GetSkinFlexProps   44
     ??DataTable1                 4

 
    88 bytes in section .data
 1 464 bytes in section .text
 
 1 464 bytes of CODE memory
    88 bytes of DATA memory

Errors: none
Warnings: none
