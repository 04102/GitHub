; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\DUII\Simulation\GUI\Widget\MESSAGEBOX.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
$SG15387 DB	'OK', 00H
_DATA	ENDS
PUBLIC	_MESSAGEBOX_Callback
EXTRN	_WM_DefaultProc:PROC
EXTRN	_WM_GetId:PROC
EXTRN	_GUI_EndDialog:PROC
EXTRN	_FRAMEWIN_SetClientColor:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	__RTC_InitBase:PROC
;	COMDAT rtc$TMZ
; File c:\duii\simulation\gui\widget\messagebox.c
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
; Function compile flags: /Odtp /RTCsu /ZI
rtc$IMZ	ENDS
;	COMDAT _MESSAGEBOX_Callback
_TEXT	SEGMENT
tv84 = -244						; size = 4
tv73 = -244						; size = 4
tv65 = -244						; size = 4
_Id$15352 = -44						; size = 4
_NCode$15351 = -32					; size = 4
_Key$15340 = -20					; size = 4
_hWin$ = -8						; size = 4
_pMsg$ = 8						; size = 4
_MESSAGEBOX_Callback PROC				; COMDAT
; Line 69
	push	ebp
	mov	ebp, esp
	sub	esp, 244				; 000000f4H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-244]
	mov	ecx, 61					; 0000003dH
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 70
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	mov	DWORD PTR _hWin$[ebp], ecx
; Line 71
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	DWORD PTR tv65[ebp], ecx
	cmp	DWORD PTR tv65[ebp], 14			; 0000000eH
	je	SHORT $LN12@MESSAGEBOX
	cmp	DWORD PTR tv65[ebp], 29			; 0000001dH
	je	SHORT $LN13@MESSAGEBOX
	cmp	DWORD PTR tv65[ebp], 38			; 00000026H
	je	SHORT $LN6@MESSAGEBOX
	jmp	$LN1@MESSAGEBOX
$LN13@MESSAGEBOX:
; Line 73
	push	16777215				; 00ffffffH
	mov	eax, DWORD PTR _hWin$[ebp]
	push	eax
	call	_FRAMEWIN_SetClientColor
	add	esp, 8
; Line 74
	jmp	$LN16@MESSAGEBOX
$LN12@MESSAGEBOX:
; Line 77
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+12]
	mov	edx, DWORD PTR [ecx]
	mov	DWORD PTR _Key$15340[ebp], edx
; Line 78
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+12]
	cmp	DWORD PTR [ecx+4], 0
	je	SHORT $LN11@MESSAGEBOX
; Line 79
	mov	eax, DWORD PTR _Key$15340[ebp]
	mov	DWORD PTR tv73[ebp], eax
	cmp	DWORD PTR tv73[ebp], 13			; 0000000dH
	je	SHORT $LN7@MESSAGEBOX
	cmp	DWORD PTR tv73[ebp], 27			; 0000001bH
	je	SHORT $LN8@MESSAGEBOX
	jmp	SHORT $LN11@MESSAGEBOX
$LN8@MESSAGEBOX:
; Line 81
	push	1
	mov	eax, DWORD PTR _hWin$[ebp]
	push	eax
	call	_GUI_EndDialog
	add	esp, 8
; Line 82
	jmp	SHORT $LN11@MESSAGEBOX
$LN7@MESSAGEBOX:
; Line 84
	push	0
	mov	eax, DWORD PTR _hWin$[ebp]
	push	eax
	call	_GUI_EndDialog
	add	esp, 8
$LN11@MESSAGEBOX:
; Line 89
	jmp	SHORT $LN16@MESSAGEBOX
$LN6@MESSAGEBOX:
; Line 92
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+12]
	mov	DWORD PTR _NCode$15351[ebp], ecx
; Line 93
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	push	ecx
	call	_WM_GetId
	add	esp, 4
	mov	DWORD PTR _Id$15352[ebp], eax
; Line 94
	mov	eax, DWORD PTR _NCode$15351[ebp]
	mov	DWORD PTR tv84[ebp], eax
	cmp	DWORD PTR tv84[ebp], 2
	je	SHORT $LN3@MESSAGEBOX
	jmp	SHORT $LN4@MESSAGEBOX
$LN3@MESSAGEBOX:
; Line 96
	cmp	DWORD PTR _Id$15352[ebp], 1
	jne	SHORT $LN4@MESSAGEBOX
; Line 97
	push	0
	mov	eax, DWORD PTR _hWin$[ebp]
	push	eax
	call	_GUI_EndDialog
	add	esp, 8
$LN4@MESSAGEBOX:
; Line 102
	jmp	SHORT $LN16@MESSAGEBOX
$LN1@MESSAGEBOX:
; Line 104
	mov	eax, DWORD PTR _pMsg$[ebp]
	push	eax
	call	_WM_DefaultProc
	add	esp, 4
$LN16@MESSAGEBOX:
; Line 106
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 244				; 000000f4H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_MESSAGEBOX_Callback ENDP
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	_MESSAGEBOX_Create
EXTRN	_WM_MakeModal:PROC
EXTRN	_GUI_CreateDialogBox:PROC
EXTRN	_BUTTON_CreateIndirect:PROC
EXTRN	_TEXT_CreateIndirect:PROC
EXTRN	_FRAMEWIN_CreateIndirect:PROC
EXTRN	_GUI_OrgY:WORD
EXTRN	_GUI_OrgX:WORD
EXTRN	_LCD_GetYSize:PROC
EXTRN	_LCD_GetXSize:PROC
EXTRN	_GUI_GetStringDistX:PROC
EXTRN	_GUI_GetYSizeOfFont:PROC
EXTRN	_FRAMEWIN_GetDefaultFont:PROC
EXTRN	_GUI_GetTextExtend:PROC
EXTRN	_GUI_SetFont:PROC
EXTRN	_TEXT_GetDefaultFont:PROC
EXTRN	_memset:PROC
EXTRN	_FRAMEWIN_GetDefaultBorderSize:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
EXTRN	@_RTC_CheckStackVars@8:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _MESSAGEBOX_Create
_TEXT	SEGMENT
_pOldFont$ = -252					; size = 4
_Rect$ = -240						; size = 8
_hBox$ = -224						; size = 4
_ySize$ = -212						; size = 4
_xSize$ = -200						; size = 4
_ySizeMessage$ = -188					; size = 4
_ySizeCaption$ = -176					; size = 4
_xSizeCaption$ = -164					; size = 4
_xSizeMessage$ = -152					; size = 4
_y0$ = -140						; size = 4
_x0$ = -128						; size = 4
_ySizeFrame$ = -116					; size = 4
_xSizeFrame$ = -104					; size = 4
_BorderSize$ = -92					; size = 4
__aDialogCreate$ = -80					; size = 72
__$ArrayPad$ = -4					; size = 4
_sMessage$ = 8						; size = 4
_sCaption$ = 12						; size = 4
_Flags$ = 16						; size = 4
_MESSAGEBOX_Create PROC					; COMDAT
; Line 112
	push	ebp
	mov	ebp, esp
	sub	esp, 448				; 000001c0H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-448]
	mov	ecx, 112				; 00000070H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
; Line 114
	call	_FRAMEWIN_GetDefaultBorderSize
	mov	DWORD PTR _BorderSize$[ebp], eax
; Line 115
	mov	eax, DWORD PTR _BorderSize$[ebp]
	lea	ecx, DWORD PTR [eax+eax+58]
	mov	DWORD PTR _xSizeFrame$[ebp], ecx
; Line 127
	push	72					; 00000048H
	push	0
	lea	eax, DWORD PTR __aDialogCreate$[ebp]
	push	eax
	call	_memset
	add	esp, 12					; 0000000cH
; Line 129
	call	_TEXT_GetDefaultFont
	push	eax
	call	_GUI_SetFont
	add	esp, 4
	mov	DWORD PTR _pOldFont$[ebp], eax
; Line 130
	push	255					; 000000ffH
	mov	eax, DWORD PTR _sMessage$[ebp]
	push	eax
	lea	ecx, DWORD PTR _Rect$[ebp]
	push	ecx
	call	_GUI_GetTextExtend
	add	esp, 12					; 0000000cH
; Line 131
	movsx	eax, WORD PTR _Rect$[ebp+4]
	movsx	ecx, WORD PTR _Rect$[ebp]
	sub	eax, ecx
	add	eax, 8
	mov	DWORD PTR _xSizeMessage$[ebp], eax
; Line 132
	movsx	eax, WORD PTR _Rect$[ebp+6]
	movsx	ecx, WORD PTR _Rect$[ebp+2]
	sub	eax, ecx
	add	eax, 1
	mov	DWORD PTR _ySizeMessage$[ebp], eax
; Line 133
	mov	eax, DWORD PTR _xSizeMessage$[ebp]
	add	eax, 12					; 0000000cH
	cmp	DWORD PTR _xSizeFrame$[ebp], eax
	jge	SHORT $LN6@MESSAGEBOX@2
; Line 134
	mov	eax, DWORD PTR _xSizeMessage$[ebp]
	add	eax, 12					; 0000000cH
	mov	DWORD PTR _xSizeFrame$[ebp], eax
$LN6@MESSAGEBOX@2:
; Line 136
	call	_FRAMEWIN_GetDefaultFont
	push	eax
	call	_GUI_GetYSizeOfFont
	add	esp, 4
	mov	DWORD PTR _ySizeCaption$[ebp], eax
; Line 142
	mov	eax, DWORD PTR _ySizeCaption$[ebp]
	mov	ecx, DWORD PTR _ySizeMessage$[ebp]
	lea	edx, DWORD PTR [ecx+eax+20]
	mov	eax, DWORD PTR _BorderSize$[ebp]
	lea	ecx, DWORD PTR [edx+eax*2+13]
	mov	DWORD PTR _ySizeFrame$[ebp], ecx
; Line 144
	mov	eax, DWORD PTR _sCaption$[ebp]
	push	eax
	call	_GUI_GetStringDistX
	add	esp, 4
	mov	DWORD PTR _xSizeCaption$[ebp], eax
; Line 145
	mov	eax, DWORD PTR _BorderSize$[ebp]
	mov	ecx, DWORD PTR _xSizeCaption$[ebp]
	lea	edx, DWORD PTR [ecx+eax*2]
	cmp	DWORD PTR _xSizeFrame$[ebp], edx
	jge	SHORT $LN5@MESSAGEBOX@2
; Line 146
	mov	eax, DWORD PTR _BorderSize$[ebp]
	mov	ecx, DWORD PTR _xSizeCaption$[ebp]
	lea	edx, DWORD PTR [ecx+eax*2]
	mov	DWORD PTR _xSizeFrame$[ebp], edx
$LN5@MESSAGEBOX@2:
; Line 149
	call	_LCD_GetXSize
	mov	DWORD PTR _xSize$[ebp], eax
; Line 150
	call	_LCD_GetYSize
	mov	DWORD PTR _ySize$[ebp], eax
; Line 151
	mov	eax, DWORD PTR _xSizeFrame$[ebp]
	cmp	eax, DWORD PTR _xSize$[ebp]
	jle	SHORT $LN4@MESSAGEBOX@2
; Line 152
	mov	eax, DWORD PTR _xSize$[ebp]
	mov	DWORD PTR _xSizeFrame$[ebp], eax
$LN4@MESSAGEBOX@2:
; Line 154
	mov	eax, DWORD PTR _ySizeFrame$[ebp]
	cmp	eax, DWORD PTR _ySize$[ebp]
	jle	SHORT $LN3@MESSAGEBOX@2
; Line 155
	mov	eax, DWORD PTR _ySize$[ebp]
	mov	DWORD PTR _ySizeFrame$[ebp], eax
$LN3@MESSAGEBOX@2:
; Line 158
	movsx	ecx, WORD PTR _GUI_OrgX
	mov	eax, DWORD PTR _xSize$[ebp]
	sub	eax, DWORD PTR _xSizeFrame$[ebp]
	cdq
	sub	eax, edx
	sar	eax, 1
	add	ecx, eax
	mov	DWORD PTR _x0$[ebp], ecx
; Line 159
	movsx	ecx, WORD PTR _GUI_OrgY
	mov	eax, DWORD PTR _ySize$[ebp]
	sub	eax, DWORD PTR _ySizeFrame$[ebp]
	cdq
	sub	eax, edx
	sar	eax, 1
	add	ecx, eax
	mov	DWORD PTR _y0$[ebp], ecx
; Line 161
	mov	eax, DWORD PTR _pOldFont$[ebp]
	push	eax
	call	_GUI_SetFont
	add	esp, 4
; Line 163
	mov	DWORD PTR __aDialogCreate$[ebp], OFFSET _FRAMEWIN_CreateIndirect
; Line 164
	mov	eax, DWORD PTR _sCaption$[ebp]
	mov	DWORD PTR __aDialogCreate$[ebp+4], eax
; Line 165
	mov	ax, WORD PTR _x0$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+10], ax
; Line 166
	mov	ax, WORD PTR _y0$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+12], ax
; Line 167
	mov	ax, WORD PTR _xSizeFrame$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+14], ax
; Line 168
	mov	ax, WORD PTR _ySizeFrame$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+16], ax
; Line 169
	mov	eax, DWORD PTR _Flags$[ebp]
	and	eax, 1
	je	SHORT $LN2@MESSAGEBOX@2
; Line 170
	mov	eax, 16					; 00000010H
	mov	WORD PTR __aDialogCreate$[ebp+18], ax
$LN2@MESSAGEBOX@2:
; Line 173
	mov	DWORD PTR __aDialogCreate$[ebp+24], OFFSET _TEXT_CreateIndirect
; Line 174
	mov	eax, DWORD PTR _sMessage$[ebp]
	mov	DWORD PTR __aDialogCreate$[ebp+28], eax
; Line 175
	mov	eax, 352				; 00000160H
	mov	WORD PTR __aDialogCreate$[ebp+32], ax
; Line 176
	mov	eax, DWORD PTR _xSizeFrame$[ebp]
	sub	eax, DWORD PTR _xSizeMessage$[ebp]
	mov	ecx, DWORD PTR _BorderSize$[ebp]
	shl	ecx, 1
	sub	eax, ecx
	cdq
	sub	eax, edx
	sar	eax, 1
	mov	WORD PTR __aDialogCreate$[ebp+34], ax
; Line 177
	mov	eax, 4
	mov	WORD PTR __aDialogCreate$[ebp+36], ax
; Line 178
	mov	ax, WORD PTR _xSizeMessage$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+38], ax
; Line 179
	mov	ax, WORD PTR _ySizeMessage$[ebp]
	mov	WORD PTR __aDialogCreate$[ebp+40], ax
; Line 180
	mov	DWORD PTR __aDialogCreate$[ebp+44], 2
; Line 182
	mov	DWORD PTR __aDialogCreate$[ebp+48], OFFSET _BUTTON_CreateIndirect
; Line 183
	mov	DWORD PTR __aDialogCreate$[ebp+52], OFFSET $SG15387
; Line 184
	mov	eax, 1
	mov	WORD PTR __aDialogCreate$[ebp+56], ax
; Line 185
	mov	eax, DWORD PTR _xSizeFrame$[ebp]
	sub	eax, 50					; 00000032H
	mov	ecx, DWORD PTR _BorderSize$[ebp]
	shl	ecx, 1
	sub	eax, ecx
	cdq
	sub	eax, edx
	sar	eax, 1
	mov	WORD PTR __aDialogCreate$[ebp+58], ax
; Line 186
	mov	eax, DWORD PTR _ySizeMessage$[ebp]
	add	eax, 8
	mov	WORD PTR __aDialogCreate$[ebp+60], ax
; Line 187
	mov	eax, 50					; 00000032H
	mov	WORD PTR __aDialogCreate$[ebp+62], ax
; Line 188
	mov	eax, 20					; 00000014H
	mov	WORD PTR __aDialogCreate$[ebp+64], ax
; Line 190
	push	0
	push	0
	push	0
	push	OFFSET _MESSAGEBOX_Callback
	push	3
	lea	eax, DWORD PTR __aDialogCreate$[ebp]
	push	eax
	call	_GUI_CreateDialogBox
	add	esp, 24					; 00000018H
	mov	DWORD PTR _hBox$[ebp], eax
; Line 191
	mov	eax, DWORD PTR _Flags$[ebp]
	and	eax, 2
	je	SHORT $LN1@MESSAGEBOX@2
; Line 192
	mov	eax, DWORD PTR _hBox$[ebp]
	push	eax
	call	_WM_MakeModal
	add	esp, 4
$LN1@MESSAGEBOX@2:
; Line 194
	mov	eax, DWORD PTR _hBox$[ebp]
; Line 195
	push	edx
	mov	ecx, ebp
	push	eax
	lea	edx, DWORD PTR $LN12@MESSAGEBOX@2
	call	@_RTC_CheckStackVars@8
	pop	eax
	pop	edx
	pop	edi
	pop	esi
	pop	ebx
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	add	esp, 448				; 000001c0H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
	npad	1
$LN12@MESSAGEBOX@2:
	DD	2
	DD	$LN11@MESSAGEBOX@2
$LN11@MESSAGEBOX@2:
	DD	-80					; ffffffb0H
	DD	72					; 00000048H
	DD	$LN9@MESSAGEBOX@2
	DD	-240					; ffffff10H
	DD	8
	DD	$LN10@MESSAGEBOX@2
$LN10@MESSAGEBOX@2:
	DB	82					; 00000052H
	DB	101					; 00000065H
	DB	99					; 00000063H
	DB	116					; 00000074H
	DB	0
$LN9@MESSAGEBOX@2:
	DB	95					; 0000005fH
	DB	97					; 00000061H
	DB	68					; 00000044H
	DB	105					; 00000069H
	DB	97					; 00000061H
	DB	108					; 0000006cH
	DB	111					; 0000006fH
	DB	103					; 00000067H
	DB	67					; 00000043H
	DB	114					; 00000072H
	DB	101					; 00000065H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	101					; 00000065H
	DB	0
_MESSAGEBOX_Create ENDP
_TEXT	ENDS
PUBLIC	_GUI_MessageBox
EXTRN	_GUI_ExecCreatedDialog:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _GUI_MessageBox
_TEXT	SEGMENT
_hWin$ = -8						; size = 4
_sMessage$ = 8						; size = 4
_sCaption$ = 12						; size = 4
_Flags$ = 16						; size = 4
_GUI_MessageBox PROC					; COMDAT
; Line 201
	push	ebp
	mov	ebp, esp
	sub	esp, 204				; 000000ccH
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-204]
	mov	ecx, 51					; 00000033H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 203
	mov	eax, DWORD PTR _Flags$[ebp]
	push	eax
	mov	ecx, DWORD PTR _sCaption$[ebp]
	push	ecx
	mov	edx, DWORD PTR _sMessage$[ebp]
	push	edx
	call	_MESSAGEBOX_Create
	add	esp, 12					; 0000000cH
	mov	DWORD PTR _hWin$[ebp], eax
; Line 205
	mov	eax, DWORD PTR _hWin$[ebp]
	push	eax
	call	_GUI_ExecCreatedDialog
	add	esp, 4
; Line 206
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 204				; 000000ccH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_GUI_MessageBox ENDP
_TEXT	ENDS
END
