; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\DUII\DUII\Archive.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	_archiveDir
EXTRN	_BUTTON_CreateIndirect:PROC
EXTRN	_FRAMEWIN_CreateIndirect:PROC
_DATA	SEGMENT
COMM	_hText3:DWORD
COMM	_hText2:DWORD
COMM	_hArchivePopup:DWORD
COMM	_hText1:DWORD
$SG119064 DB	'*.*', 00H
$SG119081 DB	'*.*', 00H
$SG119094 DB	'Moving file %d of %d', 00H
	ORG $+3
$SG119098 DB	'..', 00H
	ORG $+1
$SG119103 DB	'.tqm', 00H
	ORG $+3
$SG119108 DB	'\', 00H
	ORG $+2
$SG119111 DB	'_2', 00H
	ORG $+1
$SG119134 DB	'Archiving Sessions', 00H
	ORG $+1
$SG119135 DB	'NOW', 00H
$SG119136 DB	'LATER', 00H
	ORG $+2
$SG119151 DB	'A large number of session files', 00H
$SG119152 DB	'slows Traqmate operation. Would', 00H
$SG119153 DB	'you like to archive the older files?', 00H
	ORG $+3
$SG119165 DB	'This may take a moment', 00H
	ORG $+1
$SG119166 DB	'Cancel', 00H
_DATA	ENDS
CONST	SEGMENT
_archiveDir DB	'..\Archive', 00H
	ORG $+5
?ArchiveResources@?1??ArchiveSessionsPopup@@9@9 DD FLAT:_FRAMEWIN_CreateIndirect ; `ArchiveSessionsPopup'::`2'::ArchiveResources
	DD	FLAT:$SG119134
	DW	00H
	DW	032H
	DW	014H
	DW	0168H
	DW	0dcH
	DW	00H
	DD	00H
	DD	FLAT:_BUTTON_CreateIndirect
	DD	FLAT:$SG119135
	DW	01H
	DW	023H
	DW	073H
	DW	078H
	DW	03cH
	ORG $+6
	DD	FLAT:_BUTTON_CreateIndirect
	DD	FLAT:$SG119136
	DW	02H
	DW	0c3H
	DW	073H
	DW	078H
	DW	03cH
	ORG $+6
CONST	ENDS
PUBLIC	_MoveThisFile
PUBLIC	_FileIsNotTQMFile
PUBLIC	_UserPressedCancel
PUBLIC	_compare
PUBLIC	_ArchiveSessionsPopup
PUBLIC	__$ArrayPad$
PUBLIC	_ArchiveSessions
EXTRN	_RepaintSplash:PROC
EXTRN	_WM_DeleteWindow:PROC
EXTRN	_PROGBAR_SetValue:PROC
EXTRN	_PROGBAR_SetText:PROC
EXTRN	_sprintf:PROC
EXTRN	_strlen:PROC
EXTRN	_GUI_Exec:PROC
EXTRN	_CreateProgressBar:PROC
EXTRN	__imp__GetLastError@0:PROC
EXTRN	__imp__CreateDirectoryA@8:PROC
EXTRN	_qsort:PROC
EXTRN	__imp__FindClose@4:PROC
EXTRN	__imp__FindNextFileA@8:PROC
EXTRN	__imp__FindFirstFileA@8:PROC
EXTRN	__imp__SetCurrentDirectoryA@4:PROC
EXTRN	_MY_SESSIONS_PATH:BYTE
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
EXTRN	@_RTC_CheckStackVars@8:PROC
EXTRN	__chkstk:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	__RTC_InitBase:PROC
;	COMDAT rtc$TMZ
; File c:\duii\duii\archive.c
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
; Function compile flags: /Odtp /RTCsu /ZI
rtc$IMZ	ENDS
;	COMDAT _ArchiveSessions
_TEXT	SEGMENT
_scratch$119093 = -4472					; size = 50
_DateList$ = -4412					; size = 4000
_cutoffDate$ = -404					; size = 8
_FindFileData$ = -388					; size = 320
_fh$ = -60						; size = 4
_hProgBar$ = -48					; size = 4
_total$ = -36						; size = 4
_index$ = -24						; size = 4
_count$ = -12						; size = 4
__$ArrayPad$ = -4					; size = 4
_ArchiveSessions PROC					; COMDAT
; Line 72
	push	ebp
	mov	ebp, esp
	mov	eax, 4668				; 0000123cH
	call	__chkstk
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-4668]
	mov	ecx, 1167				; 0000048fH
	mov	eax, -858993460				; ccccccccH
	rep stosd
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
; Line 80
	mov	DWORD PTR _count$[ebp], 0
; Line 82
	mov	esi, esp
	push	OFFSET _MY_SESSIONS_PATH
	call	DWORD PTR __imp__SetCurrentDirectoryA@4
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	je	$LN23@ArchiveSes
; Line 84
	mov	esi, esp
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	push	OFFSET $SG119064
	call	DWORD PTR __imp__FindFirstFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	mov	DWORD PTR _fh$[ebp], eax
	cmp	DWORD PTR _fh$[ebp], -1
	je	SHORT $LN22@ArchiveSes
; Line 86
	mov	eax, DWORD PTR _count$[ebp]
	mov	ecx, DWORD PTR _FindFileData$[ebp+20]
	mov	DWORD PTR _DateList$[ebp+eax*8], ecx
	mov	edx, DWORD PTR _FindFileData$[ebp+24]
	mov	DWORD PTR _DateList$[ebp+eax*8+4], edx
; Line 87
	mov	DWORD PTR _count$[ebp], 1
$LN21@ArchiveSes:
; Line 89
	mov	esi, esp
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	mov	ecx, DWORD PTR _fh$[ebp]
	push	ecx
	call	DWORD PTR __imp__FindNextFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	je	SHORT $LN22@ArchiveSes
	cmp	DWORD PTR _count$[ebp], 500		; 000001f4H
	jge	SHORT $LN22@ArchiveSes
; Line 91
	mov	eax, DWORD PTR _count$[ebp]
	mov	ecx, DWORD PTR _FindFileData$[ebp+20]
	mov	DWORD PTR _DateList$[ebp+eax*8], ecx
	mov	edx, DWORD PTR _FindFileData$[ebp+24]
	mov	DWORD PTR _DateList$[ebp+eax*8+4], edx
; Line 92
	mov	eax, DWORD PTR _count$[ebp]
	add	eax, 1
	mov	DWORD PTR _count$[ebp], eax
; Line 93
	jmp	SHORT $LN21@ArchiveSes
$LN22@ArchiveSes:
; Line 95
	mov	esi, esp
	mov	eax, DWORD PTR _fh$[ebp]
	push	eax
	call	DWORD PTR __imp__FindClose@4
	cmp	esi, esp
	call	__RTC_CheckEsp
$LN23@ArchiveSes:
; Line 99
	cmp	DWORD PTR _count$[ebp], 120		; 00000078H
	jge	SHORT $LN19@ArchiveSes
; Line 100
	jmp	$Exit_1$119069
$LN19@ArchiveSes:
; Line 103
	call	_ArchiveSessionsPopup
	test	eax, eax
	jne	SHORT $LN18@ArchiveSes
; Line 104
	jmp	$Exit_2$119071
$LN18@ArchiveSes:
; Line 107
	push	OFFSET _compare
	push	8
	mov	eax, DWORD PTR _count$[ebp]
	push	eax
	lea	ecx, DWORD PTR _DateList$[ebp]
	push	ecx
	call	_qsort
	add	esp, 16					; 00000010H
; Line 110
	mov	eax, DWORD PTR _count$[ebp]
	cdq
	sub	eax, edx
	sar	eax, 1
	mov	DWORD PTR _index$[ebp], eax
	cmp	DWORD PTR _index$[ebp], 50		; 00000032H
	jle	SHORT $LN17@ArchiveSes
; Line 111
	mov	DWORD PTR _index$[ebp], 50		; 00000032H
$LN17@ArchiveSes:
; Line 112
	mov	eax, DWORD PTR _count$[ebp]
	sub	eax, DWORD PTR _index$[ebp]
	mov	ecx, DWORD PTR _DateList$[ebp+eax*8]
	mov	edx, DWORD PTR _DateList$[ebp+eax*8+4]
	mov	DWORD PTR _cutoffDate$[ebp], ecx
	mov	DWORD PTR _cutoffDate$[ebp+4], edx
; Line 113
	mov	eax, DWORD PTR _count$[ebp]
	sub	eax, DWORD PTR _index$[ebp]
	mov	DWORD PTR _total$[ebp], eax
; Line 114
	mov	DWORD PTR _count$[ebp], 0
; Line 117
	mov	esi, esp
	push	0
	push	OFFSET _archiveDir
	call	DWORD PTR __imp__CreateDirectoryA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	SHORT $LN16@ArchiveSes
; Line 118
	mov	esi, esp
	call	DWORD PTR __imp__GetLastError@0
	cmp	esi, esp
	call	__RTC_CheckEsp
	cmp	eax, 183				; 000000b7H
	je	SHORT $LN16@ArchiveSes
; Line 119
	jmp	$Exit_2$119071
$LN16@ArchiveSes:
; Line 122
	mov	eax, DWORD PTR _total$[ebp]
	push	eax
	lea	ecx, DWORD PTR _hProgBar$[ebp]
	push	ecx
	call	_CreateProgressBar
	add	esp, 8
; Line 123
	call	_GUI_Exec
; Line 126
	mov	esi, esp
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	push	OFFSET $SG119081
	call	DWORD PTR __imp__FindFirstFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	mov	DWORD PTR _fh$[ebp], eax
	cmp	DWORD PTR _fh$[ebp], -1
	je	$Exit_3$119086
$LN13@ArchiveSes:
; Line 129
	call	_UserPressedCancel
	test	eax, eax
	je	SHORT $LN10@ArchiveSes
; Line 130
	jmp	$Exit_3$119086
$LN10@ArchiveSes:
; Line 132
	lea	eax, DWORD PTR _FindFileData$[ebp+44]
	push	eax
	call	_strlen
	add	esp, 4
	cmp	eax, 2
	jbe	$LN9@ArchiveSes
; Line 134
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	call	_FileIsNotTQMFile
	add	esp, 4
	test	eax, eax
	je	SHORT $LN8@ArchiveSes
; Line 136
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	call	_MoveThisFile
	add	esp, 4
	test	eax, eax
	jne	SHORT $LN7@ArchiveSes
; Line 137
	jmp	$Exit_3$119086
	jmp	SHORT $LN6@ArchiveSes
$LN7@ArchiveSes:
; Line 138
	mov	eax, DWORD PTR _count$[ebp]
	add	eax, 1
	mov	DWORD PTR _count$[ebp], eax
$LN6@ArchiveSes:
; Line 141
	jmp	SHORT $LN5@ArchiveSes
$LN8@ArchiveSes:
	lea	eax, DWORD PTR _cutoffDate$[ebp]
	push	eax
	lea	ecx, DWORD PTR _FindFileData$[ebp+20]
	push	ecx
	call	_compare
	add	esp, 8
	test	eax, eax
	jge	SHORT $LN5@ArchiveSes
; Line 146
	mov	eax, DWORD PTR _total$[ebp]
	push	eax
	mov	ecx, DWORD PTR _count$[ebp]
	push	ecx
	push	OFFSET $SG119094
	lea	edx, DWORD PTR _scratch$119093[ebp]
	push	edx
	call	_sprintf
	add	esp, 16					; 00000010H
; Line 147
	lea	eax, DWORD PTR _scratch$119093[ebp]
	push	eax
	mov	ecx, DWORD PTR _hProgBar$[ebp]
	push	ecx
	call	_PROGBAR_SetText
	add	esp, 8
; Line 148
	mov	eax, DWORD PTR _count$[ebp]
	push	eax
	mov	ecx, DWORD PTR _hProgBar$[ebp]
	push	ecx
	call	_PROGBAR_SetValue
	add	esp, 8
; Line 149
	call	_GUI_Exec
; Line 151
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	call	_MoveThisFile
	add	esp, 4
	test	eax, eax
	jne	SHORT $LN3@ArchiveSes
; Line 152
	jmp	SHORT $Exit_3$119086
	jmp	SHORT $LN5@ArchiveSes
$LN3@ArchiveSes:
; Line 153
	mov	eax, DWORD PTR _count$[ebp]
	add	eax, 1
	mov	DWORD PTR _count$[ebp], eax
$LN5@ArchiveSes:
; Line 154
	jmp	SHORT $LN12@ArchiveSes
$LN9@ArchiveSes:
; Line 156
	mov	eax, DWORD PTR _count$[ebp]
	add	eax, 1
	mov	DWORD PTR _count$[ebp], eax
$LN12@ArchiveSes:
; Line 158
	mov	esi, esp
	lea	eax, DWORD PTR _FindFileData$[ebp]
	push	eax
	mov	ecx, DWORD PTR _fh$[ebp]
	push	ecx
	call	DWORD PTR __imp__FindNextFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	$LN13@ArchiveSes
$Exit_3$119086:
; Line 162
	mov	eax, DWORD PTR _hProgBar$[ebp]
	push	eax
	call	_WM_DeleteWindow
	add	esp, 4
; Line 163
	mov	esi, esp
	mov	eax, DWORD PTR _fh$[ebp]
	push	eax
	call	DWORD PTR __imp__FindClose@4
	cmp	esi, esp
	call	__RTC_CheckEsp
$Exit_2$119071:
; Line 166
	call	_RepaintSplash
$Exit_1$119069:
; Line 169
	mov	esi, esp
	push	OFFSET $SG119098
	call	DWORD PTR __imp__SetCurrentDirectoryA@4
	cmp	esi, esp
	call	__RTC_CheckEsp
; Line 170
	push	edx
	mov	ecx, ebp
	push	eax
	lea	edx, DWORD PTR $LN32@ArchiveSes
	call	@_RTC_CheckStackVars@8
	pop	eax
	pop	edx
	pop	edi
	pop	esi
	pop	ebx
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	add	esp, 4668				; 0000123cH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
	npad	2
$LN32@ArchiveSes:
	DD	5
	DD	$LN31@ArchiveSes
$LN31@ArchiveSes:
	DD	-48					; ffffffd0H
	DD	4
	DD	$LN26@ArchiveSes
	DD	-388					; fffffe7cH
	DD	320					; 00000140H
	DD	$LN27@ArchiveSes
	DD	-404					; fffffe6cH
	DD	8
	DD	$LN28@ArchiveSes
	DD	-4412					; ffffeec4H
	DD	4000					; 00000fa0H
	DD	$LN29@ArchiveSes
	DD	-4472					; ffffee88H
	DD	50					; 00000032H
	DD	$LN30@ArchiveSes
$LN30@ArchiveSes:
	DB	115					; 00000073H
	DB	99					; 00000063H
	DB	114					; 00000072H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	99					; 00000063H
	DB	104					; 00000068H
	DB	0
$LN29@ArchiveSes:
	DB	68					; 00000044H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	101					; 00000065H
	DB	76					; 0000004cH
	DB	105					; 00000069H
	DB	115					; 00000073H
	DB	116					; 00000074H
	DB	0
$LN28@ArchiveSes:
	DB	99					; 00000063H
	DB	117					; 00000075H
	DB	116					; 00000074H
	DB	111					; 0000006fH
	DB	102					; 00000066H
	DB	102					; 00000066H
	DB	68					; 00000044H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	101					; 00000065H
	DB	0
$LN27@ArchiveSes:
	DB	70					; 00000046H
	DB	105					; 00000069H
	DB	110					; 0000006eH
	DB	100					; 00000064H
	DB	70					; 00000046H
	DB	105					; 00000069H
	DB	108					; 0000006cH
	DB	101					; 00000065H
	DB	68					; 00000044H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	97					; 00000061H
	DB	0
$LN26@ArchiveSes:
	DB	104					; 00000068H
	DB	80					; 00000050H
	DB	114					; 00000072H
	DB	111					; 0000006fH
	DB	103					; 00000067H
	DB	66					; 00000042H
	DB	97					; 00000061H
	DB	114					; 00000072H
	DB	0
_ArchiveSessions ENDP
_TEXT	ENDS
EXTRN	__stricmp:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _FileIsNotTQMFile
_TEXT	SEGMENT
_len$ = -8						; size = 4
_pFileData$ = 8						; size = 4
_FileIsNotTQMFile PROC					; COMDAT
; Line 177
	push	ebp
	mov	ebp, esp
	sub	esp, 204				; 000000ccH
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-204]
	mov	ecx, 51					; 00000033H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 180
	mov	eax, DWORD PTR _pFileData$[ebp]
	add	eax, 44					; 0000002cH
	push	eax
	call	_strlen
	add	esp, 4
	mov	DWORD PTR _len$[ebp], eax
; Line 181
	mov	eax, DWORD PTR _len$[ebp]
	mov	ecx, DWORD PTR _pFileData$[ebp]
	lea	edx, DWORD PTR [ecx+eax+40]
	push	edx
	push	OFFSET $SG119103
	call	__stricmp
	add	esp, 8
; Line 182
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 204				; 000000ccH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_FileIsNotTQMFile ENDP
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	__imp__MoveFileA@8:PROC
EXTRN	_strcat:PROC
EXTRN	_strcpy:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _MoveThisFile
_TEXT	SEGMENT
_destFilename$ = -160					; size = 150
__$ArrayPad$ = -4					; size = 4
_pFileData$ = 8						; size = 4
_MoveThisFile PROC					; COMDAT
; Line 191
	push	ebp
	mov	ebp, esp
	sub	esp, 356				; 00000164H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-356]
	mov	ecx, 89					; 00000059H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
; Line 195
	push	OFFSET _archiveDir
	lea	eax, DWORD PTR _destFilename$[ebp]
	push	eax
	call	_strcpy
	add	esp, 8
; Line 196
	push	OFFSET $SG119108
	lea	eax, DWORD PTR _destFilename$[ebp]
	push	eax
	call	_strcat
	add	esp, 8
; Line 197
	mov	eax, DWORD PTR _pFileData$[ebp]
	add	eax, 44					; 0000002cH
	push	eax
	lea	ecx, DWORD PTR _destFilename$[ebp]
	push	ecx
	call	_strcat
	add	esp, 8
; Line 200
	mov	esi, esp
	lea	eax, DWORD PTR _destFilename$[ebp]
	push	eax
	mov	ecx, DWORD PTR _pFileData$[ebp]
	add	ecx, 44					; 0000002cH
	push	ecx
	call	DWORD PTR __imp__MoveFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	SHORT $LN4@MoveThisFi
; Line 202
	mov	esi, esp
	call	DWORD PTR __imp__GetLastError@0
	cmp	esi, esp
	call	__RTC_CheckEsp
	cmp	eax, 183				; 000000b7H
	jne	SHORT $LN3@MoveThisFi
; Line 206
	push	OFFSET $SG119111
	lea	eax, DWORD PTR _destFilename$[ebp]
	push	eax
	call	_strcat
	add	esp, 8
; Line 207
	mov	esi, esp
	lea	eax, DWORD PTR _destFilename$[ebp]
	push	eax
	mov	ecx, DWORD PTR _pFileData$[ebp]
	add	ecx, 44					; 0000002cH
	push	ecx
	call	DWORD PTR __imp__MoveFileA@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	SHORT $LN2@MoveThisFi
; Line 208
	xor	eax, eax
	jmp	SHORT $LN5@MoveThisFi
$LN2@MoveThisFi:
; Line 210
	jmp	SHORT $LN4@MoveThisFi
$LN3@MoveThisFi:
	xor	eax, eax
	jmp	SHORT $LN5@MoveThisFi
$LN4@MoveThisFi:
; Line 212
	mov	eax, 1
$LN5@MoveThisFi:
; Line 213
	push	edx
	mov	ecx, ebp
	push	eax
	lea	edx, DWORD PTR $LN9@MoveThisFi
	call	@_RTC_CheckStackVars@8
	pop	eax
	pop	edx
	pop	edi
	pop	esi
	pop	ebx
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	add	esp, 356				; 00000164H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
$LN9@MoveThisFi:
	DD	1
	DD	$LN8@MoveThisFi
$LN8@MoveThisFi:
	DD	-160					; ffffff60H
	DD	150					; 00000096H
	DD	$LN7@MoveThisFi
$LN7@MoveThisFi:
	DB	100					; 00000064H
	DB	101					; 00000065H
	DB	115					; 00000073H
	DB	116					; 00000074H
	DB	70					; 00000046H
	DB	105					; 00000069H
	DB	108					; 0000006cH
	DB	101					; 00000065H
	DB	110					; 0000006eH
	DB	97					; 00000061H
	DB	109					; 0000006dH
	DB	101					; 00000065H
	DB	0
_MoveThisFile ENDP
_TEXT	ENDS
EXTRN	__allshl:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _compare
_TEXT	SEGMENT
_bLarge$ = -28						; size = 8
_aLarge$ = -12						; size = 8
_a$ = 8							; size = 4
_b$ = 12						; size = 4
_compare PROC						; COMDAT
; Line 216
	push	ebp
	mov	ebp, esp
	sub	esp, 224				; 000000e0H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-224]
	mov	ecx, 56					; 00000038H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 219
	mov	eax, DWORD PTR _a$[ebp]
	mov	eax, DWORD PTR [eax+4]
	xor	edx, edx
	mov	cl, 32					; 00000020H
	call	__allshl
	mov	ecx, DWORD PTR _a$[ebp]
	mov	ecx, DWORD PTR [ecx]
	xor	esi, esi
	or	eax, ecx
	or	edx, esi
	mov	DWORD PTR _aLarge$[ebp], eax
	mov	DWORD PTR _aLarge$[ebp+4], edx
; Line 220
	mov	eax, DWORD PTR _b$[ebp]
	mov	eax, DWORD PTR [eax+4]
	xor	edx, edx
	mov	cl, 32					; 00000020H
	call	__allshl
	mov	ecx, DWORD PTR _b$[ebp]
	mov	ecx, DWORD PTR [ecx]
	xor	esi, esi
	or	eax, ecx
	or	edx, esi
	mov	DWORD PTR _bLarge$[ebp], eax
	mov	DWORD PTR _bLarge$[ebp+4], edx
; Line 222
	mov	eax, DWORD PTR _aLarge$[ebp+4]
	cmp	eax, DWORD PTR _bLarge$[ebp+4]
	ja	SHORT $LN3@compare
	jb	SHORT $LN6@compare
	mov	ecx, DWORD PTR _aLarge$[ebp]
	cmp	ecx, DWORD PTR _bLarge$[ebp]
	jae	SHORT $LN3@compare
$LN6@compare:
; Line 223
	or	eax, -1
	jmp	SHORT $LN4@compare
$LN3@compare:
; Line 224
	mov	eax, DWORD PTR _aLarge$[ebp]
	cmp	eax, DWORD PTR _bLarge$[ebp]
	jne	SHORT $LN2@compare
	mov	ecx, DWORD PTR _aLarge$[ebp+4]
	cmp	ecx, DWORD PTR _bLarge$[ebp+4]
	jne	SHORT $LN2@compare
; Line 225
	xor	eax, eax
	jmp	SHORT $LN4@compare
$LN2@compare:
; Line 226
	mov	eax, DWORD PTR _aLarge$[ebp+4]
	cmp	eax, DWORD PTR _bLarge$[ebp+4]
	jb	SHORT $LN1@compare
	ja	SHORT $LN7@compare
	mov	ecx, DWORD PTR _aLarge$[ebp]
	cmp	ecx, DWORD PTR _bLarge$[ebp]
	jbe	SHORT $LN1@compare
$LN7@compare:
; Line 227
	mov	eax, 1
	jmp	SHORT $LN4@compare
$LN1@compare:
; Line 228
	xor	eax, eax
$LN4@compare:
; Line 229
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 224				; 000000e0H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_compare ENDP
_TEXT	ENDS
PUBLIC	_ArchiveSessionsCallback
EXTRN	_GUI_ExecDialogBox:PROC
EXTRN	_WM_GetDesktopWindow:PROC
EXTRN	_SetPopupDefaults:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _ArchiveSessionsPopup
_TEXT	SEGMENT
_ArchiveSessionsPopup PROC				; COMDAT
; Line 407
	push	ebp
	mov	ebp, esp
	sub	esp, 192				; 000000c0H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-192]
	mov	ecx, 48					; 00000030H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 414
	push	1
	call	_SetPopupDefaults
	add	esp, 4
; Line 416
	push	10					; 0000000aH
	push	10					; 0000000aH
	call	_WM_GetDesktopWindow
	push	eax
	push	OFFSET _ArchiveSessionsCallback
	push	3
	push	OFFSET ?ArchiveResources@?1??ArchiveSessionsPopup@@9@9
	call	_GUI_ExecDialogBox
	add	esp, 24					; 00000018H
	cmp	eax, 1
	jne	SHORT $LN2@ArchiveSes@2
; Line 417
	mov	eax, 1
	jmp	SHORT $LN3@ArchiveSes@2
	jmp	SHORT $LN3@ArchiveSes@2
$LN2@ArchiveSes@2:
; Line 418
	xor	eax, eax
$LN3@ArchiveSes@2:
; Line 419
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 192				; 000000c0H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_ArchiveSessionsPopup ENDP
_TEXT	ENDS
EXTRN	_WM_DefaultProc:PROC
EXTRN	_GUI_EndDialog:PROC
EXTRN	_GUI_Delay:PROC
EXTRN	_BUTTON_SetText:PROC
EXTRN	_BUTTON_CreateEx:PROC
EXTRN	_WM_GetId:PROC
EXTRN	_TEXT_CreateEx:PROC
EXTRN	_FRAMEWIN_SetTextColor:PROC
EXTRN	_popupTitleTextColor:DWORD
EXTRN	_FRAMEWIN_SetTextAlign:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _ArchiveSessionsCallback
_TEXT	SEGMENT
tv137 = -244						; size = 4
tv136 = -244						; size = 4
tv65 = -244						; size = 4
_hBtn$ = -44						; size = 4
_Id$ = -32						; size = 4
_NCode$ = -20						; size = 4
_hDlg$ = -8						; size = 4
_pMsg$ = 8						; size = 4
_ArchiveSessionsCallback PROC				; COMDAT
; Line 423
	push	ebp
	mov	ebp, esp
	sub	esp, 244				; 000000f4H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-244]
	mov	ecx, 61					; 0000003dH
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 428
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	mov	DWORD PTR _hDlg$[ebp], ecx
; Line 430
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	DWORD PTR tv65[ebp], ecx
	cmp	DWORD PTR tv65[ebp], 29			; 0000001dH
	je	SHORT $LN10@ArchiveSes@3
	cmp	DWORD PTR tv65[ebp], 38			; 00000026H
	je	$LN9@ArchiveSes@3
	jmp	$LN1@ArchiveSes@3
$LN10@ArchiveSes@3:
; Line 433
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	call	_FRAMEWIN_SetTextAlign
	add	esp, 8
; Line 434
	mov	eax, DWORD PTR _popupTitleTextColor
	push	eax
	mov	ecx, DWORD PTR _hDlg$[ebp]
	push	ecx
	call	_FRAMEWIN_SetTextColor
	add	esp, 8
; Line 435
	push	OFFSET $SG119151
	push	0
	push	14					; 0000000eH
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	push	20					; 00000014H
	push	350					; 0000015eH
	push	40					; 00000028H
	push	0
	call	_TEXT_CreateEx
	add	esp, 36					; 00000024H
	mov	DWORD PTR _hText1, eax
; Line 436
	push	OFFSET $SG119152
	push	0
	push	14					; 0000000eH
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	push	20					; 00000014H
	push	350					; 0000015eH
	push	70					; 00000046H
	push	0
	call	_TEXT_CreateEx
	add	esp, 36					; 00000024H
	mov	DWORD PTR _hText2, eax
; Line 437
	push	OFFSET $SG119153
	push	0
	push	14					; 0000000eH
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	push	20					; 00000014H
	push	350					; 0000015eH
	push	100					; 00000064H
	push	0
	call	_TEXT_CreateEx
	add	esp, 36					; 00000024H
	mov	DWORD PTR _hText3, eax
; Line 438
	jmp	$LN13@ArchiveSes@3
$LN9@ArchiveSes@3:
; Line 441
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	push	ecx
	call	_WM_GetId
	add	esp, 4
	mov	DWORD PTR _Id$[ebp], eax
; Line 442
	mov	eax, DWORD PTR _pMsg$[ebp]
	mov	ecx, DWORD PTR [eax+12]
	mov	DWORD PTR _NCode$[ebp], ecx
; Line 443
	mov	eax, DWORD PTR _NCode$[ebp]
	mov	DWORD PTR tv136[ebp], eax
	cmp	DWORD PTR tv136[ebp], 2
	je	SHORT $LN6@ArchiveSes@3
	jmp	$LN7@ArchiveSes@3
$LN6@ArchiveSes@3:
; Line 446
	mov	eax, DWORD PTR _Id$[ebp]
	mov	DWORD PTR tv137[ebp], eax
	cmp	DWORD PTR tv137[ebp], 1
	je	SHORT $LN3@ArchiveSes@3
	cmp	DWORD PTR tv137[ebp], 2
	je	$LN2@ArchiveSes@3
	jmp	$LN7@ArchiveSes@3
$LN3@ArchiveSes@3:
; Line 451
	mov	eax, DWORD PTR _hText1
	push	eax
	call	_WM_DeleteWindow
	add	esp, 4
; Line 452
	mov	eax, DWORD PTR _hText2
	push	eax
	call	_WM_DeleteWindow
	add	esp, 4
; Line 453
	mov	eax, DWORD PTR _hText3
	push	eax
	call	_WM_DeleteWindow
	add	esp, 4
; Line 454
	push	OFFSET $SG119165
	push	0
	push	14					; 0000000eH
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	push	30					; 0000001eH
	push	350					; 0000015eH
	push	35					; 00000023H
	push	0
	call	_TEXT_CreateEx
	add	esp, 36					; 00000024H
; Line 455
	push	2
	push	0
	push	2
	mov	eax, DWORD PTR _hDlg$[ebp]
	push	eax
	push	60					; 0000003cH
	push	120					; 00000078H
	push	70					; 00000046H
	push	120					; 00000078H
	call	_BUTTON_CreateEx
	add	esp, 32					; 00000020H
	mov	DWORD PTR _hBtn$[ebp], eax
; Line 456
	push	OFFSET $SG119166
	mov	eax, DWORD PTR _hBtn$[ebp]
	push	eax
	call	_BUTTON_SetText
	add	esp, 8
; Line 457
	push	1
	call	_GUI_Delay
	add	esp, 4
; Line 458
	mov	eax, DWORD PTR _Id$[ebp]
	push	eax
	mov	ecx, DWORD PTR _hDlg$[ebp]
	push	ecx
	call	_GUI_EndDialog
	add	esp, 8
; Line 460
	jmp	SHORT $LN7@ArchiveSes@3
$LN2@ArchiveSes@3:
; Line 463
	mov	eax, DWORD PTR _Id$[ebp]
	push	eax
	mov	ecx, DWORD PTR _hDlg$[ebp]
	push	ecx
	call	_GUI_EndDialog
	add	esp, 8
$LN7@ArchiveSes@3:
; Line 468
	jmp	SHORT $LN13@ArchiveSes@3
$LN1@ArchiveSes@3:
; Line 471
	mov	eax, DWORD PTR _pMsg$[ebp]
	push	eax
	call	_WM_DefaultProc
	add	esp, 4
$LN13@ArchiveSes@3:
; Line 473
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 244				; 000000f4H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_ArchiveSessionsCallback ENDP
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	_GUI_TOUCH_GetState:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _UserPressedCancel
_TEXT	SEGMENT
_y$119174 = -44						; size = 4
_x$119173 = -32						; size = 4
_TouchState$ = -20					; size = 12
__$ArrayPad$ = -4					; size = 4
_UserPressedCancel PROC					; COMDAT
; Line 476
	push	ebp
	mov	ebp, esp
	sub	esp, 240				; 000000f0H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-240]
	mov	ecx, 60					; 0000003cH
	mov	eax, -858993460				; ccccccccH
	rep stosd
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
; Line 479
	lea	eax, DWORD PTR _TouchState$[ebp]
	push	eax
	call	_GUI_TOUCH_GetState
	add	esp, 4
; Line 480
	movzx	eax, BYTE PTR _TouchState$[ebp+8]
	test	eax, eax
	je	SHORT $LN3@UserPresse
; Line 484
	mov	eax, DWORD PTR _TouchState$[ebp]
	mov	DWORD PTR _x$119173[ebp], eax
; Line 485
	mov	eax, DWORD PTR _TouchState$[ebp+4]
	mov	DWORD PTR _y$119174[ebp], eax
; Line 488
	cmp	DWORD PTR _x$119173[ebp], 175		; 000000afH
	jle	SHORT $LN3@UserPresse
	cmp	DWORD PTR _x$119173[ebp], 300		; 0000012cH
	jge	SHORT $LN3@UserPresse
; Line 489
	cmp	DWORD PTR _y$119174[ebp], 95		; 0000005fH
	jle	SHORT $LN3@UserPresse
	cmp	DWORD PTR _y$119174[ebp], 160		; 000000a0H
	jge	SHORT $LN3@UserPresse
; Line 490
	mov	eax, 1
	jmp	SHORT $LN4@UserPresse
$LN3@UserPresse:
; Line 492
	xor	eax, eax
$LN4@UserPresse:
; Line 493
	push	edx
	mov	ecx, ebp
	push	eax
	lea	edx, DWORD PTR $LN8@UserPresse
	call	@_RTC_CheckStackVars@8
	pop	eax
	pop	edx
	pop	edi
	pop	esi
	pop	ebx
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	add	esp, 240				; 000000f0H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
	npad	3
$LN8@UserPresse:
	DD	1
	DD	$LN7@UserPresse
$LN7@UserPresse:
	DD	-20					; ffffffecH
	DD	12					; 0000000cH
	DD	$LN6@UserPresse
$LN6@UserPresse:
	DB	84					; 00000054H
	DB	111					; 0000006fH
	DB	117					; 00000075H
	DB	99					; 00000063H
	DB	104					; 00000068H
	DB	83					; 00000053H
	DB	116					; 00000074H
	DB	97					; 00000061H
	DB	116					; 00000074H
	DB	101					; 00000065H
	DB	0
_UserPressedCancel ENDP
_TEXT	ENDS
END
