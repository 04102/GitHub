; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\DUII\Simulation\GUI\Core\LCD_Color.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	_LCD_pBkColorIndex
PUBLIC	_LCD_pColorIndex
PUBLIC	_LCD_pAColorIndex
EXTRN	_GUI_Context:BYTE
_DATA	SEGMENT
COMM	_LCD__aConvTable:DWORD:0100H
_LCD_pBkColorIndex DD FLAT:_GUI_Context
_LCD_pColorIndex DD FLAT:_GUI_Context+4
_LCD_pAColorIndex DD FLAT:_GUI_Context
_DATA	ENDS
PUBLIC	_LCD_GetpPalConvTableUncached
EXTRN	_LCD_Color2Index:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	__RTC_InitBase:PROC
;	COMDAT rtc$TMZ
; File c:\duii\simulation\gui\core\lcd_color.c
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
; Function compile flags: /Odtp /RTCsu /ZI
rtc$IMZ	ENDS
;	COMDAT _LCD_GetpPalConvTableUncached
_TEXT	SEGMENT
_pPalEntry$8349 = -32					; size = 4
_NumEntries$8348 = -20					; size = 4
_i$8347 = -8						; size = 4
_pLogPal$ = 8						; size = 4
_LCD_GetpPalConvTableUncached PROC			; COMDAT
; Line 64
	push	ebp
	mov	ebp, esp
	sub	esp, 228				; 000000e4H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-228]
	mov	ecx, 57					; 00000039H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 65
	cmp	DWORD PTR _pLogPal$[ebp], 0
	jne	SHORT $LN6@LCD_GetpPa
; Line 66
	xor	eax, eax
	jmp	SHORT $LN7@LCD_GetpPa
$LN6@LCD_GetpPa:
; Line 68
	mov	eax, DWORD PTR _pLogPal$[ebp]
	cmp	DWORD PTR [eax+8], 0
	jne	SHORT $LN5@LCD_GetpPa
; Line 69
	xor	eax, eax
	jmp	SHORT $LN7@LCD_GetpPa
$LN5@LCD_GetpPa:
; Line 74
	mov	eax, DWORD PTR _pLogPal$[ebp]
	cmp	DWORD PTR [eax], 256			; 00000100H
	jle	SHORT $LN4@LCD_GetpPa
; Line 75
	xor	eax, eax
	jmp	SHORT $LN7@LCD_GetpPa
$LN4@LCD_GetpPa:
; Line 82
	mov	eax, DWORD PTR _pLogPal$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	DWORD PTR _NumEntries$8348[ebp], ecx
; Line 83
	mov	eax, DWORD PTR _pLogPal$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	mov	DWORD PTR _pPalEntry$8349[ebp], ecx
; Line 84
	mov	DWORD PTR _i$8347[ebp], 0
	jmp	SHORT $LN3@LCD_GetpPa
$LN2@LCD_GetpPa:
	mov	eax, DWORD PTR _i$8347[ebp]
	add	eax, 1
	mov	DWORD PTR _i$8347[ebp], eax
$LN3@LCD_GetpPa:
	mov	eax, DWORD PTR _i$8347[ebp]
	cmp	eax, DWORD PTR _NumEntries$8348[ebp]
	jge	SHORT $LN1@LCD_GetpPa
; Line 85
	mov	eax, DWORD PTR _i$8347[ebp]
	mov	ecx, DWORD PTR _pPalEntry$8349[ebp]
	mov	edx, DWORD PTR [ecx+eax*4]
	push	edx
	call	_LCD_Color2Index
	add	esp, 4
	mov	ecx, DWORD PTR _i$8347[ebp]
	mov	DWORD PTR _LCD__aConvTable[ecx*4], eax
; Line 86
	jmp	SHORT $LN2@LCD_GetpPa
$LN1@LCD_GetpPa:
; Line 88
	mov	eax, OFFSET _LCD__aConvTable
$LN7@LCD_GetpPa:
; Line 89
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 228				; 000000e4H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_LCD_GetpPalConvTableUncached ENDP
_TEXT	ENDS
PUBLIC	_LCD_GetpPalConvTable
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _LCD_GetpPalConvTable
_TEXT	SEGMENT
_pLogPal$ = 8						; size = 4
_LCD_GetpPalConvTable PROC				; COMDAT
; Line 95
	push	ebp
	mov	ebp, esp
	sub	esp, 192				; 000000c0H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-192]
	mov	ecx, 48					; 00000030H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 105
	mov	eax, DWORD PTR _pLogPal$[ebp]
	push	eax
	call	_LCD_GetpPalConvTableUncached
	add	esp, 4
; Line 106
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 192				; 000000c0H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_LCD_GetpPalConvTable ENDP
_TEXT	ENDS
PUBLIC	_LCD_InitLUT
EXTRN	_LCD_SetLUTEntryEx:PROC
EXTRN	_LCD_Index2Color:PROC
EXTRN	_LCD_GetNumColorsEx:PROC
EXTRN	_LCD_API_ColorConv_0:BYTE
EXTRN	_LCD_GetBitsPerPixelEx:PROC
EXTRN	_GUI_SelectLayer:PROC
EXTRN	_GUI_DEVICE__GetpDriver:PROC
EXTRN	_LCD_GetNumLayers:PROC
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT _LCD_InitLUT
_TEXT	SEGMENT
_Color$ = -80						; size = 4
_NumColors$ = -68					; size = 4
_j$ = -56						; size = 4
_i$ = -44						; size = 4
_NumLayers$ = -32					; size = 4
_DisplayOld$ = -20					; size = 4
_pDevice$ = -8						; size = 4
_LCD_InitLUT PROC					; COMDAT
; Line 112
	push	ebp
	mov	ebp, esp
	sub	esp, 276				; 00000114H
	push	ebx
	push	esi
	push	edi
	lea	edi, DWORD PTR [ebp-276]
	mov	ecx, 69					; 00000045H
	mov	eax, -858993460				; ccccccccH
	rep stosd
; Line 118
	call	_LCD_GetNumLayers
	mov	DWORD PTR _NumLayers$[ebp], eax
; Line 122
	mov	DWORD PTR _i$[ebp], 0
	jmp	SHORT $LN9@LCD_InitLU
$LN8@LCD_InitLU:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
$LN9@LCD_InitLU:
	mov	eax, DWORD PTR _i$[ebp]
	cmp	eax, DWORD PTR _NumLayers$[ebp]
	jge	$LN10@LCD_InitLU
; Line 123
	mov	eax, DWORD PTR _i$[ebp]
	push	eax
	call	_GUI_DEVICE__GetpDriver
	add	esp, 4
	mov	DWORD PTR _pDevice$[ebp], eax
; Line 124
	cmp	DWORD PTR _pDevice$[ebp], 0
	je	$LN6@LCD_InitLU
; Line 128
	mov	eax, DWORD PTR _i$[ebp]
	push	eax
	call	_GUI_SelectLayer
	add	esp, 4
	mov	DWORD PTR _DisplayOld$[ebp], eax
; Line 129
	mov	eax, DWORD PTR _i$[ebp]
	push	eax
	call	_LCD_GetBitsPerPixelEx
	add	esp, 4
	cmp	eax, 8
	jg	SHORT $LN5@LCD_InitLU
; Line 130
	mov	eax, DWORD PTR _i$[ebp]
	mov	ecx, DWORD PTR _GUI_Context[eax*4+72]
	cmp	DWORD PTR [ecx+16], OFFSET _LCD_API_ColorConv_0
	je	SHORT $LN5@LCD_InitLU
; Line 134
	mov	eax, DWORD PTR _i$[ebp]
	push	eax
	call	_LCD_GetNumColorsEx
	add	esp, 4
	mov	DWORD PTR _NumColors$[ebp], eax
; Line 135
	mov	DWORD PTR _j$[ebp], 0
	jmp	SHORT $LN3@LCD_InitLU
$LN2@LCD_InitLU:
	mov	eax, DWORD PTR _j$[ebp]
	add	eax, 1
	mov	DWORD PTR _j$[ebp], eax
$LN3@LCD_InitLU:
	mov	eax, DWORD PTR _j$[ebp]
	cmp	eax, DWORD PTR _NumColors$[ebp]
	jge	SHORT $LN5@LCD_InitLU
; Line 136
	movzx	eax, BYTE PTR _j$[ebp]
	push	eax
	call	_LCD_Index2Color
	add	esp, 4
	mov	DWORD PTR _Color$[ebp], eax
; Line 137
	mov	eax, DWORD PTR _Color$[ebp]
	push	eax
	movzx	ecx, BYTE PTR _j$[ebp]
	push	ecx
	mov	edx, DWORD PTR _i$[ebp]
	push	edx
	call	_LCD_SetLUTEntryEx
	add	esp, 12					; 0000000cH
; Line 138
	jmp	SHORT $LN2@LCD_InitLU
$LN5@LCD_InitLU:
; Line 141
	mov	eax, DWORD PTR _DisplayOld$[ebp]
	push	eax
	call	_GUI_SelectLayer
	add	esp, 4
$LN6@LCD_InitLU:
; Line 143
	jmp	$LN8@LCD_InitLU
$LN10@LCD_InitLU:
; Line 144
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 276				; 00000114H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
_LCD_InitLUT ENDP
_TEXT	ENDS
END
